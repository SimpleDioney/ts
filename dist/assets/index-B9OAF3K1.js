var Rm=t=>{throw TypeError(t)};var Su=(t,e,n)=>e.has(t)||Rm("Cannot "+n);var I=(t,e,n)=>(Su(t,e,"read from private field"),n?n.call(t):e.get(t)),oe=(t,e,n)=>e.has(t)?Rm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ee=(t,e,n,r)=>(Su(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),me=(t,e,n)=>(Su(t,e,"access private method"),n);var Aa=(t,e,n,r)=>({set _(s){ee(t,e,s,n)},get _(){return I(t,e,r)}});function j1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Qy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jy={exports:{}},Oc={},Zy={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=Symbol.for("react.element"),G1=Symbol.for("react.portal"),V1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),z1=Symbol.for("react.provider"),W1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),q1=Symbol.for("react.suspense"),X1=Symbol.for("react.memo"),Q1=Symbol.for("react.lazy"),Am=Symbol.iterator;function J1(t){return t===null||typeof t!="object"?null:(t=Am&&t[Am]||t["@@iterator"],typeof t=="function"?t:null)}var ev={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tv=Object.assign,nv={};function Ki(t,e,n){this.props=t,this.context=e,this.refs=nv,this.updater=n||ev}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rv(){}rv.prototype=Ki.prototype;function _h(t,e,n){this.props=t,this.context=e,this.refs=nv,this.updater=n||ev}var Oh=_h.prototype=new rv;Oh.constructor=_h;tv(Oh,Ki.prototype);Oh.isPureReactComponent=!0;var Cm=Array.isArray,sv=Object.prototype.hasOwnProperty,Nh={current:null},iv={key:!0,ref:!0,__self:!0,__source:!0};function ov(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)sv.call(e,r)&&!iv.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:da,type:t,key:i,ref:o,props:s,_owner:Nh.current}}function Z1(t,e){return{$$typeof:da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fh(t){return typeof t=="object"&&t!==null&&t.$$typeof===da}function eb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lm=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eb(""+t.key):e.toString(36)}function fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case da:case G1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tu(o,0):r,Cm(s)?(n="",t!=null&&(n=t.replace(Lm,"$&/")+"/"),fl(s,e,n,"",function(c){return c})):s!=null&&(Fh(s)&&(s=Z1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Cm(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tu(i,a);o+=fl(i,e,n,l,s)}else if(l=J1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tu(i,a++),o+=fl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ca(t,e,n){if(t==null)return t;var r=[],s=0;return fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},hl={transition:null},nb={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:hl,ReactCurrentOwner:Nh};function av(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Ca,forEach:function(t,e,n){Ca(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ca(t,function(){e++}),e},toArray:function(t){return Ca(t,function(e){return e})||[]},only:function(t){if(!Fh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Ki;he.Fragment=V1;he.Profiler=K1;he.PureComponent=_h;he.StrictMode=H1;he.Suspense=q1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;he.act=av;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Nh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sv.call(e,l)&&!iv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:da,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:W1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z1,_context:t},t.Consumer=t};he.createElement=ov;he.createFactory=function(t){var e=ov.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:Y1,render:t}};he.isValidElement=Fh;he.lazy=function(t){return{$$typeof:Q1,_payload:{_status:-1,_result:t},_init:tb}};he.memo=function(t,e){return{$$typeof:X1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=hl.transition;hl.transition={};try{t()}finally{hl.transition=e}};he.unstable_act=av;he.useCallback=function(t,e){return wt.current.useCallback(t,e)};he.useContext=function(t){return wt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};he.useEffect=function(t,e){return wt.current.useEffect(t,e)};he.useId=function(){return wt.current.useId()};he.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return wt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};he.useRef=function(t){return wt.current.useRef(t)};he.useState=function(t){return wt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return wt.current.useTransition()};he.version="18.3.1";Zy.exports=he;var E=Zy.exports;const q=Qy(E),lv=j1({__proto__:null,default:q},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=E,sb=Symbol.for("react.element"),ib=Symbol.for("react.fragment"),ob=Object.prototype.hasOwnProperty,ab=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lb={key:!0,ref:!0,__self:!0,__source:!0};function cv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ob.call(e,r)&&!lb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sb,type:t,key:i,ref:o,props:s,_owner:ab.current}}Oc.Fragment=ib;Oc.jsx=cv;Oc.jsxs=cv;Jy.exports=Oc;var w=Jy.exports,uv={exports:{}},Kt={},dv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,N){var U=D.length;D.push(N);e:for(;0<U;){var H=U-1>>>1,z=D[H];if(0<s(z,N))D[H]=N,D[U]=z,U=H;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var N=D[0],U=D.pop();if(U!==N){D[0]=U;e:for(var H=0,z=D.length,X=z>>>1;H<X;){var se=2*(H+1)-1,de=D[se],te=se+1,Q=D[te];if(0>s(de,U))te<z&&0>s(Q,de)?(D[H]=Q,D[te]=U,H=te):(D[H]=de,D[se]=U,H=se);else if(te<z&&0>s(Q,U))D[H]=Q,D[te]=U,H=te;else break e}}return N}function s(D,N){var U=D.sortIndex-N.sortIndex;return U!==0?U:D.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,m=!1,p=!1,h=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=D)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function b(D){if(h=!1,x(D),!p)if(n(l)!==null)p=!0,G(T);else{var N=n(c);N!==null&&Y(b,N.startTime-D)}}function T(D,N){p=!1,h&&(h=!1,y(C),C=-1),m=!0;var U=f;try{for(x(N),d=n(l);d!==null&&(!(d.expirationTime>N)||D&&!_());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var z=H(d.expirationTime<=N);N=t.unstable_now(),typeof z=="function"?d.callback=z:d===n(l)&&r(l),x(N)}else r(l);d=n(l)}if(d!==null)var X=!0;else{var se=n(c);se!==null&&Y(b,se.startTime-N),X=!1}return X}finally{d=null,f=U,m=!1}}var A=!1,R=null,C=-1,k=5,L=-1;function _(){return!(t.unstable_now()-L<k)}function $(){if(R!==null){var D=t.unstable_now();L=D;var N=!0;try{N=R(!0,D)}finally{N?j():(A=!1,R=null)}}else A=!1}var j;if(typeof v=="function")j=function(){v($)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=$,j=function(){K.postMessage(null)}}else j=function(){g($,0)};function G(D){R=D,A||(A=!0,j())}function Y(D,N){C=g(function(){D(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,G(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var U=f;f=N;try{return D()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,N){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=f;f=D;try{return N()}finally{f=U}},t.unstable_scheduleCallback=function(D,N,U){var H=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,D){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,D={id:u++,callback:N,priorityLevel:D,startTime:U,expirationTime:z,sortIndex:-1},U>H?(D.sortIndex=U,e(c,D),n(l)===null&&D===n(c)&&(h?(y(C),C=-1):h=!0,Y(b,U-H))):(D.sortIndex=z,e(l,D),p||m||(p=!0,G(T))),D},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(D){var N=f;return function(){var U=f;f=N;try{return D.apply(this,arguments)}finally{f=U}}}})(fv);dv.exports=fv;var cb=dv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub=E,Vt=cb;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hv=new Set,Po={};function Ns(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(Po[t]=e,t=0;t<e.length;t++)hv.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ud=Object.prototype.hasOwnProperty,db=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Im={},km={};function fb(t){return Ud.call(km,t)?!0:Ud.call(Im,t)?!1:db.test(t)?km[t]=!0:(Im[t]=!0,!1)}function hb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pb(t,e,n,r){if(e===null||typeof e>"u"||hb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mh=/[\-:]([a-z])/g;function Uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mh,Uh);lt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mh,Uh);lt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mh,Uh);lt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bh(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pb(e,n,s,r)&&(n=null),r||s===null?fb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,La=Symbol.for("react.element"),Xs=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),$h=Symbol.for("react.strict_mode"),Bd=Symbol.for("react.profiler"),pv=Symbol.for("react.provider"),mv=Symbol.for("react.context"),jh=Symbol.for("react.forward_ref"),$d=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),gv=Symbol.for("react.offscreen"),Dm=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=Dm&&t[Dm]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,wu;function po(t){if(wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wu=e&&e[1]||""}return`
`+wu+t}var bu=!1;function Ru(t,e){if(!t||bu)return"";bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?po(t):""}function mb(t){switch(t.tag){case 5:return po(t.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return t=Ru(t.type,!1),t;case 11:return t=Ru(t.type.render,!1),t;case 1:return t=Ru(t.type,!0),t;default:return""}}function Gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case Xs:return"Portal";case Bd:return"Profiler";case $h:return"StrictMode";case $d:return"Suspense";case jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mv:return(t.displayName||"Context")+".Consumer";case pv:return(t._context.displayName||"Context")+".Provider";case jh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gh:return e=t.displayName||null,e!==null?e:Gd(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Gd(t(e))}catch{}}return null}function gb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(e);case 8:return e===$h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yb(t){var e=yv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ia(t){t._valueTracker||(t._valueTracker=yb(t))}function vv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vd(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xv(t,e){e=e.checked,e!=null&&Bh(t,"checked",e,!1)}function Hd(t,e){xv(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kd(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _m(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kd(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mo=Array.isArray;function ci(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Om(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(mo(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function Ev(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ka,Tv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ka=ka||document.createElement("div"),ka.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ka.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vb=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(t){vb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),So[e]=So[t]})});function wv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||So.hasOwnProperty(t)&&So[t]?(""+e).trim():e+"px"}function bv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var xb=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yd(t,e){if(e){if(xb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function qd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xd=null;function Vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qd=null,ui=null,di=null;function Fm(t){if(t=pa(t)){if(typeof Qd!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Bc(e),Qd(t.stateNode,t.type,e))}}function Rv(t){ui?di?di.push(t):di=[t]:ui=t}function Av(){if(ui){var t=ui,e=di;if(di=ui=null,Fm(t),e)for(t=0;t<e.length;t++)Fm(e[t])}}function Cv(t,e){return t(e)}function Lv(){}var Au=!1;function Iv(t,e,n){if(Au)return t(e,n);Au=!0;try{return Cv(t,e,n)}finally{Au=!1,(ui!==null||di!==null)&&(Lv(),Av())}}function Oo(t,e){var n=t.stateNode;if(n===null)return null;var r=Bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Jd=!1;if(ir)try{var no={};Object.defineProperty(no,"passive",{get:function(){Jd=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Jd=!1}function Eb(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var To=!1,jl=null,Gl=!1,Zd=null,Sb={onError:function(t){To=!0,jl=t}};function Tb(t,e,n,r,s,i,o,a,l){To=!1,jl=null,Eb.apply(Sb,arguments)}function wb(t,e,n,r,s,i,o,a,l){if(Tb.apply(this,arguments),To){if(To){var c=jl;To=!1,jl=null}else throw Error(W(198));Gl||(Gl=!0,Zd=c)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mm(t){if(Fs(t)!==t)throw Error(W(188))}function bb(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Mm(s),t;if(i===r)return Mm(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Dv(t){return t=bb(t),t!==null?Pv(t):null}function Pv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pv(t);if(e!==null)return e;t=t.sibling}return null}var _v=Vt.unstable_scheduleCallback,Um=Vt.unstable_cancelCallback,Rb=Vt.unstable_shouldYield,Ab=Vt.unstable_requestPaint,He=Vt.unstable_now,Cb=Vt.unstable_getCurrentPriorityLevel,Hh=Vt.unstable_ImmediatePriority,Ov=Vt.unstable_UserBlockingPriority,Vl=Vt.unstable_NormalPriority,Lb=Vt.unstable_LowPriority,Nv=Vt.unstable_IdlePriority,Nc=null,Gn=null;function Ib(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Pb,kb=Math.log,Db=Math.LN2;function Pb(t){return t>>>=0,t===0?32:31-(kb(t)/Db|0)|0}var Da=64,Pa=4194304;function go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=go(a):(i&=o,i!==0&&(r=go(i)))}else o=n&~s,o!==0?r=go(o):i!==0&&(r=go(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function _b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ob(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=_b(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ef(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fv(){var t=Da;return Da<<=1,!(Da&4194240)&&(Da=64),t}function Cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function Nb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function Mv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uv,zh,Bv,$v,jv,tf=!1,_a=[],Nr=null,Fr=null,Mr=null,No=new Map,Fo=new Map,wr=[],Fb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bm(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(e.pointerId)}}function ro(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pa(e),e!==null&&zh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Mb(t,e,n,r,s){switch(e){case"focusin":return Nr=ro(Nr,t,e,n,r,s),!0;case"dragenter":return Fr=ro(Fr,t,e,n,r,s),!0;case"mouseover":return Mr=ro(Mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return No.set(i,ro(No.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fo.set(i,ro(Fo.get(i)||null,t,e,n,r,s)),!0}return!1}function Gv(t){var e=ls(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=kv(n),e!==null){t.blockedOn=e,jv(t.priority,function(){Bv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xd=r,n.target.dispatchEvent(r),Xd=null}else return e=pa(n),e!==null&&zh(e),t.blockedOn=n,!1;e.shift()}return!0}function $m(t,e,n){pl(t)&&n.delete(e)}function Ub(){tf=!1,Nr!==null&&pl(Nr)&&(Nr=null),Fr!==null&&pl(Fr)&&(Fr=null),Mr!==null&&pl(Mr)&&(Mr=null),No.forEach($m),Fo.forEach($m)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,tf||(tf=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,Ub)))}function Mo(t){function e(s){return so(s,t)}if(0<_a.length){so(_a[0],t);for(var n=1;n<_a.length;n++){var r=_a[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&so(Nr,t),Fr!==null&&so(Fr,t),Mr!==null&&so(Mr,t),No.forEach(e),Fo.forEach(e),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)Gv(n),n.blockedOn===null&&wr.shift()}var fi=dr.ReactCurrentBatchConfig,Kl=!0;function Bb(t,e,n,r){var s=Re,i=fi.transition;fi.transition=null;try{Re=1,Wh(t,e,n,r)}finally{Re=s,fi.transition=i}}function $b(t,e,n,r){var s=Re,i=fi.transition;fi.transition=null;try{Re=4,Wh(t,e,n,r)}finally{Re=s,fi.transition=i}}function Wh(t,e,n,r){if(Kl){var s=nf(t,e,n,r);if(s===null)Mu(t,e,r,zl,n),Bm(t,r);else if(Mb(s,t,e,n,r))r.stopPropagation();else if(Bm(t,r),e&4&&-1<Fb.indexOf(t)){for(;s!==null;){var i=pa(s);if(i!==null&&Uv(i),i=nf(t,e,n,r),i===null&&Mu(t,e,r,zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mu(t,e,r,null,n)}}var zl=null;function nf(t,e,n,r){if(zl=null,t=Vh(r),t=ls(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zl=t,null}function Vv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cb()){case Hh:return 1;case Ov:return 4;case Vl:case Lb:return 16;case Nv:return 536870912;default:return 16}default:return 16}}var Pr=null,Yh=null,ml=null;function Hv(){if(ml)return ml;var t,e=Yh,n=e.length,r,s="value"in Pr?Pr.value:Pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ml=s.slice(t,1<r?1-r:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function jm(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oa:jm,this.isPropagationStopped=jm,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qh=zt(zi),ha=$e({},zi,{view:0,detail:0}),jb=zt(ha),Lu,Iu,io,Fc=$e({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Lu=t.screenX-io.screenX,Iu=t.screenY-io.screenY):Iu=Lu=0,io=t),Lu)},movementY:function(t){return"movementY"in t?t.movementY:Iu}}),Gm=zt(Fc),Gb=$e({},Fc,{dataTransfer:0}),Vb=zt(Gb),Hb=$e({},ha,{relatedTarget:0}),ku=zt(Hb),Kb=$e({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),zb=zt(Kb),Wb=$e({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yb=zt(Wb),qb=$e({},zi,{data:0}),Vm=zt(qb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Jb[t])?!!e[t]:!1}function Xh(){return Zb}var eR=$e({},ha,{key:function(t){if(t.key){var e=Xb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xh,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tR=zt(eR),nR=$e({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=zt(nR),rR=$e({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xh}),sR=zt(rR),iR=$e({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),oR=zt(iR),aR=$e({},Fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lR=zt(aR),cR=[9,13,27,32],Qh=ir&&"CompositionEvent"in window,wo=null;ir&&"documentMode"in document&&(wo=document.documentMode);var uR=ir&&"TextEvent"in window&&!wo,Kv=ir&&(!Qh||wo&&8<wo&&11>=wo),Km=" ",zm=!1;function zv(t,e){switch(t){case"keyup":return cR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function dR(t,e){switch(t){case"compositionend":return Wv(e);case"keypress":return e.which!==32?null:(zm=!0,Km);case"textInput":return t=e.data,t===Km&&zm?null:t;default:return null}}function fR(t,e){if(Js)return t==="compositionend"||!Qh&&zv(t,e)?(t=Hv(),ml=Yh=Pr=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kv&&e.locale!=="ko"?null:e.data;default:return null}}var hR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hR[t.type]:e==="textarea"}function Yv(t,e,n,r){Rv(r),e=Wl(e,"onChange"),0<e.length&&(n=new qh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bo=null,Uo=null;function pR(t){ix(t,0)}function Mc(t){var e=ti(t);if(vv(e))return t}function mR(t,e){if(t==="change")return e}var qv=!1;if(ir){var Du;if(ir){var Pu="oninput"in document;if(!Pu){var Ym=document.createElement("div");Ym.setAttribute("oninput","return;"),Pu=typeof Ym.oninput=="function"}Du=Pu}else Du=!1;qv=Du&&(!document.documentMode||9<document.documentMode)}function qm(){bo&&(bo.detachEvent("onpropertychange",Xv),Uo=bo=null)}function Xv(t){if(t.propertyName==="value"&&Mc(Uo)){var e=[];Yv(e,Uo,t,Vh(t)),Iv(pR,e)}}function gR(t,e,n){t==="focusin"?(qm(),bo=e,Uo=n,bo.attachEvent("onpropertychange",Xv)):t==="focusout"&&qm()}function yR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(Uo)}function vR(t,e){if(t==="click")return Mc(e)}function xR(t,e){if(t==="input"||t==="change")return Mc(e)}function ER(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:ER;function Bo(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ud.call(e,s)||!xn(t[s],e[s]))return!1}return!0}function Xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qm(t,e){var n=Xm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xm(n)}}function Qv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jv(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function Jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SR(t){var e=Jv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qv(n.ownerDocument.documentElement,n)){if(r!==null&&Jh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Qm(n,i);var o=Qm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TR=ir&&"documentMode"in document&&11>=document.documentMode,Zs=null,rf=null,Ro=null,sf=!1;function Jm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sf||Zs==null||Zs!==$l(r)||(r=Zs,"selectionStart"in r&&Jh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ro&&Bo(Ro,r)||(Ro=r,r=Wl(rf,"onSelect"),0<r.length&&(e=new qh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},_u={},Zv={};ir&&(Zv=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Uc(t){if(_u[t])return _u[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zv)return _u[t]=e[n];return t}var ex=Uc("animationend"),tx=Uc("animationiteration"),nx=Uc("animationstart"),rx=Uc("transitionend"),sx=new Map,Zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){sx.set(t,e),Ns(e,[t])}for(var Ou=0;Ou<Zm.length;Ou++){var Nu=Zm[Ou],wR=Nu.toLowerCase(),bR=Nu[0].toUpperCase()+Nu.slice(1);Xr(wR,"on"+bR)}Xr(ex,"onAnimationEnd");Xr(tx,"onAnimationIteration");Xr(nx,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(rx,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RR=new Set("cancel close invalid load scroll toggle".split(" ").concat(yo));function eg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wb(r,e,void 0,t),t.currentTarget=null}function ix(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;eg(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;eg(s,a,c),i=l}}}if(Gl)throw t=Zd,Gl=!1,Zd=null,t}function _e(t,e){var n=e[uf];n===void 0&&(n=e[uf]=new Set);var r=t+"__bubble";n.has(r)||(ox(e,t,2,!1),n.add(r))}function Fu(t,e,n){var r=0;e&&(r|=4),ox(n,t,r,e)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[Fa]){t[Fa]=!0,hv.forEach(function(n){n!=="selectionchange"&&(RR.has(n)||Fu(n,!1,t),Fu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fa]||(e[Fa]=!0,Fu("selectionchange",!1,e))}}function ox(t,e,n,r){switch(Vv(e)){case 1:var s=Bb;break;case 4:s=$b;break;default:s=Wh}n=s.bind(null,e,n,t),s=void 0,!Jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Iv(function(){var c=i,u=Vh(n),d=[];e:{var f=sx.get(t);if(f!==void 0){var m=qh,p=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":m=tR;break;case"focusin":p="focus",m=ku;break;case"focusout":p="blur",m=ku;break;case"beforeblur":case"afterblur":m=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=sR;break;case ex:case tx:case nx:m=zb;break;case rx:m=oR;break;case"scroll":m=jb;break;case"wheel":m=lR;break;case"copy":case"cut":case"paste":m=Yb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Hm}var h=(e&4)!==0,g=!h&&t==="scroll",y=h?f!==null?f+"Capture":null:f;h=[];for(var v=c,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=Oo(v,y),b!=null&&h.push(jo(v,b,x)))),g)break;v=v.return}0<h.length&&(f=new m(f,p,null,n,u),d.push({event:f,listeners:h}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Xd&&(p=n.relatedTarget||n.fromElement)&&(ls(p)||p[or]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=c,p=p?ls(p):null,p!==null&&(g=Fs(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=c),m!==p)){if(h=Gm,b="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(h=Hm,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=m==null?f:ti(m),x=p==null?f:ti(p),f=new h(b,v+"leave",m,n,u),f.target=g,f.relatedTarget=x,b=null,ls(u)===c&&(h=new h(y,v+"enter",p,n,u),h.target=x,h.relatedTarget=g,b=h),g=b,m&&p)t:{for(h=m,y=p,v=0,x=h;x;x=Gs(x))v++;for(x=0,b=y;b;b=Gs(b))x++;for(;0<v-x;)h=Gs(h),v--;for(;0<x-v;)y=Gs(y),x--;for(;v--;){if(h===y||y!==null&&h===y.alternate)break t;h=Gs(h),y=Gs(y)}h=null}else h=null;m!==null&&tg(d,f,m,h,!1),p!==null&&g!==null&&tg(d,g,p,h,!0)}}e:{if(f=c?ti(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=mR;else if(Wm(f))if(qv)T=xR;else{T=yR;var A=gR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=vR);if(T&&(T=T(t,c))){Yv(d,T,n,u);break e}A&&A(t,f,c),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Kd(f,"number",f.value)}switch(A=c?ti(c):window,t){case"focusin":(Wm(A)||A.contentEditable==="true")&&(Zs=A,rf=c,Ro=null);break;case"focusout":Ro=rf=Zs=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Jm(d,n,u);break;case"selectionchange":if(TR)break;case"keydown":case"keyup":Jm(d,n,u)}var R;if(Qh)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Js?zv(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Kv&&n.locale!=="ko"&&(Js||C!=="onCompositionStart"?C==="onCompositionEnd"&&Js&&(R=Hv()):(Pr=u,Yh="value"in Pr?Pr.value:Pr.textContent,Js=!0)),A=Wl(c,C),0<A.length&&(C=new Vm(C,t,null,n,u),d.push({event:C,listeners:A}),R?C.data=R:(R=Wv(n),R!==null&&(C.data=R)))),(R=uR?dR(t,n):fR(t,n))&&(c=Wl(c,"onBeforeInput"),0<c.length&&(u=new Vm("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=R))}ix(d,e)})}function jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Oo(t,n),i!=null&&r.unshift(jo(t,i,s)),i=Oo(t,e),i!=null&&r.push(jo(t,i,s))),t=t.return}return r}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Oo(n,i),l!=null&&o.unshift(jo(n,l,a))):s||(l=Oo(n,i),l!=null&&o.push(jo(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function ng(t){return(typeof t=="string"?t:""+t).replace(AR,`
`).replace(CR,"")}function Ma(t,e,n){if(e=ng(e),ng(t)!==e&&n)throw Error(W(425))}function Yl(){}var of=null,af=null;function lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cf=typeof setTimeout=="function"?setTimeout:void 0,LR=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,IR=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(t){return rg.resolve(null).then(t).catch(kR)}:cf;function kR(t){setTimeout(function(){throw t})}function Uu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mo(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),Un="__reactFiber$"+Wi,Go="__reactProps$"+Wi,or="__reactContainer$"+Wi,uf="__reactEvents$"+Wi,DR="__reactListeners$"+Wi,PR="__reactHandles$"+Wi;function ls(t){var e=t[Un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sg(t);t!==null;){if(n=t[Un])return n;t=sg(t)}return e}t=n,n=t.parentNode}return null}function pa(t){return t=t[Un]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Bc(t){return t[Go]||null}var df=[],ni=-1;function Qr(t){return{current:t}}function Oe(t){0>ni||(t.current=df[ni],df[ni]=null,ni--)}function ke(t,e){ni++,df[ni]=t.current,t.current=e}var Kr={},mt=Qr(Kr),kt=Qr(!1),Rs=Kr;function Oi(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function ql(){Oe(kt),Oe(mt)}function ig(t,e,n){if(mt.current!==Kr)throw Error(W(168));ke(mt,e),ke(kt,n)}function ax(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,gb(t)||"Unknown",s));return $e({},n,r)}function Xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,Rs=mt.current,ke(mt,t),ke(kt,kt.current),!0}function og(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=ax(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,Oe(kt),Oe(mt),ke(mt,t)):Oe(kt),ke(kt,n)}var tr=null,$c=!1,Bu=!1;function lx(t){tr===null?tr=[t]:tr.push(t)}function _R(t){$c=!0,lx(t)}function Jr(){if(!Bu&&tr!==null){Bu=!0;var t=0,e=Re;try{var n=tr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}tr=null,$c=!1}catch(s){throw tr!==null&&(tr=tr.slice(t+1)),_v(Hh,Jr),s}finally{Re=e,Bu=!1}}return null}var ri=[],si=0,Ql=null,Jl=0,Jt=[],Zt=0,As=null,nr=1,rr="";function ss(t,e){ri[si++]=Jl,ri[si++]=Ql,Ql=t,Jl=e}function cx(t,e,n){Jt[Zt++]=nr,Jt[Zt++]=rr,Jt[Zt++]=As,As=t;var r=nr;t=rr;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,nr=1<<32-yn(e)+s|n<<s|r,rr=i+t}else nr=1<<i|n<<s|r,rr=t}function Zh(t){t.return!==null&&(ss(t,1),cx(t,1,0))}function ep(t){for(;t===Ql;)Ql=ri[--si],ri[si]=null,Jl=ri[--si],ri[si]=null;for(;t===As;)As=Jt[--Zt],Jt[Zt]=null,rr=Jt[--Zt],Jt[Zt]=null,nr=Jt[--Zt],Jt[Zt]=null}var $t=null,Bt=null,Ne=!1,hn=null;function ux(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Bt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:nr,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Bt=null,!0):!1;default:return!1}}function ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hf(t){if(Ne){var e=Bt;if(e){var n=e;if(!ag(t,e)){if(ff(t))throw Error(W(418));e=Ur(n.nextSibling);var r=$t;e&&ag(t,e)?ux(r,n):(t.flags=t.flags&-4097|2,Ne=!1,$t=t)}}else{if(ff(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ne=!1,$t=t}}}function lg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Ua(t){if(t!==$t)return!1;if(!Ne)return lg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lf(t.type,t.memoizedProps)),e&&(e=Bt)){if(ff(t))throw dx(),Error(W(418));for(;e;)ux(t,e),e=Ur(e.nextSibling)}if(lg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=$t?Ur(t.stateNode.nextSibling):null;return!0}function dx(){for(var t=Bt;t;)t=Ur(t.nextSibling)}function Ni(){Bt=$t=null,Ne=!1}function tp(t){hn===null?hn=[t]:hn.push(t)}var OR=dr.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Ba(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cg(t){var e=t._init;return e(t._payload)}function fx(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=Gr(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=zu(x,y.mode,b),v.return=y,v):(v=s(v,x),v.return=y,v)}function l(y,v,x,b){var T=x.type;return T===Qs?u(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Er&&cg(T)===v.type)?(b=s(v,x.props),b.ref=oo(y,v,x),b.return=y,b):(b=wl(x.type,x.key,x.props,null,y.mode,b),b.ref=oo(y,v,x),b.return=y,b)}function c(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Wu(x,y.mode,b),v.return=y,v):(v=s(v,x.children||[]),v.return=y,v)}function u(y,v,x,b,T){return v===null||v.tag!==7?(v=Ss(x,y.mode,b,T),v.return=y,v):(v=s(v,x),v.return=y,v)}function d(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zu(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case La:return x=wl(v.type,v.key,v.props,null,y.mode,x),x.ref=oo(y,null,v),x.return=y,x;case Xs:return v=Wu(v,y.mode,x),v.return=y,v;case Er:var b=v._init;return d(y,b(v._payload),x)}if(mo(v)||to(v))return v=Ss(v,y.mode,x,null),v.return=y,v;Ba(y,v)}return null}function f(y,v,x,b){var T=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case La:return x.key===T?l(y,v,x,b):null;case Xs:return x.key===T?c(y,v,x,b):null;case Er:return T=x._init,f(y,v,T(x._payload),b)}if(mo(x)||to(x))return T!==null?null:u(y,v,x,b,null);Ba(y,x)}return null}function m(y,v,x,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case La:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,T);case Xs:return y=y.get(b.key===null?x:b.key)||null,c(v,y,b,T);case Er:var A=b._init;return m(y,v,x,A(b._payload),T)}if(mo(b)||to(b))return y=y.get(x)||null,u(v,y,b,T,null);Ba(v,b)}return null}function p(y,v,x,b){for(var T=null,A=null,R=v,C=v=0,k=null;R!==null&&C<x.length;C++){R.index>C?(k=R,R=null):k=R.sibling;var L=f(y,R,x[C],b);if(L===null){R===null&&(R=k);break}t&&R&&L.alternate===null&&e(y,R),v=i(L,v,C),A===null?T=L:A.sibling=L,A=L,R=k}if(C===x.length)return n(y,R),Ne&&ss(y,C),T;if(R===null){for(;C<x.length;C++)R=d(y,x[C],b),R!==null&&(v=i(R,v,C),A===null?T=R:A.sibling=R,A=R);return Ne&&ss(y,C),T}for(R=r(y,R);C<x.length;C++)k=m(R,y,C,x[C],b),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?C:k.key),v=i(k,v,C),A===null?T=k:A.sibling=k,A=k);return t&&R.forEach(function(_){return e(y,_)}),Ne&&ss(y,C),T}function h(y,v,x,b){var T=to(x);if(typeof T!="function")throw Error(W(150));if(x=T.call(x),x==null)throw Error(W(151));for(var A=T=null,R=v,C=v=0,k=null,L=x.next();R!==null&&!L.done;C++,L=x.next()){R.index>C?(k=R,R=null):k=R.sibling;var _=f(y,R,L.value,b);if(_===null){R===null&&(R=k);break}t&&R&&_.alternate===null&&e(y,R),v=i(_,v,C),A===null?T=_:A.sibling=_,A=_,R=k}if(L.done)return n(y,R),Ne&&ss(y,C),T;if(R===null){for(;!L.done;C++,L=x.next())L=d(y,L.value,b),L!==null&&(v=i(L,v,C),A===null?T=L:A.sibling=L,A=L);return Ne&&ss(y,C),T}for(R=r(y,R);!L.done;C++,L=x.next())L=m(R,y,C,L.value,b),L!==null&&(t&&L.alternate!==null&&R.delete(L.key===null?C:L.key),v=i(L,v,C),A===null?T=L:A.sibling=L,A=L);return t&&R.forEach(function($){return e(y,$)}),Ne&&ss(y,C),T}function g(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Qs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case La:e:{for(var T=x.key,A=v;A!==null;){if(A.key===T){if(T=x.type,T===Qs){if(A.tag===7){n(y,A.sibling),v=s(A,x.props.children),v.return=y,y=v;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Er&&cg(T)===A.type){n(y,A.sibling),v=s(A,x.props),v.ref=oo(y,A,x),v.return=y,y=v;break e}n(y,A);break}else e(y,A);A=A.sibling}x.type===Qs?(v=Ss(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=wl(x.type,x.key,x.props,null,y.mode,b),b.ref=oo(y,v,x),b.return=y,y=b)}return o(y);case Xs:e:{for(A=x.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=s(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Wu(x,y.mode,b),v.return=y,y=v}return o(y);case Er:return A=x._init,g(y,v,A(x._payload),b)}if(mo(x))return p(y,v,x,b);if(to(x))return h(y,v,x,b);Ba(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,x),v.return=y,y=v):(n(y,v),v=zu(x,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var Fi=fx(!0),hx=fx(!1),Zl=Qr(null),ec=null,ii=null,np=null;function rp(){np=ii=ec=null}function sp(t){var e=Zl.current;Oe(Zl),t._currentValue=e}function pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hi(t,e){ec=t,np=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(np!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(ec===null)throw Error(W(308));ii=t,ec.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var cs=null;function ip(t){cs===null?cs=[t]:cs.push(t)}function px(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ip(e)):(n.next=s.next,s.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ar(t,n)}return s=r.interleaved,s===null?(e.next=e,ip(r)):(e.next=s.next,s.next=e),r.interleaved=e,ar(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kh(t,n)}}function ug(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tc(t,e,n,r){var s=t.updateQueue;Sr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,h=a;switch(f=e,m=n,h.tag){case 1:if(p=h.payload,typeof p=="function"){d=p.call(m,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=h.payload,f=typeof p=="function"?p.call(m,d,f):p,f==null)break e;d=$e({},d,f);break e;case 2:Sr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ls|=o,t.lanes=o,t.memoizedState=d}}function dg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var ma={},Vn=Qr(ma),Vo=Qr(ma),Ho=Qr(ma);function us(t){if(t===ma)throw Error(W(174));return t}function ap(t,e){switch(ke(Ho,e),ke(Vo,t),ke(Vn,ma),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wd(e,t)}Oe(Vn),ke(Vn,e)}function Mi(){Oe(Vn),Oe(Vo),Oe(Ho)}function gx(t){us(Ho.current);var e=us(Vn.current),n=Wd(e,t.type);e!==n&&(ke(Vo,t),ke(Vn,n))}function lp(t){Vo.current===t&&(Oe(Vn),Oe(Vo))}var Me=Qr(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $u=[];function cp(){for(var t=0;t<$u.length;t++)$u[t]._workInProgressVersionPrimary=null;$u.length=0}var vl=dr.ReactCurrentDispatcher,ju=dr.ReactCurrentBatchConfig,Cs=0,Ue=null,Xe=null,Ze=null,rc=!1,Ao=!1,Ko=0,NR=0;function ct(){throw Error(W(321))}function up(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function dp(t,e,n,r,s,i){if(Cs=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?BR:$R,t=n(r,s),Ao){i=0;do{if(Ao=!1,Ko=0,25<=i)throw Error(W(301));i+=1,Ze=Xe=null,e.updateQueue=null,vl.current=jR,t=n(r,s)}while(Ao)}if(vl.current=sc,e=Xe!==null&&Xe.next!==null,Cs=0,Ze=Xe=Ue=null,rc=!1,e)throw Error(W(300));return t}function fp(){var t=Ko!==0;return Ko=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Ue.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function rn(){if(Xe===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=Ze===null?Ue.memoizedState:Ze.next;if(e!==null)Ze=e,Xe=t;else{if(t===null)throw Error(W(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ze===null?Ue.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function zo(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=rn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Cs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ue.lanes|=u,Ls|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,xn(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,Ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vu(t){var e=rn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xn(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yx(){}function vx(t,e){var n=Ue,r=rn(),s=e(),i=!xn(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,hp(Sx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Wo(9,Ex.bind(null,n,r,s,e),void 0,null),tt===null)throw Error(W(349));Cs&30||xx(n,e,s)}return s}function xx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ex(t,e,n,r){e.value=n,e.getSnapshot=r,Tx(e)&&wx(t)}function Sx(t,e,n){return n(function(){Tx(e)&&wx(t)})}function Tx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function wx(t){var e=ar(t,1);e!==null&&vn(e,t,1,-1)}function fg(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},e.queue=t,t=t.dispatch=UR.bind(null,Ue,t),[e.memoizedState,t]}function Wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bx(){return rn().memoizedState}function xl(t,e,n,r){var s=In();Ue.flags|=t,s.memoizedState=Wo(1|e,n,void 0,r===void 0?null:r)}function jc(t,e,n,r){var s=rn();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&up(r,o.deps)){s.memoizedState=Wo(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=Wo(1|e,n,i,r)}function hg(t,e){return xl(8390656,8,t,e)}function hp(t,e){return jc(2048,8,t,e)}function Rx(t,e){return jc(4,2,t,e)}function Ax(t,e){return jc(4,4,t,e)}function Cx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lx(t,e,n){return n=n!=null?n.concat([t]):null,jc(4,4,Cx.bind(null,e,t),n)}function pp(){}function Ix(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&up(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kx(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&up(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dx(t,e,n){return Cs&21?(xn(n,e)||(n=Fv(),Ue.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function FR(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=ju.transition;ju.transition={};try{t(!1),e()}finally{Re=n,ju.transition=r}}function Px(){return rn().memoizedState}function MR(t,e,n){var r=jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_x(t))Ox(e,n);else if(n=px(t,e,n,r),n!==null){var s=Tt();vn(n,t,r,s),Nx(n,e,r)}}function UR(t,e,n){var r=jr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_x(t))Ox(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xn(a,o)){var l=e.interleaved;l===null?(s.next=s,ip(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=px(t,e,s,r),n!==null&&(s=Tt(),vn(n,t,r,s),Nx(n,e,r))}}function _x(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function Ox(t,e){Ao=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kh(t,n)}}var sc={readContext:nn,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},BR={readContext:nn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xl(4194308,4,Cx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return xl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MR.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:fg,useDebugValue:pp,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=fg(!1),e=t[0];return t=FR.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=In();if(Ne){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),tt===null)throw Error(W(349));Cs&30||xx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hg(Sx.bind(null,r,i,t),[t]),r.flags|=2048,Wo(9,Ex.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=tt.identifierPrefix;if(Ne){var n=rr,r=nr;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ko++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$R={readContext:nn,useCallback:Ix,useContext:nn,useEffect:hp,useImperativeHandle:Lx,useInsertionEffect:Rx,useLayoutEffect:Ax,useMemo:kx,useReducer:Gu,useRef:bx,useState:function(){return Gu(zo)},useDebugValue:pp,useDeferredValue:function(t){var e=rn();return Dx(e,Xe.memoizedState,t)},useTransition:function(){var t=Gu(zo)[0],e=rn().memoizedState;return[t,e]},useMutableSource:yx,useSyncExternalStore:vx,useId:Px,unstable_isNewReconciler:!1},jR={readContext:nn,useCallback:Ix,useContext:nn,useEffect:hp,useImperativeHandle:Lx,useInsertionEffect:Rx,useLayoutEffect:Ax,useMemo:kx,useReducer:Vu,useRef:bx,useState:function(){return Vu(zo)},useDebugValue:pp,useDeferredValue:function(t){var e=rn();return Xe===null?e.memoizedState=t:Dx(e,Xe.memoizedState,t)},useTransition:function(){var t=Vu(zo)[0],e=rn().memoizedState;return[t,e]},useMutableSource:yx,useSyncExternalStore:vx,useId:Px,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gc={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=jr(t),i=sr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Br(t,i,s),e!==null&&(vn(e,t,s,r),yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=jr(t),i=sr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Br(t,i,s),e!==null&&(vn(e,t,s,r),yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=jr(t),s=sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Br(t,s,r),e!==null&&(vn(e,t,r,n),yl(e,t,r))}};function pg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bo(n,r)||!Bo(s,i):!0}function Fx(t,e,n){var r=!1,s=Kr,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(s=Dt(e)?Rs:mt.current,r=e.contextTypes,i=(r=r!=null)?Oi(t,s):Kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gc.enqueueReplaceState(e,e.state,null)}function gf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},op(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nn(i):(i=Dt(e)?Rs:mt.current,s.context=Oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gc.enqueueReplaceState(s,s.state,null),tc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e){try{var n="",r=e;do n+=mb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GR=typeof WeakMap=="function"?WeakMap:Map;function Mx(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oc||(oc=!0,Cf=r),yf(t,e)},n}function Ux(t,e,n){n=sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yf(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nA.bind(null,t,e,n),e.then(t,t))}function yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,Br(n,e,1))),n.lanes|=1),t)}var VR=dr.ReactCurrentOwner,It=!1;function St(t,e,n,r){e.child=t===null?hx(e,null,n,r):Fi(e,t.child,n,r)}function xg(t,e,n,r,s){n=n.render;var i=e.ref;return hi(e,s),r=dp(t,e,n,r,i,s),n=fp(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(Ne&&n&&Zh(e),e.flags|=1,St(t,e,r,s),e.child)}function Eg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Bx(t,e,i,r,s)):(t=wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Bo,n(o,r)&&t.ref===e.ref)return lr(t,e,s)}return e.flags|=1,t=Gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Bx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Bo(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,lr(t,e,s)}return vf(t,e,n,r,s)}function $x(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(ai,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(ai,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(ai,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(ai,Mt),Mt|=r;return St(t,e,s,n),e.child}function jx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vf(t,e,n,r,s){var i=Dt(n)?Rs:mt.current;return i=Oi(e,i),hi(e,s),n=dp(t,e,n,r,i,s),r=fp(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(Ne&&r&&Zh(e),e.flags|=1,St(t,e,n,s),e.child)}function Sg(t,e,n,r,s){if(Dt(n)){var i=!0;Xl(e)}else i=!1;if(hi(e,s),e.stateNode===null)El(t,e),Fx(e,n,r),gf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nn(c):(c=Dt(n)?Rs:mt.current,c=Oi(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&mg(e,o,r,c),Sr=!1;var f=e.memoizedState;o.state=f,tc(e,r,o,s),l=e.memoizedState,a!==r||f!==l||kt.current||Sr?(typeof u=="function"&&(mf(e,n,u,r),l=e.memoizedState),(a=Sr||pg(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:un(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Dt(n)?Rs:mt.current,l=Oi(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&mg(e,o,r,l),Sr=!1,f=e.memoizedState,o.state=f,tc(e,r,o,s);var p=e.memoizedState;a!==d||f!==p||kt.current||Sr?(typeof m=="function"&&(mf(e,n,m,r),p=e.memoizedState),(c=Sr||pg(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return xf(t,e,n,r,i,s)}function xf(t,e,n,r,s,i){jx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&og(e,n,!1),lr(t,e,i);r=e.stateNode,VR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fi(e,t.child,null,i),e.child=Fi(e,null,a,i)):St(t,e,a,i),e.memoizedState=r.state,s&&og(e,n,!0),e.child}function Gx(t){var e=t.stateNode;e.pendingContext?ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ig(t,e.context,!1),ap(t,e.containerInfo)}function Tg(t,e,n,r,s){return Ni(),tp(s),e.flags|=256,St(t,e,n,r),e.child}var Ef={dehydrated:null,treeContext:null,retryLane:0};function Sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vx(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Me,s&1),t===null)return hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kc(o,r,0,null),t=Ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sf(n),e.memoizedState=Ef,t):mp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return HR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Gr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Gr(a,i):(i=Ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ef,r}return i=t.child,t=i.sibling,r=Gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mp(t,e){return e=Kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $a(t,e,n,r){return r!==null&&tp(r),Fi(e,t.child,null,n),t=mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hu(Error(W(422))),$a(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kc({mode:"visible",children:r.children},s,0,null),i=Ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fi(e,t.child,null,o),e.child.memoizedState=Sf(o),e.memoizedState=Ef,i);if(!(e.mode&1))return $a(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=Hu(i,r,void 0),$a(t,e,o,r)}if(a=(o&t.childLanes)!==0,It||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ar(t,s),vn(r,t,s,-1))}return Sp(),r=Hu(Error(W(421))),$a(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Ur(s.nextSibling),$t=e,Ne=!0,hn=null,t!==null&&(Jt[Zt++]=nr,Jt[Zt++]=rr,Jt[Zt++]=As,nr=t.id,rr=t.overflow,As=e),e=mp(e,r.children),e.flags|=4096,e)}function wg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pf(t.return,e,n)}function Ku(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Hx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wg(t,n,e);else if(t.tag===19)wg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ku(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ku(e,!0,n,null,i);break;case"together":Ku(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function El(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KR(t,e,n){switch(e.tag){case 3:Gx(e),Ni();break;case 5:gx(e);break;case 1:Dt(e.type)&&Xl(e);break;case 4:ap(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(Zl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Vx(t,e,n):(ke(Me,Me.current&1),t=lr(t,e,n),t!==null?t.sibling:null);ke(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,$x(t,e,n)}return lr(t,e,n)}var Kx,Tf,zx,Wx;Kx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tf=function(){};zx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,us(Vn.current);var i=null;switch(n){case"input":s=Vd(t,s),r=Vd(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=zd(t,s),r=zd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yl)}Yd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Po.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Po.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_e("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Wx=function(t,e,n,r){n!==r&&(e.flags|=4)};function ao(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zR(t,e,n){var r=e.pendingProps;switch(ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Dt(e.type)&&ql(),ut(e),null;case 3:return r=e.stateNode,Mi(),Oe(kt),Oe(mt),cp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(kf(hn),hn=null))),Tf(t,e),ut(e),null;case 5:lp(e);var s=us(Ho.current);if(n=e.type,t!==null&&e.stateNode!=null)zx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return ut(e),null}if(t=us(Vn.current),Ua(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Un]=e,r[Go]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<yo.length;s++)_e(yo[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Pm(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Om(r,i),_e("invalid",r)}Yd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,a,t),s=["children",""+a]):Po.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ia(r),_m(r,i,!0);break;case"textarea":Ia(r),Nm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Un]=e,t[Go]=r,Kx(t,e,!1,!1),e.stateNode=t;e:{switch(o=qd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<yo.length;s++)_e(yo[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Pm(t,r),s=Vd(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Om(t,r),s=zd(t,r),_e("invalid",t);break;default:s=r}Yd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?bv(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_o(t,l):typeof l=="number"&&_o(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Po.hasOwnProperty(i)?l!=null&&i==="onScroll"&&_e("scroll",t):l!=null&&Bh(t,i,l,o))}switch(n){case"input":Ia(t),_m(t,r,!1);break;case"textarea":Ia(t),Nm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ci(t,!!r.multiple,i,!1):r.defaultValue!=null&&ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)Wx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=us(Ho.current),us(Vn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[Un]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Ma(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=e,e.stateNode=r}return ut(e),null;case 13:if(Oe(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Bt!==null&&e.mode&1&&!(e.flags&128))dx(),Ni(),e.flags|=98560,i=!1;else if(i=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Un]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else hn!==null&&(kf(hn),hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Qe===0&&(Qe=3):Sp())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Mi(),Tf(t,e),t===null&&$o(e.stateNode.containerInfo),ut(e),null;case 10:return sp(e.type._context),ut(e),null;case 17:return Dt(e.type)&&ql(),ut(e),null;case 19:if(Oe(Me),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ao(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,ao(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&He()>Bi&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304)}else{if(!r)if(t=nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return ut(e),null}else 2*He()-i.renderingStartTime>Bi&&n!==1073741824&&(e.flags|=128,r=!0,ao(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=He(),e.sibling=null,n=Me.current,ke(Me,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Ep(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function WR(t,e){switch(ep(e),e.tag){case 1:return Dt(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),Oe(kt),Oe(mt),cp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lp(e),null;case 13:if(Oe(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Me),null;case 4:return Mi(),null;case 10:return sp(e.type._context),null;case 22:case 23:return Ep(),null;case 24:return null;default:return null}}var ja=!1,ht=!1,YR=typeof WeakSet=="function"?WeakSet:Set,J=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function wf(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var bg=!1;function qR(t,e){if(of=Kl,t=Jv(),Jh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(af={focusedElem:t,selectionRange:n},Kl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var h=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?h:un(e.type,h),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){Ge(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return p=bg,bg=!1,p}function Co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&wf(e,n,i)}s=s.next}while(s!==r)}}function Vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yx(t){var e=t.alternate;e!==null&&(t.alternate=null,Yx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Un],delete e[Go],delete e[uf],delete e[DR],delete e[PR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qx(t){return t.tag===5||t.tag===3||t.tag===4}function Rg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}function Af(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Af(t,e,n),t=t.sibling;t!==null;)Af(t,e,n),t=t.sibling}var st=null,fn=!1;function pr(t,e,n){for(n=n.child;n!==null;)Xx(t,e,n),n=n.sibling}function Xx(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:ht||oi(n,e);case 6:var r=st,s=fn;st=null,pr(t,e,n),st=r,fn=s,st!==null&&(fn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(fn?(t=st,n=n.stateNode,t.nodeType===8?Uu(t.parentNode,n):t.nodeType===1&&Uu(t,n),Mo(t)):Uu(st,n.stateNode));break;case 4:r=st,s=fn,st=n.stateNode.containerInfo,fn=!0,pr(t,e,n),st=r,fn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wf(n,e,o),s=s.next}while(s!==r)}pr(t,e,n);break;case 1:if(!ht&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,pr(t,e,n),ht=r):pr(t,e,n);break;default:pr(t,e,n)}}function Ag(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YR),e.forEach(function(r){var s=sA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,fn=!1;break e;case 3:st=a.stateNode.containerInfo,fn=!0;break e;case 4:st=a.stateNode.containerInfo,fn=!0;break e}a=a.return}if(st===null)throw Error(W(160));Xx(i,o,s),st=null,fn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ge(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qx(e,t),e=e.sibling}function Qx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),Rn(t),r&4){try{Co(3,t,t.return),Vc(3,t)}catch(h){Ge(t,t.return,h)}try{Co(5,t,t.return)}catch(h){Ge(t,t.return,h)}}break;case 1:on(e,t),Rn(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(on(e,t),Rn(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var s=t.stateNode;try{_o(s,"")}catch(h){Ge(t,t.return,h)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&xv(s,i),qd(a,o);var c=qd(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?bv(s,d):u==="dangerouslySetInnerHTML"?Tv(s,d):u==="children"?_o(s,d):Bh(s,u,d,c)}switch(a){case"input":Hd(s,i);break;case"textarea":Ev(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ci(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?ci(s,!!i.multiple,i.defaultValue,!0):ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[Go]=i}catch(h){Ge(t,t.return,h)}}break;case 6:if(on(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(h){Ge(t,t.return,h)}}break;case 3:if(on(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(h){Ge(t,t.return,h)}break;case 4:on(e,t),Rn(t);break;case 13:on(e,t),Rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vp=He())),r&4&&Ag(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(c=ht)||u,on(e,t),ht=c):on(e,t),Rn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(J=t,u=t.child;u!==null;){for(d=J=u;J!==null;){switch(f=J,m=f.child,f.tag){case 0:case 11:case 14:case 15:Co(4,f,f.return);break;case 1:oi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(h){Ge(r,n,h)}}break;case 5:oi(f,f.return);break;case 22:if(f.memoizedState!==null){Lg(d);continue}}m!==null?(m.return=f,J=m):Lg(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wv("display",o))}catch(h){Ge(t,t.return,h)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(h){Ge(t,t.return,h)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),Rn(t),r&4&&Ag(t);break;case 21:break;default:on(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qx(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_o(s,""),r.flags&=-33);var i=Rg(t);Af(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rg(t);Rf(t,a,o);break;default:throw Error(W(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XR(t,e,n){J=t,Jx(t)}function Jx(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ja;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ht;a=ja;var c=ht;if(ja=o,(ht=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?Ig(s):l!==null?(l.return=o,J=l):Ig(s);for(;i!==null;)J=i,Jx(i),i=i.sibling;J=s,ja=a,ht=c}Cg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):Cg(t)}}function Cg(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Mo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}ht||e.flags&512&&bf(e)}catch(f){Ge(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Lg(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Ig(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vc(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ge(e,s,l)}}var i=e.return;try{bf(e)}catch(l){Ge(e,i,l)}break;case 5:var o=e.return;try{bf(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var QR=Math.ceil,ic=dr.ReactCurrentDispatcher,gp=dr.ReactCurrentOwner,tn=dr.ReactCurrentBatchConfig,ve=0,tt=null,Ke=null,at=0,Mt=0,ai=Qr(0),Qe=0,Yo=null,Ls=0,Hc=0,yp=0,Lo=null,Ct=null,vp=0,Bi=1/0,Jn=null,oc=!1,Cf=null,$r=null,Ga=!1,_r=null,ac=0,Io=0,Lf=null,Sl=-1,Tl=0;function Tt(){return ve&6?He():Sl!==-1?Sl:Sl=He()}function jr(t){return t.mode&1?ve&2&&at!==0?at&-at:OR.transition!==null?(Tl===0&&(Tl=Fv()),Tl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Vv(t.type)),t):1}function vn(t,e,n,r){if(50<Io)throw Io=0,Lf=null,Error(W(185));fa(t,n,r),(!(ve&2)||t!==tt)&&(t===tt&&(!(ve&2)&&(Hc|=n),Qe===4&&br(t,at)),Pt(t,r),n===1&&ve===0&&!(e.mode&1)&&(Bi=He()+500,$c&&Jr()))}function Pt(t,e){var n=t.callbackNode;Ob(t,e);var r=Hl(t,t===tt?at:0);if(r===0)n!==null&&Um(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Um(n),e===1)t.tag===0?_R(kg.bind(null,t)):lx(kg.bind(null,t)),IR(function(){!(ve&6)&&Jr()}),n=null;else{switch(Mv(r)){case 1:n=Hh;break;case 4:n=Ov;break;case 16:n=Vl;break;case 536870912:n=Nv;break;default:n=Vl}n=oE(n,Zx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zx(t,e){if(Sl=-1,Tl=0,ve&6)throw Error(W(327));var n=t.callbackNode;if(pi()&&t.callbackNode!==n)return null;var r=Hl(t,t===tt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lc(t,r);else{e=r;var s=ve;ve|=2;var i=tE();(tt!==t||at!==e)&&(Jn=null,Bi=He()+500,Es(t,e));do try{eA();break}catch(a){eE(t,a)}while(!0);rp(),ic.current=i,ve=s,Ke!==null?e=0:(tt=null,at=0,e=Qe)}if(e!==0){if(e===2&&(s=ef(t),s!==0&&(r=s,e=If(t,s))),e===1)throw n=Yo,Es(t,0),br(t,r),Pt(t,He()),n;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!JR(s)&&(e=lc(t,r),e===2&&(i=ef(t),i!==0&&(r=i,e=If(t,i))),e===1))throw n=Yo,Es(t,0),br(t,r),Pt(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:is(t,Ct,Jn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=vp+500-He(),10<e)){if(Hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cf(is.bind(null,t,Ct,Jn),e);break}is(t,Ct,Jn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QR(r/1960))-r,10<r){t.timeoutHandle=cf(is.bind(null,t,Ct,Jn),r);break}is(t,Ct,Jn);break;case 5:is(t,Ct,Jn);break;default:throw Error(W(329))}}}return Pt(t,He()),t.callbackNode===n?Zx.bind(null,t):null}function If(t,e){var n=Lo;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=lc(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&kf(e)),t}function kf(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function JR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~yp,e&=~Hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function kg(t){if(ve&6)throw Error(W(327));pi();var e=Hl(t,0);if(!(e&1))return Pt(t,He()),null;var n=lc(t,e);if(t.tag!==0&&n===2){var r=ef(t);r!==0&&(e=r,n=If(t,r))}if(n===1)throw n=Yo,Es(t,0),br(t,e),Pt(t,He()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,Ct,Jn),Pt(t,He()),null}function xp(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Bi=He()+500,$c&&Jr())}}function Is(t){_r!==null&&_r.tag===0&&!(ve&6)&&pi();var e=ve;ve|=1;var n=tn.transition,r=Re;try{if(tn.transition=null,Re=1,t)return t()}finally{Re=r,tn.transition=n,ve=e,!(ve&6)&&Jr()}}function Ep(){Mt=ai.current,Oe(ai)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LR(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ql();break;case 3:Mi(),Oe(kt),Oe(mt),cp();break;case 5:lp(r);break;case 4:Mi();break;case 13:Oe(Me);break;case 19:Oe(Me);break;case 10:sp(r.type._context);break;case 22:case 23:Ep()}n=n.return}if(tt=t,Ke=t=Gr(t.current,null),at=Mt=e,Qe=0,Yo=null,yp=Hc=Ls=0,Ct=Lo=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cs=null}return t}function eE(t,e){do{var n=Ke;try{if(rp(),vl.current=sc,rc){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rc=!1}if(Cs=0,Ze=Xe=Ue=null,Ao=!1,Ko=0,gp.current=null,n===null||n.return===null){Qe=1,Yo=e,Ke=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=yg(o);if(m!==null){m.flags&=-257,vg(m,o,a,i,e),m.mode&1&&gg(i,c,e),e=m,l=c;var p=e.updateQueue;if(p===null){var h=new Set;h.add(l),e.updateQueue=h}else p.add(l);break e}else{if(!(e&1)){gg(i,c,e),Sp();break e}l=Error(W(426))}}else if(Ne&&a.mode&1){var g=yg(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),vg(g,o,a,i,e),tp(Ui(l,a));break e}}i=l=Ui(l,a),Qe!==4&&(Qe=2),Lo===null?Lo=[i]:Lo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Mx(i,l,e);ug(i,y);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($r===null||!$r.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Ux(i,a,e);ug(i,b);break e}}i=i.return}while(i!==null)}rE(n)}catch(T){e=T,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function tE(){var t=ic.current;return ic.current=sc,t===null?sc:t}function Sp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Ls&268435455)&&!(Hc&268435455)||br(tt,at)}function lc(t,e){var n=ve;ve|=2;var r=tE();(tt!==t||at!==e)&&(Jn=null,Es(t,e));do try{ZR();break}catch(s){eE(t,s)}while(!0);if(rp(),ve=n,ic.current=r,Ke!==null)throw Error(W(261));return tt=null,at=0,Qe}function ZR(){for(;Ke!==null;)nE(Ke)}function eA(){for(;Ke!==null&&!Rb();)nE(Ke)}function nE(t){var e=iE(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?rE(t):Ke=e,gp.current=null}function rE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WR(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,Ke=null;return}}else if(n=zR(n,e,Mt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Qe===0&&(Qe=5)}function is(t,e,n){var r=Re,s=tn.transition;try{tn.transition=null,Re=1,tA(t,e,n,r)}finally{tn.transition=s,Re=r}return null}function tA(t,e,n,r){do pi();while(_r!==null);if(ve&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Nb(t,i),t===tt&&(Ke=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,oE(Vl,function(){return pi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=Re;Re=1;var a=ve;ve|=4,gp.current=null,qR(t,n),Qx(n,t),SR(af),Kl=!!of,af=of=null,t.current=n,XR(n),Ab(),ve=a,Re=o,tn.transition=i}else t.current=n;if(Ga&&(Ga=!1,_r=t,ac=s),i=t.pendingLanes,i===0&&($r=null),Ib(n.stateNode),Pt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(oc)throw oc=!1,t=Cf,Cf=null,t;return ac&1&&t.tag!==0&&pi(),i=t.pendingLanes,i&1?t===Lf?Io++:(Io=0,Lf=t):Io=0,Jr(),null}function pi(){if(_r!==null){var t=Mv(ac),e=tn.transition,n=Re;try{if(tn.transition=null,Re=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,ac=0,ve&6)throw Error(W(331));var s=ve;for(ve|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:Co(8,u,i)}var d=u.child;if(d!==null)d.return=u,J=d;else for(;J!==null;){u=J;var f=u.sibling,m=u.return;if(Yx(u),u===c){J=null;break}if(f!==null){f.return=m,J=f;break}J=m}}}var p=i.alternate;if(p!==null){var h=p.child;if(h!==null){p.child=null;do{var g=h.sibling;h.sibling=null,h=g}while(h!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Co(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,J=y;break e}J=i.return}}var v=t.current;for(J=v;J!==null;){o=J;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,J=x;else e:for(o=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vc(9,a)}}catch(T){Ge(a,a.return,T)}if(a===o){J=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,J=b;break e}J=a.return}}if(ve=s,Jr(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{Re=n,tn.transition=e}}return!1}function Dg(t,e,n){e=Ui(n,e),e=Mx(t,e,1),t=Br(t,e,1),e=Tt(),t!==null&&(fa(t,1,e),Pt(t,e))}function Ge(t,e,n){if(t.tag===3)Dg(t,t,n);else for(;e!==null;){if(e.tag===3){Dg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Ui(n,t),t=Ux(e,t,1),e=Br(e,t,1),t=Tt(),e!==null&&(fa(e,1,t),Pt(e,t));break}}e=e.return}}function nA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Qe===4||Qe===3&&(at&130023424)===at&&500>He()-vp?Es(t,0):yp|=n),Pt(t,e)}function sE(t,e){e===0&&(t.mode&1?(e=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):e=1);var n=Tt();t=ar(t,e),t!==null&&(fa(t,e,n),Pt(t,n))}function rA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sE(t,n)}function sA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),sE(t,n)}var iE;iE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,KR(t,e,n);It=!!(t.flags&131072)}else It=!1,Ne&&e.flags&1048576&&cx(e,Jl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;El(t,e),t=e.pendingProps;var s=Oi(e,mt.current);hi(e,n),s=dp(null,e,r,t,s,n);var i=fp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,Xl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,op(e),s.updater=Gc,e.stateNode=s,s._reactInternals=e,gf(e,r,t,n),e=xf(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Zh(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(El(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oA(r),t=un(r,t),s){case 0:e=vf(null,e,r,t,n);break e;case 1:e=Sg(null,e,r,t,n);break e;case 11:e=xg(null,e,r,t,n);break e;case 14:e=Eg(null,e,r,un(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),vf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Sg(t,e,r,s,n);case 3:e:{if(Gx(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mx(t,e),tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ui(Error(W(423)),e),e=Tg(t,e,r,n,s);break e}else if(r!==s){s=Ui(Error(W(424)),e),e=Tg(t,e,r,n,s);break e}else for(Bt=Ur(e.stateNode.containerInfo.firstChild),$t=e,Ne=!0,hn=null,n=hx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){e=lr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return gx(e),t===null&&hf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lf(r,s)?o=null:i!==null&&lf(r,i)&&(e.flags|=32),jx(t,e),St(t,e,o,n),e.child;case 6:return t===null&&hf(e),null;case 13:return Vx(t,e,n);case 4:return ap(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),xg(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(Zl,r._currentValue),r._currentValue=o,i!==null)if(xn(i.value,o)){if(i.children===s.children&&!kt.current){e=lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=sr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),pf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,hi(e,n),s=nn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),Eg(t,e,r,s,n);case 15:return Bx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),El(t,e),e.tag=1,Dt(r)?(t=!0,Xl(e)):t=!1,hi(e,n),Fx(e,r,s),gf(e,r,s,n),xf(null,e,r,!0,t,n);case 19:return Hx(t,e,n);case 22:return $x(t,e,n)}throw Error(W(156,e.tag))};function oE(t,e){return _v(t,e)}function iA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new iA(t,e,n,r)}function Tp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oA(t){if(typeof t=="function")return Tp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jh)return 11;if(t===Gh)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Tp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qs:return Ss(n.children,s,i,e);case $h:o=8,s|=8;break;case Bd:return t=en(12,n,e,s|2),t.elementType=Bd,t.lanes=i,t;case $d:return t=en(13,n,e,s),t.elementType=$d,t.lanes=i,t;case jd:return t=en(19,n,e,s),t.elementType=jd,t.lanes=i,t;case gv:return Kc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pv:o=10;break e;case mv:o=9;break e;case jh:o=11;break e;case Gh:o=14;break e;case Er:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ss(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Kc(t,e,n,r){return t=en(22,t,r,e),t.elementType=gv,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Wu(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wp(t,e,n,r,s,i,o,a,l){return t=new aA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},op(i),t}function lA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aE(t){if(!t)return Kr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Dt(n))return ax(t,n,e)}return e}function lE(t,e,n,r,s,i,o,a,l){return t=wp(n,r,!0,t,s,i,o,a,l),t.context=aE(null),n=t.current,r=Tt(),s=jr(n),i=sr(r,s),i.callback=e??null,Br(n,i,s),t.current.lanes=s,fa(t,s,r),Pt(t,r),t}function zc(t,e,n,r){var s=e.current,i=Tt(),o=jr(s);return n=aE(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Br(s,e,o),t!==null&&(vn(t,s,o,i),yl(t,s,o)),o}function cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bp(t,e){Pg(t,e),(t=t.alternate)&&Pg(t,e)}function cA(){return null}var cE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rp(t){this._internalRoot=t}Wc.prototype.render=Rp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));zc(t,e,null,null)};Wc.prototype.unmount=Rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){zc(null,t,null,null)}),e[or]=null}};function Wc(t){this._internalRoot=t}Wc.prototype.unstable_scheduleHydration=function(t){if(t){var e=$v();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wr.length&&e!==0&&e<wr[n].priority;n++);wr.splice(n,0,t),n===0&&Gv(t)}};function Ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _g(){}function uA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=cc(o);i.call(c)}}var o=lE(e,r,t,0,null,!1,!1,"",_g);return t._reactRootContainer=o,t[or]=o.current,$o(t.nodeType===8?t.parentNode:t),Is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=cc(l);a.call(c)}}var l=wp(t,0,!1,null,null,!1,!1,"",_g);return t._reactRootContainer=l,t[or]=l.current,$o(t.nodeType===8?t.parentNode:t),Is(function(){zc(e,l,n,r)}),l}function qc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=cc(o);a.call(l)}}zc(e,o,t,s)}else o=uA(n,e,t,s,r);return cc(o)}Uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=go(e.pendingLanes);n!==0&&(Kh(e,n|1),Pt(e,He()),!(ve&6)&&(Bi=He()+500,Jr()))}break;case 13:Is(function(){var r=ar(t,1);if(r!==null){var s=Tt();vn(r,t,1,s)}}),bp(t,1)}};zh=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Tt();vn(e,t,134217728,n)}bp(t,134217728)}};Bv=function(t){if(t.tag===13){var e=jr(t),n=ar(t,e);if(n!==null){var r=Tt();vn(n,t,e,r)}bp(t,e)}};$v=function(){return Re};jv=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Qd=function(t,e,n){switch(e){case"input":if(Hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bc(r);if(!s)throw Error(W(90));vv(r),Hd(r,s)}}}break;case"textarea":Ev(t,n);break;case"select":e=n.value,e!=null&&ci(t,!!n.multiple,e,!1)}};Cv=xp;Lv=Is;var dA={usingClientEntryPoint:!1,Events:[pa,ti,Bc,Rv,Av,xp]},lo={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fA={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dv(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||cA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Va.isDisabled&&Va.supportsFiber)try{Nc=Va.inject(fA),Gn=Va}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ap(e))throw Error(W(200));return lA(t,e,null,n)};Kt.createRoot=function(t,e){if(!Ap(t))throw Error(W(299));var n=!1,r="",s=cE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wp(t,1,!1,null,null,n,!1,r,s),t[or]=e.current,$o(t.nodeType===8?t.parentNode:t),new Rp(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Dv(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Is(t)};Kt.hydrate=function(t,e,n){if(!Yc(e))throw Error(W(200));return qc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Ap(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lE(e,null,t,1,n??null,s,!1,i,o),t[or]=e.current,$o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Wc(e)};Kt.render=function(t,e,n){if(!Yc(e))throw Error(W(200));return qc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(W(40));return t._reactRootContainer?(Is(function(){qc(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};Kt.unstable_batchedUpdates=xp;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return qc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function uE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uE)}catch(t){console.error(t)}}uE(),uv.exports=Kt;var Ms=uv.exports;const dE=Qy(Ms);var fE,Og=Ms;fE=Og.createRoot,Og.hydrateRoot;const hA=1,pA=1e6;let Yu=0;function mA(){return Yu=(Yu+1)%Number.MAX_SAFE_INTEGER,Yu.toString()}const qu=new Map,Ng=t=>{if(qu.has(t))return;const e=setTimeout(()=>{qu.delete(t),ko({type:"REMOVE_TOAST",toastId:t})},pA);qu.set(t,e)},gA=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,hA)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Ng(n):t.toasts.forEach(r=>{Ng(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},bl=[];let Rl={toasts:[]};function ko(t){Rl=gA(Rl,t),bl.forEach(e=>{e(Rl)})}function yA({...t}){const e=mA(),n=s=>ko({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ko({type:"DISMISS_TOAST",toastId:e});return ko({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function vA(){const[t,e]=E.useState(Rl);return E.useEffect(()=>(bl.push(e),()=>{const n=bl.indexOf(e);n>-1&&bl.splice(n,1)}),[t]),{...t,toast:yA,dismiss:n=>ko({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function xA(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function hE(...t){return e=>t.forEach(n=>xA(n,e))}function Ve(...t){return E.useCallback(hE(...t),t)}function EA(t,e=[]){let n=[];function r(i,o){const a=E.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:m,...p}=d,h=(f==null?void 0:f[t][l])||a,g=E.useMemo(()=>p,Object.values(p));return w.jsx(h.Provider,{value:g,children:m})}function u(d,f){const m=(f==null?void 0:f[t][l])||a,p=E.useContext(m);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,SA(s,...e)]}function SA(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var qo=E.forwardRef((t,e)=>{const{children:n,...r}=t,s=E.Children.toArray(n),i=s.find(TA);if(i){const o=i.props.children,a=s.map(l=>l===i?E.Children.count(o)>1?E.Children.only(null):E.isValidElement(o)?o.props.children:null:l);return w.jsx(Df,{...r,ref:e,children:E.isValidElement(o)?E.cloneElement(o,void 0,a):null})}return w.jsx(Df,{...r,ref:e,children:n})});qo.displayName="Slot";var Df=E.forwardRef((t,e)=>{const{children:n,...r}=t;if(E.isValidElement(n)){const s=bA(n);return E.cloneElement(n,{...wA(r,n.props),ref:e?hE(e,s):s})}return E.Children.count(n)>1?E.Children.only(null):null});Df.displayName="SlotClone";var pE=({children:t})=>w.jsx(w.Fragment,{children:t});function TA(t){return E.isValidElement(t)&&t.type===pE}function wA(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function bA(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mE(t){const e=t+"CollectionProvider",[n,r]=EA(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:p,children:h}=m,g=q.useRef(null),y=q.useRef(new Map).current;return w.jsx(s,{scope:p,itemMap:y,collectionRef:g,children:h})};o.displayName=e;const a=t+"CollectionSlot",l=q.forwardRef((m,p)=>{const{scope:h,children:g}=m,y=i(a,h),v=Ve(p,y.collectionRef);return w.jsx(qo,{ref:v,children:g})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=q.forwardRef((m,p)=>{const{scope:h,children:g,...y}=m,v=q.useRef(null),x=Ve(p,v),b=i(c,h);return q.useEffect(()=>(b.itemMap.set(v,{ref:v,...y}),()=>void b.itemMap.delete(v))),w.jsx(qo,{[u]:"",ref:x,children:g})});d.displayName=c;function f(m){const p=i(t+"CollectionConsumer",m);return q.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((b,T)=>y.indexOf(b.ref.current)-y.indexOf(T.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}function Cp(t,e=[]){let n=[];function r(i,o){const a=E.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:m,...p}=d,h=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=E.useMemo(()=>p,Object.values(p));return w.jsx(h.Provider,{value:g,children:m})};c.displayName=i+"Provider";function u(d,f){var h;const m=((h=f==null?void 0:f[t])==null?void 0:h[l])||a,p=E.useContext(m);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,RA(s,...e)]}function RA(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var AA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ae=AA.reduce((t,e)=>{const n=E.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?qo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function gE(t,e){t&&Ms.flushSync(()=>t.dispatchEvent(e))}function Ht(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function CA(t,e=globalThis==null?void 0:globalThis.document){const n=Ht(t);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var LA="DismissableLayer",Pf="dismissableLayer.update",IA="dismissableLayer.pointerDownOutside",kA="dismissableLayer.focusOutside",Fg,yE=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xc=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=E.useContext(yE),[u,d]=E.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=E.useState({}),p=Ve(e,R=>d(R)),h=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=h.indexOf(g),v=u?h.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,T=PA(R=>{const C=R.target,k=[...c.branches].some(L=>L.contains(C));!b||k||(s==null||s(R),o==null||o(R),R.defaultPrevented||a==null||a())},f),A=_A(R=>{const C=R.target;[...c.branches].some(L=>L.contains(C))||(i==null||i(R),o==null||o(R),R.defaultPrevented||a==null||a())},f);return CA(R=>{v===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},f),E.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Fg=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Mg(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Fg)}},[u,f,n,c]),E.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Mg())},[u,c]),E.useEffect(()=>{const R=()=>m({});return document.addEventListener(Pf,R),()=>document.removeEventListener(Pf,R)},[]),w.jsx(Ae.div,{...l,ref:p,style:{pointerEvents:x?b?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,A.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,T.onPointerDownCapture)})});Xc.displayName=LA;var DA="DismissableLayerBranch",vE=E.forwardRef((t,e)=>{const n=E.useContext(yE),r=E.useRef(null),s=Ve(e,r);return E.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(Ae.div,{...t,ref:s})});vE.displayName=DA;function PA(t,e=globalThis==null?void 0:globalThis.document){const n=Ht(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){xE(IA,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function _A(t,e=globalThis==null?void 0:globalThis.document){const n=Ht(t),r=E.useRef(!1);return E.useEffect(()=>{const s=i=>{i.target&&!r.current&&xE(kA,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Mg(){const t=new CustomEvent(Pf);document.dispatchEvent(t)}function xE(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?gE(s,i):s.dispatchEvent(i)}var OA=Xc,NA=vE,gt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},FA="Portal",Lp=E.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=E.useState(!1);gt(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?dE.createPortal(w.jsx(Ae.div,{...r,ref:e}),o):null});Lp.displayName=FA;function MA(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Ip=t=>{const{present:e,children:n}=t,r=UA(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),i=Ve(r.ref,BA(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:i}):null};Ip.displayName="Presence";function UA(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),i=E.useRef("none"),o=t?"mounted":"unmounted",[a,l]=MA(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=Ha(r.current);i.current=a==="mounted"?c:"none"},[a]),gt(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,m=Ha(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),gt(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const h=Ha(r.current).includes(m.animationName);if(m.target===e&&h&&(l("ANIMATION_END"),!s.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=m=>{m.target===e&&(i.current=Ha(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Ha(t){return(t==null?void 0:t.animationName)||"none"}function BA(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function _f({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=$A({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Ht(n),l=E.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function $A({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,s=E.useRef(r),i=Ht(e);return E.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var jA="VisuallyHidden",ga=E.forwardRef((t,e)=>w.jsx(Ae.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ga.displayName=jA;var GA=ga,kp="ToastProvider",[Dp,VA,HA]=mE("Toast"),[EE,IU]=Cp("Toast",[HA]),[KA,Qc]=EE(kp),SE=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=E.useState(null),[c,u]=E.useState(0),d=E.useRef(!1),f=E.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${kp}\`. Expected non-empty \`string\`.`),w.jsx(Dp.Provider,{scope:e,children:w.jsx(KA,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:E.useCallback(()=>u(m=>m+1),[]),onToastRemove:E.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};SE.displayName=kp;var TE="ToastViewport",zA=["F8"],Of="toast.viewportPause",Nf="toast.viewportResume",wE=E.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=zA,label:s="Notifications ({hotkey})",...i}=t,o=Qc(TE,n),a=VA(n),l=E.useRef(null),c=E.useRef(null),u=E.useRef(null),d=E.useRef(null),f=Ve(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;E.useEffect(()=>{const g=y=>{var x;r.length!==0&&r.every(b=>y[b]||y.code===b)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),E.useEffect(()=>{const g=l.current,y=d.current;if(p&&g&&y){const v=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(Of);y.dispatchEvent(A),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(Nf);y.dispatchEvent(A),o.isClosePausedRef.current=!1}},b=A=>{!g.contains(A.relatedTarget)&&x()},T=()=>{g.contains(document.activeElement)||x()};return g.addEventListener("focusin",v),g.addEventListener("focusout",b),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",T),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",b),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",T),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const h=E.useCallback(({tabbingDirection:g})=>{const v=a().map(x=>{const b=x.ref.current,T=[b,...iC(b)];return g==="forwards"?T:T.reverse()});return(g==="forwards"?v.reverse():v).flat()},[a]);return E.useEffect(()=>{const g=d.current;if(g){const y=v=>{var T,A,R;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const C=document.activeElement,k=v.shiftKey;if(v.target===g&&k){(T=c.current)==null||T.focus();return}const $=h({tabbingDirection:k?"backwards":"forwards"}),j=$.findIndex(B=>B===C);Xu($.slice(j+1))?v.preventDefault():k?(A=c.current)==null||A.focus():(R=u.current)==null||R.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[a,h]),w.jsxs(NA,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&w.jsx(Ff,{ref:c,onFocusFromOutsideViewport:()=>{const g=h({tabbingDirection:"forwards"});Xu(g)}}),w.jsx(Dp.Slot,{scope:n,children:w.jsx(Ae.ol,{tabIndex:-1,...i,ref:f})}),p&&w.jsx(Ff,{ref:u,onFocusFromOutsideViewport:()=>{const g=h({tabbingDirection:"backwards"});Xu(g)}})]})});wE.displayName=TE;var bE="ToastFocusProxy",Ff=E.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Qc(bE,n);return w.jsx(ga,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Ff.displayName=bE;var Jc="Toast",WA="toast.swipeStart",YA="toast.swipeMove",qA="toast.swipeCancel",XA="toast.swipeEnd",RE=E.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=_f({prop:r,defaultProp:s,onChange:i});return w.jsx(Ip,{present:n||a,children:w.jsx(ZA,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ht(t.onPause),onResume:Ht(t.onResume),onSwipeStart:pe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:pe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});RE.displayName=Jc;var[QA,JA]=EE(Jc,{onClose(){}}),ZA=E.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,...p}=t,h=Qc(Jc,n),[g,y]=E.useState(null),v=Ve(e,B=>y(B)),x=E.useRef(null),b=E.useRef(null),T=s||h.duration,A=E.useRef(0),R=E.useRef(T),C=E.useRef(0),{onToastAdd:k,onToastRemove:L}=h,_=Ht(()=>{var K;(g==null?void 0:g.contains(document.activeElement))&&((K=h.viewport)==null||K.focus()),o()}),$=E.useCallback(B=>{!B||B===1/0||(window.clearTimeout(C.current),A.current=new Date().getTime(),C.current=window.setTimeout(_,B))},[_]);E.useEffect(()=>{const B=h.viewport;if(B){const K=()=>{$(R.current),c==null||c()},G=()=>{const Y=new Date().getTime()-A.current;R.current=R.current-Y,window.clearTimeout(C.current),l==null||l()};return B.addEventListener(Of,G),B.addEventListener(Nf,K),()=>{B.removeEventListener(Of,G),B.removeEventListener(Nf,K)}}},[h.viewport,T,l,c,$]),E.useEffect(()=>{i&&!h.isClosePausedRef.current&&$(T)},[i,T,h.isClosePausedRef,$]),E.useEffect(()=>(k(),()=>L()),[k,L]);const j=E.useMemo(()=>g?PE(g):null,[g]);return h.viewport?w.jsxs(w.Fragment,{children:[j&&w.jsx(eC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),w.jsx(QA,{scope:n,onClose:_,children:Ms.createPortal(w.jsx(Dp.ItemSlot,{scope:n,children:w.jsx(OA,{asChild:!0,onEscapeKeyDown:pe(a,()=>{h.isFocusedToastEscapeKeyDownRef.current||_(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:w.jsx(Ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":h.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:pe(t.onPointerDown,B=>{B.button===0&&(x.current={x:B.clientX,y:B.clientY})}),onPointerMove:pe(t.onPointerMove,B=>{if(!x.current)return;const K=B.clientX-x.current.x,G=B.clientY-x.current.y,Y=!!b.current,D=["left","right"].includes(h.swipeDirection),N=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,U=D?N(0,K):0,H=D?0:N(0,G),z=B.pointerType==="touch"?10:2,X={x:U,y:H},se={originalEvent:B,delta:X};Y?(b.current=X,Ka(YA,d,se,{discrete:!1})):Ug(X,h.swipeDirection,z)?(b.current=X,Ka(WA,u,se,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(K)>z||Math.abs(G)>z)&&(x.current=null)}),onPointerUp:pe(t.onPointerUp,B=>{const K=b.current,G=B.target;if(G.hasPointerCapture(B.pointerId)&&G.releasePointerCapture(B.pointerId),b.current=null,x.current=null,K){const Y=B.currentTarget,D={originalEvent:B,delta:K};Ug(K,h.swipeDirection,h.swipeThreshold)?Ka(XA,m,D,{discrete:!0}):Ka(qA,f,D,{discrete:!0}),Y.addEventListener("click",N=>N.preventDefault(),{once:!0})}})})})}),h.viewport)})]}):null}),eC=t=>{const{__scopeToast:e,children:n,...r}=t,s=Qc(Jc,e),[i,o]=E.useState(!1),[a,l]=E.useState(!1);return rC(()=>o(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:w.jsx(Lp,{asChild:!0,children:w.jsx(ga,{...r,children:i&&w.jsxs(w.Fragment,{children:[s.label," ",n]})})})},tC="ToastTitle",AE=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return w.jsx(Ae.div,{...r,ref:e})});AE.displayName=tC;var nC="ToastDescription",CE=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return w.jsx(Ae.div,{...r,ref:e})});CE.displayName=nC;var LE="ToastAction",IE=E.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?w.jsx(DE,{altText:n,asChild:!0,children:w.jsx(Pp,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${LE}\`. Expected non-empty \`string\`.`),null)});IE.displayName=LE;var kE="ToastClose",Pp=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=JA(kE,n);return w.jsx(DE,{asChild:!0,children:w.jsx(Ae.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});Pp.displayName=kE;var DE=E.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return w.jsx(Ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function PE(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),sC(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...PE(r))}}),e}function Ka(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?gE(s,i):s.dispatchEvent(i)}var Ug=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function rC(t=()=>{}){const e=Ht(t);gt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function sC(t){return t.nodeType===t.ELEMENT_NODE}function iC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xu(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var oC=SE,_E=wE,OE=RE,NE=AE,FE=CE,ME=IE,UE=Pp;function BE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=BE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $E(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=BE(t))&&(r&&(r+=" "),r+=e);return r}const Bg=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$g=$E,aC=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $g(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=Bg(u)||Bg(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...m}=u;return Object.entries(m).every(p=>{let[h,g]=p;return Array.isArray(g)?g.includes({...i,...a}[h]):{...i,...a}[h]===g})?[...c,d,f]:c},[]);return $g(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>E.createElement("svg",{ref:l,...cC,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jE("lucide",s),...a},[...o.map(([c,u])=>E.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(t,e)=>{const n=E.forwardRef(({className:r,...s},i)=>E.createElement(uC,{ref:i,iconNode:e,className:jE(`lucide-${lC(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=Ye("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Ye("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=Ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=Ye("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=Ye("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=Ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Ye("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=Ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=Ye("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Ye("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_p="-",bC=t=>{const e=AC(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(_p);return a[0]===""&&a.length!==1&&a.shift(),WE(a,e)||RC(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},WE=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?WE(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(_p);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},jg=/^\[(.+)\]$/,RC=t=>{if(jg.test(t)){const e=jg.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},AC=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return LC(Object.entries(t.classGroups),n).forEach(([i,o])=>{Mf(o,r,i,e)}),r},Mf=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Gg(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(CC(s)){Mf(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Mf(o,Gg(e,i),n,r)})})},Gg=(t,e)=>{let n=t;return e.split(_p).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},CC=t=>t.isThemeGetter,LC=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,IC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},YE="!",kC=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let g=0;g<a.length;g++){let y=a[g];if(c===0){if(y===s&&(r||a.slice(g,g+i)===e)){l.push(a.slice(u,g)),u=g+i;continue}if(y==="/"){d=g;continue}}y==="["?c++:y==="]"&&c--}const f=l.length===0?a:a.substring(u),m=f.startsWith(YE),p=m?f.substring(1):f,h=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:h}};return n?a=>n({className:a,parseClassName:o}):o},DC=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},PC=t=>({cache:IC(t.cacheSize),parseClassName:kC(t),...bC(t)}),_C=/\s+/,OC=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(_C);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let p=!!m,h=r(p?f.substring(0,m):f);if(!h){if(!p){a=c+(a.length>0?" "+a:a);continue}if(h=r(f),!h){a=c+(a.length>0?" "+a:a);continue}p=!1}const g=DC(u).join(":"),y=d?g+YE:g,v=y+h;if(i.includes(v))continue;i.push(v);const x=s(h,p);for(let b=0;b<x.length;++b){const T=x[b];i.push(y+T)}a=c+(a.length>0?" "+a:a)}return a};function NC(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qE(e))&&(r&&(r+=" "),r+=n);return r}const qE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qE(t[r]))&&(n&&(n+=" "),n+=e);return n};function FC(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=PC(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=OC(l,n);return s(l,u),u}return function(){return i(NC.apply(null,arguments))}}const Pe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},XE=/^\[(?:([a-z-]+):)?(.+)\]$/i,MC=/^\d+\/\d+$/,UC=new Set(["px","full","screen"]),BC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$C=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yn=t=>mi(t)||UC.has(t)||MC.test(t),mr=t=>Yi(t,"length",QC),mi=t=>!!t&&!Number.isNaN(Number(t)),Qu=t=>Yi(t,"number",mi),co=t=>!!t&&Number.isInteger(Number(t)),HC=t=>t.endsWith("%")&&mi(t.slice(0,-1)),ue=t=>XE.test(t),gr=t=>BC.test(t),KC=new Set(["length","size","percentage"]),zC=t=>Yi(t,KC,QE),WC=t=>Yi(t,"position",QE),YC=new Set(["image","url"]),qC=t=>Yi(t,YC,ZC),XC=t=>Yi(t,"",JC),uo=()=>!0,Yi=(t,e,n)=>{const r=XE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},QC=t=>$C.test(t)&&!jC.test(t),QE=()=>!1,JC=t=>GC.test(t),ZC=t=>VC.test(t),eL=()=>{const t=Pe("colors"),e=Pe("spacing"),n=Pe("blur"),r=Pe("brightness"),s=Pe("borderColor"),i=Pe("borderRadius"),o=Pe("borderSpacing"),a=Pe("borderWidth"),l=Pe("contrast"),c=Pe("grayscale"),u=Pe("hueRotate"),d=Pe("invert"),f=Pe("gap"),m=Pe("gradientColorStops"),p=Pe("gradientColorStopPositions"),h=Pe("inset"),g=Pe("margin"),y=Pe("opacity"),v=Pe("padding"),x=Pe("saturate"),b=Pe("scale"),T=Pe("sepia"),A=Pe("skew"),R=Pe("space"),C=Pe("translate"),k=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",ue,e],$=()=>[ue,e],j=()=>["",Yn,mr],B=()=>["auto",mi,ue],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",ue],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[mi,ue];return{cacheSize:500,separator:":",theme:{colors:[uo],spacing:[Yn,mr],blur:["none","",gr,ue],brightness:H(),borderColor:[t],borderRadius:["none","","full",gr,ue],borderSpacing:$(),borderWidth:j(),contrast:H(),grayscale:N(),hueRotate:H(),invert:N(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[HC,mr],inset:_(),margin:_(),opacity:H(),padding:$(),saturate:H(),scale:H(),sepia:N(),skew:H(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",ue]}],container:["container"],columns:[{columns:[gr]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ue]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",co,ue]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ue]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",co,ue]}],"grid-cols":[{"grid-cols":[uo]}],"col-start-end":[{col:["auto",{span:["full",co,ue]},ue]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[uo]}],"row-start-end":[{row:["auto",{span:[co,ue]},ue]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ue]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ue,e]}],"min-w":[{"min-w":[ue,e,"min","max","fit"]}],"max-w":[{"max-w":[ue,e,"none","full","min","max","fit","prose",{screen:[gr]},gr]}],h:[{h:[ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",gr,mr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qu]}],"font-family":[{font:[uo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ue]}],"line-clamp":[{"line-clamp":["none",mi,Qu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Yn,ue]}],"list-image":[{"list-image":["none",ue]}],"list-style-type":[{list:["none","disc","decimal",ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Yn,mr]}],"underline-offset":[{"underline-offset":["auto",Yn,ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),WC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qC]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Yn,ue]}],"outline-w":[{outline:[Yn,mr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Yn,mr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gr,XC]}],"shadow-color":[{shadow:[uo]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gr,ue]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ue]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",ue]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[co,ue]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Yn,mr,Qu]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tL=FC(eL);function yt(...t){return tL($E(t))}const nL=oC,JE=E.forwardRef(({className:t,...e},n)=>w.jsx(_E,{ref:n,className:yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));JE.displayName=_E.displayName;const rL=aC("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZE=E.forwardRef(({className:t,variant:e,...n},r)=>w.jsx(OE,{ref:r,className:yt(rL({variant:e}),t),...n}));ZE.displayName=OE.displayName;const sL=E.forwardRef(({className:t,...e},n)=>w.jsx(ME,{ref:n,className:yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));sL.displayName=ME.displayName;const eS=E.forwardRef(({className:t,...e},n)=>w.jsx(UE,{ref:n,className:yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:w.jsx(wC,{className:"h-4 w-4"})}));eS.displayName=UE.displayName;const tS=E.forwardRef(({className:t,...e},n)=>w.jsx(NE,{ref:n,className:yt("text-sm font-semibold",t),...e}));tS.displayName=NE.displayName;const nS=E.forwardRef(({className:t,...e},n)=>w.jsx(FE,{ref:n,className:yt("text-sm opacity-90",t),...e}));nS.displayName=FE.displayName;function iL(){const{toasts:t}=vA();return w.jsxs(nL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return w.jsxs(ZE,{...i,children:[w.jsxs("div",{className:"grid gap-1",children:[n&&w.jsx(tS,{children:n}),r&&w.jsx(nS,{children:r})]}),s,w.jsx(eS,{})]},e)}),w.jsx(JE,{})]})}var Vg=["light","dark"],oL="(prefers-color-scheme: dark)",aL=E.createContext(void 0),lL={setTheme:t=>{},themes:[]},cL=()=>{var t;return(t=E.useContext(aL))!=null?t:lL};E.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=s?Vg.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(p,h=!1,g=!0)=>{let y=o?o[p]:p,v=h?p+"|| ''":`'${y}'`,x="";return s&&g&&!h&&Vg.includes(p)&&(x+=`d.style.colorScheme = '${p}';`),n==="class"?h||y?x+=`c.add(${v})`:x+="null":y&&(x+=`d[s](n,${v})`),x},m=t?`!function(){${u}${f(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${oL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return E.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var uL=t=>{switch(t){case"success":return hL;case"info":return mL;case"warning":return pL;case"error":return gL;default:return null}},dL=Array(12).fill(0),fL=({visible:t})=>q.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},q.createElement("div",{className:"sonner-spinner"},dL.map((e,n)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),hL=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),pL=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mL=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),gL=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yL=()=>{let[t,e]=q.useState(document.hidden);return q.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Uf=1,vL=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Uf++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0;return r.then(async i=>{if(EL(i)&&!i.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:n,type:"error",message:o,description:a})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(i):e.success,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:n,type:"success",message:o,description:a})}}).catch(async i=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(i):e.error,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:n,type:"error",message:o,description:a})}}).finally(()=>{var i;s&&(this.dismiss(n),n=void 0),(i=e.finally)==null||i.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Uf++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Ft=new vL,xL=(t,e)=>{let n=(e==null?void 0:e.id)||Uf++;return Ft.addToast({title:t,...e,id:n}),n},EL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",SL=xL,TL=()=>Ft.toasts;Object.assign(SL,{success:Ft.success,info:Ft.info,warning:Ft.warning,error:Ft.error,custom:Ft.custom,message:Ft.message,promise:Ft.promise,dismiss:Ft.dismiss,loading:Ft.loading},{getHistory:TL});function wL(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}wL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function za(t){return t.label!==void 0}var bL=3,RL="32px",AL=4e3,CL=356,LL=14,IL=20,kL=200;function DL(...t){return t.filter(Boolean).join(" ")}var PL=t=>{var e,n,r,s,i,o,a,l,c,u;let{invert:d,toast:f,unstyled:m,interacting:p,setHeights:h,visibleToasts:g,heights:y,index:v,toasts:x,expanded:b,removeToast:T,defaultRichColors:A,closeButton:R,style:C,cancelButtonStyle:k,actionButtonStyle:L,className:_="",descriptionClassName:$="",duration:j,position:B,gap:K,loadingIcon:G,expandByDefault:Y,classNames:D,icons:N,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:H,cn:z}=t,[X,se]=q.useState(!1),[de,te]=q.useState(!1),[Q,fe]=q.useState(!1),[Ce,xe]=q.useState(!1),[Se,Ee]=q.useState(0),[vt,Ot]=q.useState(0),fr=q.useRef(null),Wt=q.useRef(null),ns=v===0,vu=v+1<=g,rt=f.type,Bs=f.dismissible!==!1,O1=f.className||"",N1=f.descriptionClassName||"",ba=q.useMemo(()=>y.findIndex(ce=>ce.toastId===f.id)||0,[y,f.id]),F1=q.useMemo(()=>{var ce;return(ce=f.closeButton)!=null?ce:R},[f.closeButton,R]),Em=q.useMemo(()=>f.duration||j||AL,[f.duration,j]),xu=q.useRef(0),$s=q.useRef(0),Sm=q.useRef(0),js=q.useRef(null),[Tm,M1]=B.split("-"),wm=q.useMemo(()=>y.reduce((ce,De,Le)=>Le>=ba?ce:ce+De.height,0),[y,ba]),bm=yL(),U1=f.invert||d,Eu=rt==="loading";$s.current=q.useMemo(()=>ba*K+wm,[ba,wm]),q.useEffect(()=>{se(!0)},[]),q.useLayoutEffect(()=>{if(!X)return;let ce=Wt.current,De=ce.style.height;ce.style.height="auto";let Le=ce.getBoundingClientRect().height;ce.style.height=De,Ot(Le),h(wn=>wn.find(bn=>bn.toastId===f.id)?wn.map(bn=>bn.toastId===f.id?{...bn,height:Le}:bn):[{toastId:f.id,height:Le,position:f.position},...wn])},[X,f.title,f.description,h,f.id]);let hr=q.useCallback(()=>{te(!0),Ee($s.current),h(ce=>ce.filter(De=>De.toastId!==f.id)),setTimeout(()=>{T(f)},kL)},[f,T,h,$s]);q.useEffect(()=>{if(f.promise&&rt==="loading"||f.duration===1/0||f.type==="loading")return;let ce,De=Em;return b||p||H&&bm?(()=>{if(Sm.current<xu.current){let Le=new Date().getTime()-xu.current;De=De-Le}Sm.current=new Date().getTime()})():De!==1/0&&(xu.current=new Date().getTime(),ce=setTimeout(()=>{var Le;(Le=f.onAutoClose)==null||Le.call(f,f),hr()},De)),()=>clearTimeout(ce)},[b,p,Y,f,Em,hr,f.promise,rt,H,bm]),q.useEffect(()=>{let ce=Wt.current;if(ce){let De=ce.getBoundingClientRect().height;return Ot(De),h(Le=>[{toastId:f.id,height:De,position:f.position},...Le]),()=>h(Le=>Le.filter(wn=>wn.toastId!==f.id))}},[h,f.id]),q.useEffect(()=>{f.delete&&hr()},[hr,f.delete]);function B1(){return N!=null&&N.loading?q.createElement("div",{className:"sonner-loader","data-visible":rt==="loading"},N.loading):G?q.createElement("div",{className:"sonner-loader","data-visible":rt==="loading"},G):q.createElement(fL,{visible:rt==="loading"})}return q.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Wt,className:z(_,O1,D==null?void 0:D.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[rt],(n=f==null?void 0:f.classNames)==null?void 0:n[rt]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:A,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":X,"data-promise":!!f.promise,"data-removed":de,"data-visible":vu,"data-y-position":Tm,"data-x-position":M1,"data-index":v,"data-front":ns,"data-swiping":Q,"data-dismissible":Bs,"data-type":rt,"data-invert":U1,"data-swipe-out":Ce,"data-expanded":!!(b||Y&&X),style:{"--index":v,"--toasts-before":v,"--z-index":x.length-v,"--offset":`${de?Se:$s.current}px`,"--initial-height":Y?"auto":`${vt}px`,...C,...f.style},onPointerDown:ce=>{Eu||!Bs||(fr.current=new Date,Ee($s.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(fe(!0),js.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,De,Le,wn;if(Ce||!Bs)return;js.current=null;let bn=Number(((ce=Wt.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ra=new Date().getTime()-((De=fr.current)==null?void 0:De.getTime()),$1=Math.abs(bn)/Ra;if(Math.abs(bn)>=IL||$1>.11){Ee($s.current),(Le=f.onDismiss)==null||Le.call(f,f),hr(),xe(!0);return}(wn=Wt.current)==null||wn.style.setProperty("--swipe-amount","0px"),fe(!1)},onPointerMove:ce=>{var De;if(!js.current||!Bs)return;let Le=ce.clientY-js.current.y,wn=ce.clientX-js.current.x,bn=(Tm==="top"?Math.min:Math.max)(0,Le),Ra=ce.pointerType==="touch"?10:2;Math.abs(bn)>Ra?(De=Wt.current)==null||De.style.setProperty("--swipe-amount",`${Le}px`):Math.abs(wn)>Ra&&(js.current=null)}},F1&&!f.jsx?q.createElement("button",{"aria-label":U,"data-disabled":Eu,"data-close-button":!0,onClick:Eu||!Bs?()=>{}:()=>{var ce;hr(),(ce=f.onDismiss)==null||ce.call(f,f)},className:z(D==null?void 0:D.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||q.isValidElement(f.title)?f.jsx||f.title:q.createElement(q.Fragment,null,rt||f.icon||f.promise?q.createElement("div",{"data-icon":"",className:z(D==null?void 0:D.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||B1():null,f.type!=="loading"?f.icon||(N==null?void 0:N[rt])||uL(rt):null):null,q.createElement("div",{"data-content":"",className:z(D==null?void 0:D.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},q.createElement("div",{"data-title":"",className:z(D==null?void 0:D.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?q.createElement("div",{"data-description":"",className:z($,N1,D==null?void 0:D.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),q.isValidElement(f.cancel)?f.cancel:f.cancel&&za(f.cancel)?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:ce=>{var De,Le;za(f.cancel)&&Bs&&((Le=(De=f.cancel).onClick)==null||Le.call(De,ce),hr())},className:z(D==null?void 0:D.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,q.isValidElement(f.action)?f.action:f.action&&za(f.action)?q.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||L,onClick:ce=>{var De,Le;za(f.action)&&(ce.defaultPrevented||((Le=(De=f.action).onClick)==null||Le.call(De,ce),hr()))},className:z(D==null?void 0:D.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function Hg(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var _L=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:f=bL,toastOptions:m,dir:p=Hg(),gap:h=LL,loadingIcon:g,icons:y,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:x,cn:b=DL}=t,[T,A]=q.useState([]),R=q.useMemo(()=>Array.from(new Set([n].concat(T.filter(H=>H.position).map(H=>H.position)))),[T,n]),[C,k]=q.useState([]),[L,_]=q.useState(!1),[$,j]=q.useState(!1),[B,K]=q.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=q.useRef(null),Y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=q.useRef(null),N=q.useRef(!1),U=q.useCallback(H=>{var z;(z=T.find(X=>X.id===H.id))!=null&&z.delete||Ft.dismiss(H.id),A(X=>X.filter(({id:se})=>se!==H.id))},[T]);return q.useEffect(()=>Ft.subscribe(H=>{if(H.dismiss){A(z=>z.map(X=>X.id===H.id?{...X,delete:!0}:X));return}setTimeout(()=>{dE.flushSync(()=>{A(z=>{let X=z.findIndex(se=>se.id===H.id);return X!==-1?[...z.slice(0,X),{...z[X],...H},...z.slice(X+1)]:[H,...z]})})})}),[]),q.useEffect(()=>{if(l!=="system"){K(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:H})=>{K(H?"dark":"light")})},[l]),q.useEffect(()=>{T.length<=1&&_(!1)},[T]),q.useEffect(()=>{let H=z=>{var X,se;r.every(de=>z[de]||z.code===de)&&(_(!0),(X=G.current)==null||X.focus()),z.code==="Escape"&&(document.activeElement===G.current||(se=G.current)!=null&&se.contains(document.activeElement))&&_(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[r]),q.useEffect(()=>{if(G.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,N.current=!1)}},[G.current]),T.length?q.createElement("section",{"aria-label":`${v} ${Y}`,tabIndex:-1},R.map((H,z)=>{var X;let[se,de]=H.split("-");return q.createElement("ol",{key:H,dir:p==="auto"?Hg():p,tabIndex:-1,ref:G,className:o,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":se,"data-x-position":de,style:{"--front-toast-height":`${((X=C[0])==null?void 0:X.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||RL,"--width":`${CL}px`,"--gap":`${h}px`,...d},onBlur:te=>{N.current&&!te.currentTarget.contains(te.relatedTarget)&&(N.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||N.current||(N.current=!0,D.current=te.relatedTarget)},onMouseEnter:()=>_(!0),onMouseMove:()=>_(!0),onMouseLeave:()=>{$||_(!1)},onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},T.filter(te=>!te.position&&z===0||te.position===H).map((te,Q)=>{var fe,Ce;return q.createElement(PL,{key:te.id,icons:y,index:Q,toast:te,defaultRichColors:c,duration:(fe=m==null?void 0:m.duration)!=null?fe:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:f,closeButton:(Ce=m==null?void 0:m.closeButton)!=null?Ce:i,interacting:$,position:H,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:U,toasts:T.filter(xe=>xe.position==te.position),heights:C.filter(xe=>xe.position==te.position),setHeights:k,expandByDefault:s,gap:h,loadingIcon:g,expanded:L,pauseWhenPageIsHidden:x,cn:b})}))})):null};const OL=({...t})=>{const{theme:e="system"}=cL();return w.jsx(_L,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var NL=lv.useId||(()=>{}),FL=0;function Op(t){const[e,n]=E.useState(NL());return gt(()=>{n(r=>r??String(FL++))},[t]),e?`radix-${e}`:""}const ML=["top","right","bottom","left"],zr=Math.min,Ut=Math.max,fc=Math.round,Wa=Math.floor,Wr=t=>({x:t,y:t}),UL={left:"right",right:"left",bottom:"top",top:"bottom"},BL={start:"end",end:"start"};function Bf(t,e,n){return Ut(t,zr(e,n))}function cr(t,e){return typeof t=="function"?t(e):t}function ur(t){return t.split("-")[0]}function qi(t){return t.split("-")[1]}function Np(t){return t==="x"?"y":"x"}function Fp(t){return t==="y"?"height":"width"}function Yr(t){return["top","bottom"].includes(ur(t))?"y":"x"}function Mp(t){return Np(Yr(t))}function $L(t,e,n){n===void 0&&(n=!1);const r=qi(t),s=Mp(t),i=Fp(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=hc(o)),[o,hc(o)]}function jL(t){const e=hc(t);return[$f(t),e,$f(e)]}function $f(t){return t.replace(/start|end/g,e=>BL[e])}function GL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function VL(t,e,n,r){const s=qi(t);let i=GL(ur(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map($f)))),i}function hc(t){return t.replace(/left|right|bottom|top/g,e=>UL[e])}function HL(t){return{top:0,right:0,bottom:0,left:0,...t}}function rS(t){return typeof t!="number"?HL(t):{top:t,right:t,bottom:t,left:t}}function pc(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Kg(t,e,n){let{reference:r,floating:s}=t;const i=Yr(e),o=Mp(e),a=Fp(o),l=ur(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-s.width,y:d};break;default:m={x:r.x,y:r.y}}switch(qi(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const KL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=Kg(c,r,l),f=r,m={},p=0;for(let h=0;h<a.length;h++){const{name:g,fn:y}=a[h],{x:v,y:x,data:b,reset:T}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=v??u,d=x??d,m={...m,[g]:{...m[g],...b}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:u,y:d}=Kg(c,f,l)),h=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:m}};async function Xo(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=cr(e,t),p=rS(m),g=a[f?d==="floating"?"reference":"floating":d],y=pc(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),b=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},T=pc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-T.top+p.top)/b.y,bottom:(T.bottom-y.bottom+p.bottom)/b.y,left:(y.left-T.left+p.left)/b.x,right:(T.right-y.right+p.right)/b.x}}const zL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=cr(t,e)||{};if(c==null)return{};const d=rS(u),f={x:n,y:r},m=Mp(s),p=Fp(m),h=await o.getDimensions(c),g=m==="y",y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=i.reference[p]+i.reference[m]-f[m]-i.floating[p],T=f[m]-i.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=A?A[x]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=a.floating[x]||i.floating[p]);const C=b/2-T/2,k=R/2-h[p]/2-1,L=zr(d[y],k),_=zr(d[v],k),$=L,j=R-h[p]-_,B=R/2-h[p]/2+C,K=Bf($,B,j),G=!l.arrow&&qi(s)!=null&&B!==K&&i.reference[p]/2-(B<$?L:_)-h[p]/2<0,Y=G?B<$?B-$:B-j:0;return{[m]:f[m]+Y,data:{[m]:K,centerOffset:B-K-Y,...G&&{alignmentOffset:Y}},reset:G}}}),WL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...g}=cr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=ur(s),v=Yr(a),x=ur(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=f||(x||!h?[hc(a)]:jL(a)),A=p!=="none";!f&&A&&T.push(...VL(a,h,p,b));const R=[a,...T],C=await Xo(e,g),k=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&k.push(C[y]),d){const B=$L(s,o,b);k.push(C[B[0]],C[B[1]])}if(L=[...L,{placement:s,overflows:k}],!k.every(B=>B<=0)){var _,$;const B=(((_=i.flip)==null?void 0:_.index)||0)+1,K=R[B];if(K)return{data:{index:B,overflows:L},reset:{placement:K}};let G=($=L.filter(Y=>Y.overflows[0]<=0).sort((Y,D)=>Y.overflows[1]-D.overflows[1])[0])==null?void 0:$.placement;if(!G)switch(m){case"bestFit":{var j;const Y=(j=L.filter(D=>{if(A){const N=Yr(D.placement);return N===v||N==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(N=>N>0).reduce((N,U)=>N+U,0)]).sort((D,N)=>D[1]-N[1])[0])==null?void 0:j[0];Y&&(G=Y);break}case"initialPlacement":G=a;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function zg(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Wg(t){return ML.some(e=>t[e]>=0)}const YL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=cr(t,e);switch(r){case"referenceHidden":{const i=await Xo(e,{...s,elementContext:"reference"}),o=zg(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Wg(o)}}}case"escaped":{const i=await Xo(e,{...s,altBoundary:!0}),o=zg(i,n.floating);return{data:{escapedOffsets:o,escaped:Wg(o)}}}default:return{}}}}};async function qL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ur(n),a=qi(n),l=Yr(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=cr(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(m=a==="end"?p*-1:p),l?{x:m*u,y:f*c}:{x:f*c,y:m*u}}const XL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await qL(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},QL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=cr(t,e),c={x:n,y:r},u=await Xo(e,l),d=Yr(ur(s)),f=Np(d);let m=c[f],p=c[d];if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=m+u[g],x=m-u[y];m=Bf(v,m,x)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+u[g],x=p-u[y];p=Bf(v,p,x)}const h=a.fn({...e,[f]:m,[d]:p});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:i,[d]:o}}}}}},JL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=cr(t,e),u={x:n,y:r},d=Yr(s),f=Np(d);let m=u[f],p=u[d];const h=cr(a,e),g=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(l){const x=f==="y"?"height":"width",b=i.reference[f]-i.floating[x]+g.mainAxis,T=i.reference[f]+i.reference[x]-g.mainAxis;m<b?m=b:m>T&&(m=T)}if(c){var y,v;const x=f==="y"?"width":"height",b=["top","left"].includes(ur(s)),T=i.reference[d]-i.floating[x]+(b&&((y=o.offset)==null?void 0:y[d])||0)+(b?0:g.crossAxis),A=i.reference[d]+i.reference[x]+(b?0:((v=o.offset)==null?void 0:v[d])||0)-(b?g.crossAxis:0);p<T?p=T:p>A&&(p=A)}return{[f]:m,[d]:p}}}},ZL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=cr(t,e),u=await Xo(e,c),d=ur(s),f=qi(s),m=Yr(s)==="y",{width:p,height:h}=i.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=h-u.top-u.bottom,x=p-u.left-u.right,b=zr(h-u[g],v),T=zr(p-u[y],x),A=!e.middlewareData.shift;let R=b,C=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=v),A&&!f){const L=Ut(u.left,0),_=Ut(u.right,0),$=Ut(u.top,0),j=Ut(u.bottom,0);m?C=p-2*(L!==0||_!==0?L+_:Ut(u.left,u.right)):R=h-2*($!==0||j!==0?$+j:Ut(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:R});const k=await o.getDimensions(a.floating);return p!==k.width||h!==k.height?{reset:{rects:!0}}:{}}}};function Zc(){return typeof window<"u"}function Xi(t){return sS(t)?(t.nodeName||"").toLowerCase():"#document"}function jt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Wn(t){var e;return(e=(sS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sS(t){return Zc()?t instanceof Node||t instanceof jt(t).Node:!1}function En(t){return Zc()?t instanceof Element||t instanceof jt(t).Element:!1}function Kn(t){return Zc()?t instanceof HTMLElement||t instanceof jt(t).HTMLElement:!1}function Yg(t){return!Zc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jt(t).ShadowRoot}function ya(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function eI(t){return["table","td","th"].includes(Xi(t))}function eu(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Up(t){const e=Bp(),n=En(t)?Sn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tI(t){let e=qr(t);for(;Kn(e)&&!$i(e);){if(Up(e))return e;if(eu(e))return null;e=qr(e)}return null}function Bp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $i(t){return["html","body","#document"].includes(Xi(t))}function Sn(t){return jt(t).getComputedStyle(t)}function tu(t){return En(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function qr(t){if(Xi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Yg(t)&&t.host||Wn(t);return Yg(e)?e.host:e}function iS(t){const e=qr(t);return $i(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kn(e)&&ya(e)?e:iS(e)}function Qo(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=iS(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=jt(s);if(i){const a=jf(o);return e.concat(o,o.visualViewport||[],ya(s)?s:[],a&&n?Qo(a):[])}return e.concat(s,Qo(s,[],n))}function jf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function oS(t){const e=Sn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Kn(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=fc(n)!==i||fc(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function $p(t){return En(t)?t:t.contextElement}function gi(t){const e=$p(t);if(!Kn(e))return Wr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=oS(e);let o=(i?fc(n.width):n.width)/r,a=(i?fc(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nI=Wr(0);function aS(t){const e=jt(t);return!Bp()||!e.visualViewport?nI:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rI(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==jt(t)?!1:e}function ks(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=$p(t);let o=Wr(1);e&&(r?En(r)&&(o=gi(r)):o=gi(t));const a=rI(i,n,r)?aS(i):Wr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=jt(i),m=r&&En(r)?jt(r):r;let p=f,h=jf(p);for(;h&&r&&m!==p;){const g=gi(h),y=h.getBoundingClientRect(),v=Sn(h),x=y.left+(h.clientLeft+parseFloat(v.paddingLeft))*g.x,b=y.top+(h.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=x,c+=b,p=jt(h),h=jf(p)}}return pc({width:u,height:d,x:l,y:c})}function sI(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Wn(r),a=e?eu(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Wr(1);const u=Wr(0),d=Kn(r);if((d||!d&&!i)&&((Xi(r)!=="body"||ya(o))&&(l=tu(r)),Kn(r))){const f=ks(r);c=gi(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function iI(t){return Array.from(t.getClientRects())}function Gf(t,e){const n=tu(t).scrollLeft;return e?e.left+n:ks(Wn(t)).left+n}function oI(t){const e=Wn(t),n=tu(t),r=t.ownerDocument.body,s=Ut(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ut(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Gf(t);const a=-n.scrollTop;return Sn(r).direction==="rtl"&&(o+=Ut(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function aI(t,e){const n=jt(t),r=Wn(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Bp();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function lI(t,e){const n=ks(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Kn(t)?gi(t):Wr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function qg(t,e,n){let r;if(e==="viewport")r=aI(t,n);else if(e==="document")r=oI(Wn(t));else if(En(e))r=lI(e,n);else{const s=aS(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return pc(r)}function lS(t,e){const n=qr(t);return n===e||!En(n)||$i(n)?!1:Sn(n).position==="fixed"||lS(n,e)}function cI(t,e){const n=e.get(t);if(n)return n;let r=Qo(t,[],!1).filter(a=>En(a)&&Xi(a)!=="body"),s=null;const i=Sn(t).position==="fixed";let o=i?qr(t):t;for(;En(o)&&!$i(o);){const a=Sn(o),l=Up(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ya(o)&&!l&&lS(t,o))?r=r.filter(u=>u!==o):s=a,o=qr(o)}return e.set(t,r),r}function uI(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?eu(e)?[]:cI(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=qg(e,u,s);return c.top=Ut(d.top,c.top),c.right=zr(d.right,c.right),c.bottom=zr(d.bottom,c.bottom),c.left=Ut(d.left,c.left),c},qg(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dI(t){const{width:e,height:n}=oS(t);return{width:e,height:n}}function fI(t,e,n){const r=Kn(e),s=Wn(e),i=n==="fixed",o=ks(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Wr(0);if(r||!r&&!i)if((Xi(e)!=="body"||ya(s))&&(a=tu(e)),r){const m=ks(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=Gf(s));let c=0,u=0;if(s&&!r&&!i){const m=s.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-Gf(s,m)}const d=o.left+a.scrollLeft-l.x-c,f=o.top+a.scrollTop-l.y-u;return{x:d,y:f,width:o.width,height:o.height}}function Ju(t){return Sn(t).position==="static"}function Xg(t,e){if(!Kn(t)||Sn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Wn(t)===n&&(n=n.ownerDocument.body),n}function cS(t,e){const n=jt(t);if(eu(t))return n;if(!Kn(t)){let s=qr(t);for(;s&&!$i(s);){if(En(s)&&!Ju(s))return s;s=qr(s)}return n}let r=Xg(t,e);for(;r&&eI(r)&&Ju(r);)r=Xg(r,e);return r&&$i(r)&&Ju(r)&&!Up(r)?n:r||tI(t)||n}const hI=async function(t){const e=this.getOffsetParent||cS,n=this.getDimensions,r=await n(t.floating);return{reference:fI(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pI(t){return Sn(t).direction==="rtl"}const mI={convertOffsetParentRelativeRectToViewportRelativeRect:sI,getDocumentElement:Wn,getClippingRect:uI,getOffsetParent:cS,getElementRects:hI,getClientRects:iI,getDimensions:dI,getScale:gi,isElement:En,isRTL:pI};function gI(t,e){let n=null,r;const s=Wn(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const m=Wa(u),p=Wa(s.clientWidth-(c+d)),h=Wa(s.clientHeight-(u+f)),g=Wa(c),v={rootMargin:-m+"px "+-p+"px "+-h+"px "+-g+"px",threshold:Ut(0,zr(1,l))||1};let x=!0;function b(T){const A=T[0].intersectionRatio;if(A!==l){if(!x)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(b,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,v)}n.observe(t)}return o(!0),i}function yI(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$p(t),u=s||i?[...c?Qo(c):[],...Qo(e)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const d=c&&a?gI(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let p,h=l?ks(t):null;l&&g();function g(){const y=ks(t);h&&(y.x!==h.x||y.y!==h.y||y.width!==h.width||y.height!==h.height)&&n(),h=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(p)}}const vI=XL,xI=QL,EI=WL,SI=ZL,TI=YL,Qg=zL,wI=JL,bI=(t,e,n)=>{const r=new Map,s={platform:mI,...n},i={...s.platform,_c:r};return KL(t,e,{...s,platform:i})};var Al=typeof document<"u"?E.useLayoutEffect:E.useEffect;function mc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mc(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!mc(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function uS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Jg(t,e){const n=uS(t);return Math.round(e*n)/n}function Zu(t){const e=E.useRef(t);return Al(()=>{e.current=t}),e}function RI(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=E.useState(r);mc(f,r)||m(r);const[p,h]=E.useState(null),[g,y]=E.useState(null),v=E.useCallback(D=>{D!==A.current&&(A.current=D,h(D))},[]),x=E.useCallback(D=>{D!==R.current&&(R.current=D,y(D))},[]),b=i||p,T=o||g,A=E.useRef(null),R=E.useRef(null),C=E.useRef(u),k=l!=null,L=Zu(l),_=Zu(s),$=Zu(c),j=E.useCallback(()=>{if(!A.current||!R.current)return;const D={placement:e,strategy:n,middleware:f};_.current&&(D.platform=_.current),bI(A.current,R.current,D).then(N=>{const U={...N,isPositioned:$.current!==!1};B.current&&!mc(C.current,U)&&(C.current=U,Ms.flushSync(()=>{d(U)}))})},[f,e,n,_,$]);Al(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(D=>({...D,isPositioned:!1})))},[c]);const B=E.useRef(!1);Al(()=>(B.current=!0,()=>{B.current=!1}),[]),Al(()=>{if(b&&(A.current=b),T&&(R.current=T),b&&T){if(L.current)return L.current(b,T,j);j()}},[b,T,j,L,k]);const K=E.useMemo(()=>({reference:A,floating:R,setReference:v,setFloating:x}),[v,x]),G=E.useMemo(()=>({reference:b,floating:T}),[b,T]),Y=E.useMemo(()=>{const D={position:n,left:0,top:0};if(!G.floating)return D;const N=Jg(G.floating,u.x),U=Jg(G.floating,u.y);return a?{...D,transform:"translate("+N+"px, "+U+"px)",...uS(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:N,top:U}},[n,a,G.floating,u.x,u.y]);return E.useMemo(()=>({...u,update:j,refs:K,elements:G,floatingStyles:Y}),[u,j,K,G,Y])}const AI=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Qg({element:r.current,padding:s}).fn(n):{}:r?Qg({element:r,padding:s}).fn(n):{}}}},CI=(t,e)=>({...vI(t),options:[t,e]}),LI=(t,e)=>({...xI(t),options:[t,e]}),II=(t,e)=>({...wI(t),options:[t,e]}),kI=(t,e)=>({...EI(t),options:[t,e]}),DI=(t,e)=>({...SI(t),options:[t,e]}),PI=(t,e)=>({...TI(t),options:[t,e]}),_I=(t,e)=>({...AI(t),options:[t,e]});var OI="Arrow",dS=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return w.jsx(Ae.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});dS.displayName=OI;var NI=dS;function FI(t,e=[]){let n=[];function r(i,o){const a=E.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:m,...p}=d,h=(f==null?void 0:f[t][l])||a,g=E.useMemo(()=>p,Object.values(p));return w.jsx(h.Provider,{value:g,children:m})}function u(d,f){const m=(f==null?void 0:f[t][l])||a,p=E.useContext(m);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,u]}const s=()=>{const i=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,MI(s,...e)]}function MI(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function UI(t){const[e,n]=E.useState(void 0);return gt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var jp="Popper",[fS,nu]=FI(jp),[BI,hS]=fS(jp),pS=t=>{const{__scopePopper:e,children:n}=t,[r,s]=E.useState(null);return w.jsx(BI,{scope:e,anchor:r,onAnchorChange:s,children:n})};pS.displayName=jp;var mS="PopperAnchor",gS=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=hS(mS,n),o=E.useRef(null),a=Ve(e,o);return E.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:w.jsx(Ae.div,{...s,ref:a})});gS.displayName=mS;var Gp="PopperContent",[$I,jI]=fS(Gp),yS=E.forwardRef((t,e)=>{var Q,fe,Ce,xe,Se,Ee;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...h}=t,g=hS(Gp,n),[y,v]=E.useState(null),x=Ve(e,vt=>v(vt)),[b,T]=E.useState(null),A=UI(b),R=(A==null?void 0:A.width)??0,C=(A==null?void 0:A.height)??0,k=r+(i!=="center"?"-"+i:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},_=Array.isArray(c)?c:[c],$=_.length>0,j={padding:L,boundary:_.filter(VI),altBoundary:$},{refs:B,floatingStyles:K,placement:G,isPositioned:Y,middlewareData:D}=RI({strategy:"fixed",placement:k,whileElementsMounted:(...vt)=>yI(...vt,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[CI({mainAxis:s+C,alignmentAxis:o}),l&&LI({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?II():void 0,...j}),l&&kI({...j}),DI({...j,apply:({elements:vt,rects:Ot,availableWidth:fr,availableHeight:Wt})=>{const{width:ns,height:vu}=Ot.reference,rt=vt.floating.style;rt.setProperty("--radix-popper-available-width",`${fr}px`),rt.setProperty("--radix-popper-available-height",`${Wt}px`),rt.setProperty("--radix-popper-anchor-width",`${ns}px`),rt.setProperty("--radix-popper-anchor-height",`${vu}px`)}}),b&&_I({element:b,padding:a}),HI({arrowWidth:R,arrowHeight:C}),f&&PI({strategy:"referenceHidden",...j})]}),[N,U]=ES(G),H=Ht(p);gt(()=>{Y&&(H==null||H())},[Y,H]);const z=(Q=D.arrow)==null?void 0:Q.x,X=(fe=D.arrow)==null?void 0:fe.y,se=((Ce=D.arrow)==null?void 0:Ce.centerOffset)!==0,[de,te]=E.useState();return gt(()=>{y&&te(window.getComputedStyle(y).zIndex)},[y]),w.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Y?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(xe=D.transformOrigin)==null?void 0:xe.x,(Se=D.transformOrigin)==null?void 0:Se.y].join(" "),...((Ee=D.hide)==null?void 0:Ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx($I,{scope:n,placedSide:N,onArrowChange:T,arrowX:z,arrowY:X,shouldHideArrow:se,children:w.jsx(Ae.div,{"data-side":N,"data-align":U,...h,ref:x,style:{...h.style,animation:Y?void 0:"none"}})})})});yS.displayName=Gp;var vS="PopperArrow",GI={top:"bottom",right:"left",bottom:"top",left:"right"},xS=E.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=jI(vS,r),o=GI[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(NI,{...s,ref:n,style:{...s.style,display:"block"}})})});xS.displayName=vS;function VI(t){return t!==null}var HI=t=>({name:"transformOrigin",options:t,fn(e){var g,y,v;const{placement:n,rects:r,middlewareData:s}=e,o=((g=s.arrow)==null?void 0:g.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=ES(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,m=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let p="",h="";return c==="bottom"?(p=o?d:`${f}px`,h=`${-l}px`):c==="top"?(p=o?d:`${f}px`,h=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,h=o?d:`${m}px`):c==="left"&&(p=`${r.floating.width+l}px`,h=o?d:`${m}px`),{data:{x:p,y:h}}}});function ES(t){const[e,n="center"]=t.split("-");return[e,n]}var KI=pS,SS=gS,TS=yS,wS=xS,[ru,kU]=Cp("Tooltip",[nu]),Vp=nu(),bS="TooltipProvider",zI=700,Zg="tooltip.open",[WI,RS]=ru(bS),AS=t=>{const{__scopeTooltip:e,delayDuration:n=zI,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=E.useState(!0),l=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),w.jsx(WI,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:E.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};AS.displayName=bS;var CS="Tooltip",[DU,su]=ru(CS),Vf="TooltipTrigger",YI=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=su(Vf,n),i=RS(Vf,n),o=Vp(n),a=E.useRef(null),l=Ve(e,a,s.onTriggerChange),c=E.useRef(!1),u=E.useRef(!1),d=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),w.jsx(SS,{asChild:!0,...o,children:w.jsx(Ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:pe(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:pe(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});YI.displayName=Vf;var qI="TooltipPortal",[PU,XI]=ru(qI,{forceMount:void 0}),ji="TooltipContent",LS=E.forwardRef((t,e)=>{const n=XI(ji,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=su(ji,t.__scopeTooltip);return w.jsx(Ip,{present:r||o.open,children:o.disableHoverableContent?w.jsx(IS,{side:s,...i,ref:e}):w.jsx(QI,{side:s,...i,ref:e})})}),QI=E.forwardRef((t,e)=>{const n=su(ji,t.__scopeTooltip),r=RS(ji,t.__scopeTooltip),s=E.useRef(null),i=Ve(e,s),[o,a]=E.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,f=E.useCallback(()=>{a(null),d(!1)},[d]),m=E.useCallback((p,h)=>{const g=p.currentTarget,y={x:p.clientX,y:p.clientY},v=tk(y,g.getBoundingClientRect()),x=nk(y,v),b=rk(h.getBoundingClientRect()),T=ik([...x,...b]);a(T),d(!0)},[d]);return E.useEffect(()=>()=>f(),[f]),E.useEffect(()=>{if(l&&u){const p=g=>m(g,u),h=g=>m(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",h),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",h)}}},[l,u,m,f]),E.useEffect(()=>{if(o){const p=h=>{const g=h.target,y={x:h.clientX,y:h.clientY},v=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),x=!sk(y,o);v?f():x&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,f]),w.jsx(IS,{...t,ref:i})}),[JI,ZI]=ru(CS,{isInside:!1}),IS=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=su(ji,n),c=Vp(n),{onClose:u}=l;return E.useEffect(()=>(document.addEventListener(Zg,u),()=>document.removeEventListener(Zg,u)),[u]),E.useEffect(()=>{if(l.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),w.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:w.jsxs(TS,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(pE,{children:r}),w.jsx(JI,{scope:n,isInside:!0,children:w.jsx(GA,{id:l.contentId,role:"tooltip",children:s||r})})]})})});LS.displayName=ji;var kS="TooltipArrow",ek=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Vp(n);return ZI(kS,n).isInside?null:w.jsx(wS,{...s,...r,ref:e})});ek.displayName=kS;function tk(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nk(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function rk(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function sk(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function ik(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ok(e)}function ok(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var ak=AS,DS=LS;const lk=ak,ck=E.forwardRef(({className:t,sideOffset:e=4,...n},r)=>w.jsx(DS,{ref:r,sideOffset:e,className:yt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ck.displayName=DS.displayName;var va=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ds=typeof window>"u"||"Deno"in globalThis;function Xt(){}function uk(t,e){return typeof t=="function"?t(e):t}function Hf(t){return typeof t=="number"&&t>=0&&t!==1/0}function PS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yi(t,e){return typeof t=="function"?t(e):t}function pn(t,e){return typeof t=="function"?t(e):t}function e0(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Hp(o,e.options))return!1}else if(!Zo(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function t0(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Jo(e.options.mutationKey)!==Jo(i))return!1}else if(!Zo(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Hp(t,e){return((e==null?void 0:e.queryKeyHashFn)||Jo)(t)}function Jo(t){return JSON.stringify(t,(e,n)=>zf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Zo(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Zo(t[n],e[n])):!1}function _S(t,e){if(t===e)return t;const n=n0(t)&&n0(e);if(n||zf(t)&&zf(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:i[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=_S(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Kf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function n0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zf(t){if(!r0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!r0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function r0(t){return Object.prototype.toString.call(t)==="[object Object]"}function dk(t){return new Promise(e=>{setTimeout(e,t)})}function Wf(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?_S(t,e):e}function fk(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function hk(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Kp=Symbol();function OS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Kp?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var hs,Rr,Ei,Gy,pk=(Gy=class extends va{constructor(){super();oe(this,hs);oe(this,Rr);oe(this,Ei);ee(this,Ei,e=>{if(!Ds&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){I(this,Rr)||this.setEventListener(I(this,Ei))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,Rr))==null||e.call(this),ee(this,Rr,void 0))}setEventListener(e){var n;ee(this,Ei,e),(n=I(this,Rr))==null||n.call(this),ee(this,Rr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){I(this,hs)!==e&&(ee(this,hs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof I(this,hs)=="boolean"?I(this,hs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},hs=new WeakMap,Rr=new WeakMap,Ei=new WeakMap,Gy),zp=new pk,Si,Ar,Ti,Vy,mk=(Vy=class extends va{constructor(){super();oe(this,Si,!0);oe(this,Ar);oe(this,Ti);ee(this,Ti,e=>{if(!Ds&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){I(this,Ar)||this.setEventListener(I(this,Ti))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,Ar))==null||e.call(this),ee(this,Ar,void 0))}setEventListener(e){var n;ee(this,Ti,e),(n=I(this,Ar))==null||n.call(this),ee(this,Ar,e(this.setOnline.bind(this)))}setOnline(e){I(this,Si)!==e&&(ee(this,Si,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return I(this,Si)}},Si=new WeakMap,Ar=new WeakMap,Ti=new WeakMap,Vy),gc=new mk;function Yf(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function gk(t){return Math.min(1e3*2**t,3e4)}function NS(t){return(t??"online")==="online"?gc.isOnline():!0}var FS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ed(t){return t instanceof FS}function MS(t){let e=!1,n=0,r=!1,s;const i=Yf(),o=h=>{var g;r||(f(new FS(h)),(g=t.abort)==null||g.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>zp.isFocused()&&(t.networkMode==="always"||gc.isOnline())&&t.canRun(),u=()=>NS(t.networkMode)&&t.canRun(),d=h=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,h),s==null||s(),i.resolve(h))},f=h=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,h),s==null||s(),i.reject(h))},m=()=>new Promise(h=>{var g;s=y=>{(r||c())&&h(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var h;s=void 0,r||(h=t.onContinue)==null||h.call(t)}),p=()=>{if(r)return;let h;const g=n===0?t.initialPromise:void 0;try{h=g??t.fn()}catch(y){h=Promise.reject(y)}Promise.resolve(h).then(d).catch(y=>{var A;if(r)return;const v=t.retry??(Ds?0:3),x=t.retryDelay??gk,b=typeof x=="function"?x(n,y):x,T=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!T){f(y);return}n++,(A=t.onFail)==null||A.call(t,n,y),dk(b).then(()=>c()?void 0:m()).then(()=>{e?f(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():m().then(p),i)}}function yk(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ot=yk(),ps,Hy,US=(Hy=class{constructor(){oe(this,ps)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hf(this.gcTime)&&ee(this,ps,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ds?1/0:5*60*1e3))}clearGcTimeout(){I(this,ps)&&(clearTimeout(I(this,ps)),ee(this,ps,void 0))}},ps=new WeakMap,Hy),wi,bi,qt,ft,aa,ms,dn,Qn,Ky,vk=(Ky=class extends US{constructor(e){super();oe(this,dn);oe(this,wi);oe(this,bi);oe(this,qt);oe(this,ft);oe(this,aa);oe(this,ms);ee(this,ms,!1),ee(this,aa,e.defaultOptions),this.setOptions(e.options),this.observers=[],ee(this,qt,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ee(this,wi,xk(this.options)),this.state=e.state??I(this,wi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=I(this,ft))==null?void 0:e.promise}setOptions(e){this.options={...I(this,aa),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,qt).remove(this)}setData(e,n){const r=Wf(this.state.data,e,this.options);return me(this,dn,Qn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){me(this,dn,Qn).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=I(this,ft))==null?void 0:r.promise;return(s=I(this,ft))==null||s.cancel(e),n?n.then(Xt).catch(Xt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,wi))}isActive(){return this.observers.some(e=>pn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Kp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!PS(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=I(this,ft))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=I(this,ft))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),I(this,qt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(I(this,ft)&&(I(this,ms)?I(this,ft).cancel({revert:!0}):I(this,ft).cancelRetry()),this.scheduleGc()),I(this,qt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||me(this,dn,Qn).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(I(this,ft))return I(this,ft).continueRetry(),I(this,ft).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ee(this,ms,!0),r.signal)})},i=()=>{const d=OS(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return s(f),ee(this,ms,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),ee(this,bi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&me(this,dn,Qn).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,m,p,h;ed(d)&&d.silent||me(this,dn,Qn).call(this,{type:"error",error:d}),ed(d)||((m=(f=I(this,qt).config).onError)==null||m.call(f,d,this),(h=(p=I(this,qt).config).onSettled)==null||h.call(p,this.state.data,d,this)),this.scheduleGc()};return ee(this,ft,MS({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,m,p,h;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(g){a(g);return}(m=(f=I(this,qt).config).onSuccess)==null||m.call(f,d,this),(h=(p=I(this,qt).config).onSettled)==null||h.call(p,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{me(this,dn,Qn).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{me(this,dn,Qn).call(this,{type:"pause"})},onContinue:()=>{me(this,dn,Qn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),I(this,ft).start()}},wi=new WeakMap,bi=new WeakMap,qt=new WeakMap,ft=new WeakMap,aa=new WeakMap,ms=new WeakMap,dn=new WeakSet,Qn=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...BS(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return ed(s)&&s.revert&&I(this,bi)?{...I(this,bi),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ot.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),I(this,qt).notify({query:this,type:"updated",action:e})})},Ky);function BS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xk(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _n,zy,Ek=(zy=class extends va{constructor(e={}){super();oe(this,_n);this.config=e,ee(this,_n,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Hp(s,n);let o=this.get(i);return o||(o=new vk({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){I(this,_n).has(e.queryHash)||(I(this,_n).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=I(this,_n).get(e.queryHash);n&&(e.destroy(),n===e&&I(this,_n).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ot.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return I(this,_n).get(e)}getAll(){return[...I(this,_n).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>e0(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>e0(e,r)):n}notify(e){ot.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ot.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ot.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_n=new WeakMap,zy),On,xt,gs,Nn,vr,Wy,Sk=(Wy=class extends US{constructor(e){super();oe(this,Nn);oe(this,On);oe(this,xt);oe(this,gs);this.mutationId=e.mutationId,ee(this,xt,e.mutationCache),ee(this,On,[]),this.state=e.state||Tk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){I(this,On).includes(e)||(I(this,On).push(e),this.clearGcTimeout(),I(this,xt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ee(this,On,I(this,On).filter(n=>n!==e)),this.scheduleGc(),I(this,xt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){I(this,On).length||(this.state.status==="pending"?this.scheduleGc():I(this,xt).remove(this))}continue(){var e;return((e=I(this,gs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,c,u,d,f,m,p,h,g,y,v,x,b,T,A,R;ee(this,gs,MS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{me(this,Nn,vr).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{me(this,Nn,vr).call(this,{type:"pause"})},onContinue:()=>{me(this,Nn,vr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,xt).canRun(this)}));const n=this.state.status==="pending",r=!I(this,gs).canStart();try{if(!n){me(this,Nn,vr).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=I(this,xt).config).onMutate)==null?void 0:i.call(s,e,this));const k=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));k!==this.state.context&&me(this,Nn,vr).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const C=await I(this,gs).start();return await((c=(l=I(this,xt).config).onSuccess)==null?void 0:c.call(l,C,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,C,e,this.state.context)),await((m=(f=I(this,xt).config).onSettled)==null?void 0:m.call(f,C,null,this.state.variables,this.state.context,this)),await((h=(p=this.options).onSettled)==null?void 0:h.call(p,C,null,e,this.state.context)),me(this,Nn,vr).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(g=I(this,xt).config).onError)==null?void 0:y.call(g,C,e,this.state.context,this)),await((x=(v=this.options).onError)==null?void 0:x.call(v,C,e,this.state.context)),await((T=(b=I(this,xt).config).onSettled)==null?void 0:T.call(b,void 0,C,this.state.variables,this.state.context,this)),await((R=(A=this.options).onSettled)==null?void 0:R.call(A,void 0,C,e,this.state.context)),C}finally{me(this,Nn,vr).call(this,{type:"error",error:C})}}finally{I(this,xt).runNext(this)}}},On=new WeakMap,xt=new WeakMap,gs=new WeakMap,Nn=new WeakSet,vr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ot.batch(()=>{I(this,On).forEach(r=>{r.onMutationUpdate(e)}),I(this,xt).notify({mutation:this,type:"updated",action:e})})},Wy);function Tk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nt,la,Yy,wk=(Yy=class extends va{constructor(e={}){super();oe(this,Nt);oe(this,la);this.config=e,ee(this,Nt,new Map),ee(this,la,Date.now())}build(e,n,r){const s=new Sk({mutationCache:this,mutationId:++Aa(this,la)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ya(e),r=I(this,Nt).get(n)??[];r.push(e),I(this,Nt).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ya(e);if(I(this,Nt).has(n)){const s=(r=I(this,Nt).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?I(this,Nt).delete(n):I(this,Nt).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=I(this,Nt).get(Ya(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=I(this,Nt).get(Ya(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ot.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...I(this,Nt).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>t0(n,r))}findAll(e={}){return this.getAll().filter(n=>t0(e,n))}notify(e){ot.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ot.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xt))))}},Nt=new WeakMap,la=new WeakMap,Yy);function Ya(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function s0(t){return{onFetch:(e,n)=>{var u,d,f,m,p;const r=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let h=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?h=!0:e.signal.addEventListener("abort",()=>{h=!0}),e.signal)})},y=OS(e.options,e.fetchOptions),v=async(x,b,T)=>{if(h)return Promise.reject();if(b==null&&x.pages.length)return Promise.resolve(x);const A={queryKey:e.queryKey,pageParam:b,direction:T?"backward":"forward",meta:e.options.meta};g(A);const R=await y(A),{maxPages:C}=e.options,k=T?hk:fk;return{pages:k(x.pages,R,C),pageParams:k(x.pageParams,b,C)}};if(s&&i.length){const x=s==="backward",b=x?bk:i0,T={pages:i,pageParams:o},A=b(r,T);a=await v(T,A,x)}else{const x=t??i.length;do{const b=l===0?o[0]??r.initialPageParam:i0(r,a);if(l>0&&b==null)break;a=await v(a,b),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var h,g;return(g=(h=e.options).persister)==null?void 0:g.call(h,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function i0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bk(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var je,Cr,Lr,Ri,Ai,Ir,Ci,Li,qy,Rk=(qy=class{constructor(t={}){oe(this,je);oe(this,Cr);oe(this,Lr);oe(this,Ri);oe(this,Ai);oe(this,Ir);oe(this,Ci);oe(this,Li);ee(this,je,t.queryCache||new Ek),ee(this,Cr,t.mutationCache||new wk),ee(this,Lr,t.defaultOptions||{}),ee(this,Ri,new Map),ee(this,Ai,new Map),ee(this,Ir,0)}mount(){Aa(this,Ir)._++,I(this,Ir)===1&&(ee(this,Ci,zp.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,je).onFocus())})),ee(this,Li,gc.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,je).onOnline())})))}unmount(){var t,e;Aa(this,Ir)._--,I(this,Ir)===0&&((t=I(this,Ci))==null||t.call(this),ee(this,Ci,void 0),(e=I(this,Li))==null||e.call(this),ee(this,Li,void 0))}isFetching(t){return I(this,je).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,Cr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=I(this,je).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=I(this,je).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(yi(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return I(this,je).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=I(this,je).get(r.queryHash),i=s==null?void 0:s.state.data,o=uk(e,i);if(o!==void 0)return I(this,je).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ot.batch(()=>I(this,je).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=I(this,je).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=I(this,je);ot.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=I(this,je),r={type:"active",...t};return ot.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=ot.batch(()=>I(this,je).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xt).catch(Xt)}invalidateQueries(t={},e={}){return ot.batch(()=>{if(I(this,je).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ot.batch(()=>I(this,je).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=I(this,je).build(this,e);return n.isStaleByTime(yi(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xt).catch(Xt)}fetchInfiniteQuery(t){return t.behavior=s0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xt).catch(Xt)}ensureInfiniteQueryData(t){return t.behavior=s0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gc.isOnline()?I(this,Cr).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,je)}getMutationCache(){return I(this,Cr)}getDefaultOptions(){return I(this,Lr)}setDefaultOptions(t){ee(this,Lr,t)}setQueryDefaults(t,e){I(this,Ri).set(Jo(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...I(this,Ri).values()];let n={};return e.forEach(r=>{Zo(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){I(this,Ai).set(Jo(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...I(this,Ai).values()];let n={};return e.forEach(r=>{Zo(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...I(this,Lr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Hp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Kp&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,Lr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,je).clear(),I(this,Cr).clear()}},je=new WeakMap,Cr=new WeakMap,Lr=new WeakMap,Ri=new WeakMap,Ai=new WeakMap,Ir=new WeakMap,Ci=new WeakMap,Li=new WeakMap,qy),At,ge,ca,Et,ys,Ii,kr,Fn,ua,ki,Di,vs,xs,Dr,Pi,we,vo,qf,Xf,Qf,Jf,Zf,eh,th,$S,Xy,Ak=(Xy=class extends va{constructor(e,n){super();oe(this,we);oe(this,At);oe(this,ge);oe(this,ca);oe(this,Et);oe(this,ys);oe(this,Ii);oe(this,kr);oe(this,Fn);oe(this,ua);oe(this,ki);oe(this,Di);oe(this,vs);oe(this,xs);oe(this,Dr);oe(this,Pi,new Set);this.options=n,ee(this,At,e),ee(this,Fn,null),ee(this,kr,Yf()),this.options.experimental_prefetchInRender||I(this,kr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,ge).addObserver(this),o0(I(this,ge),this.options)?me(this,we,vo).call(this):this.updateResult(),me(this,we,Jf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nh(I(this,ge),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nh(I(this,ge),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,me(this,we,Zf).call(this),me(this,we,eh).call(this),I(this,ge).removeObserver(this)}setOptions(e,n){const r=this.options,s=I(this,ge);if(this.options=I(this,At).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pn(this.options.enabled,I(this,ge))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");me(this,we,th).call(this),I(this,ge).setOptions(this.options),r._defaulted&&!Kf(this.options,r)&&I(this,At).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,ge),observer:this});const i=this.hasListeners();i&&a0(I(this,ge),s,this.options,r)&&me(this,we,vo).call(this),this.updateResult(n),i&&(I(this,ge)!==s||pn(this.options.enabled,I(this,ge))!==pn(r.enabled,I(this,ge))||yi(this.options.staleTime,I(this,ge))!==yi(r.staleTime,I(this,ge)))&&me(this,we,qf).call(this);const o=me(this,we,Xf).call(this);i&&(I(this,ge)!==s||pn(this.options.enabled,I(this,ge))!==pn(r.enabled,I(this,ge))||o!==I(this,Dr))&&me(this,we,Qf).call(this,o)}getOptimisticResult(e){const n=I(this,At).getQueryCache().build(I(this,At),e),r=this.createResult(n,e);return Lk(this,r)&&(ee(this,Et,r),ee(this,Ii,this.options),ee(this,ys,I(this,ge).state)),r}getCurrentResult(){return I(this,Et)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){I(this,Pi).add(e)}getCurrentQuery(){return I(this,ge)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=I(this,At).defaultQueryOptions(e),r=I(this,At).getQueryCache().build(I(this,At),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return me(this,we,vo).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,Et)))}createResult(e,n){var C;const r=I(this,ge),s=this.options,i=I(this,Et),o=I(this,ys),a=I(this,Ii),c=e!==r?e.state:I(this,ca),{state:u}=e;let d={...u},f=!1,m;if(n._optimisticResults){const k=this.hasListeners(),L=!k&&o0(e,n),_=k&&a0(e,r,n,s);(L||_)&&(d={...d,...BS(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:h,status:g}=d;if(n.select&&d.data!==void 0)if(i&&d.data===(o==null?void 0:o.data)&&n.select===I(this,ua))m=I(this,ki);else try{ee(this,ua,n.select),m=n.select(d.data),m=Wf(i==null?void 0:i.data,m,n),ee(this,ki,m),ee(this,Fn,null)}catch(k){ee(this,Fn,k)}else m=d.data;if(n.placeholderData!==void 0&&m===void 0&&g==="pending"){let k;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))k=i.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((C=I(this,Di))==null?void 0:C.state.data,I(this,Di)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),ee(this,Fn,null)}catch(L){ee(this,Fn,L)}k!==void 0&&(g="success",m=Wf(i==null?void 0:i.data,k,n),f=!0)}I(this,Fn)&&(p=I(this,Fn),m=I(this,ki),h=Date.now(),g="error");const y=d.fetchStatus==="fetching",v=g==="pending",x=g==="error",b=v&&y,T=m!==void 0,R={status:g,fetchStatus:d.fetchStatus,isPending:v,isSuccess:g==="success",isError:x,isInitialLoading:b,isLoading:b,data:m,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:h,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:x&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&T,isStale:Wp(e,n),refetch:this.refetch,promise:I(this,kr)};if(this.options.experimental_prefetchInRender){const k=$=>{R.status==="error"?$.reject(R.error):R.data!==void 0&&$.resolve(R.data)},L=()=>{const $=ee(this,kr,R.promise=Yf());k($)},_=I(this,kr);switch(_.status){case"pending":e.queryHash===r.queryHash&&k(_);break;case"fulfilled":(R.status==="error"||R.data!==_.value)&&L();break;case"rejected":(R.status!=="error"||R.error!==_.reason)&&L();break}}return R}updateResult(e){const n=I(this,Et),r=this.createResult(I(this,ge),this.options);if(ee(this,ys,I(this,ge).state),ee(this,Ii,this.options),I(this,ys).data!==void 0&&ee(this,Di,I(this,ge)),Kf(r,n))return;ee(this,Et,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!I(this,Pi).size)return!0;const l=new Set(a??I(this,Pi));return this.options.throwOnError&&l.add("error"),Object.keys(I(this,Et)).some(c=>{const u=c;return I(this,Et)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),me(this,we,$S).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&me(this,we,Jf).call(this)}},At=new WeakMap,ge=new WeakMap,ca=new WeakMap,Et=new WeakMap,ys=new WeakMap,Ii=new WeakMap,kr=new WeakMap,Fn=new WeakMap,ua=new WeakMap,ki=new WeakMap,Di=new WeakMap,vs=new WeakMap,xs=new WeakMap,Dr=new WeakMap,Pi=new WeakMap,we=new WeakSet,vo=function(e){me(this,we,th).call(this);let n=I(this,ge).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Xt)),n},qf=function(){me(this,we,Zf).call(this);const e=yi(this.options.staleTime,I(this,ge));if(Ds||I(this,Et).isStale||!Hf(e))return;const r=PS(I(this,Et).dataUpdatedAt,e)+1;ee(this,vs,setTimeout(()=>{I(this,Et).isStale||this.updateResult()},r))},Xf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,ge)):this.options.refetchInterval)??!1},Qf=function(e){me(this,we,eh).call(this),ee(this,Dr,e),!(Ds||pn(this.options.enabled,I(this,ge))===!1||!Hf(I(this,Dr))||I(this,Dr)===0)&&ee(this,xs,setInterval(()=>{(this.options.refetchIntervalInBackground||zp.isFocused())&&me(this,we,vo).call(this)},I(this,Dr)))},Jf=function(){me(this,we,qf).call(this),me(this,we,Qf).call(this,me(this,we,Xf).call(this))},Zf=function(){I(this,vs)&&(clearTimeout(I(this,vs)),ee(this,vs,void 0))},eh=function(){I(this,xs)&&(clearInterval(I(this,xs)),ee(this,xs,void 0))},th=function(){const e=I(this,At).getQueryCache().build(I(this,At),this.options);if(e===I(this,ge))return;const n=I(this,ge);ee(this,ge,e),ee(this,ca,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},$S=function(e){ot.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(I(this,Et))}),I(this,At).getQueryCache().notify({query:I(this,ge),type:"observerResultsUpdated"})})},Xy);function Ck(t,e){return pn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function o0(t,e){return Ck(t,e)||t.state.data!==void 0&&nh(t,e,e.refetchOnMount)}function nh(t,e,n){if(pn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Wp(t,e)}return!1}function a0(t,e,n,r){return(t!==e||pn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Wp(t,n)}function Wp(t,e){return pn(e.enabled,t)!==!1&&t.isStaleByTime(yi(e.staleTime,t))}function Lk(t,e){return!Kf(t.getCurrentResult(),e)}var jS=E.createContext(void 0),GS=t=>{const e=E.useContext(jS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ik=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(jS.Provider,{value:t,children:e})),VS=E.createContext(!1),kk=()=>E.useContext(VS);VS.Provider;function Dk(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Pk=E.createContext(Dk()),_k=()=>E.useContext(Pk);function Ok(t,e){return typeof t=="function"?t(...e):!!t}function Nk(){}var Fk=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},Mk=t=>{E.useEffect(()=>{t.clearReset()},[t])},Uk=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&Ok(n,[t.error,r]),Bk=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},$k=(t,e)=>t.isLoading&&t.isFetching&&!e,jk=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,l0=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Gk(t,e,n){var u,d,f,m,p;const r=GS(),s=kk(),i=_k(),o=r.defaultQueryOptions(t);(d=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||d.call(u,o),o._optimisticResults=s?"isRestoring":"optimistic",Bk(o),Fk(o,i),Mk(i);const a=!r.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new e(r,o)),c=l.getOptimisticResult(o);if(E.useSyncExternalStore(E.useCallback(h=>{const g=s?()=>{}:l.subscribe(ot.batchCalls(h));return l.updateResult(),g},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),jk(o,c))throw l0(o,l,i);if(Uk({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;if((m=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,o,c),o.experimental_prefetchInRender&&!Ds&&$k(c,s)){const h=a?l0(o,l,i):(p=r.getQueryCache().get(o.queryHash))==null?void 0:p.promise;h==null||h.catch(Nk).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function kn(t,e){return Gk(t,Ak)}/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ea.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const c0="popstate";function Vk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return rh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yc(s)}return Kk(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hk(){return Math.random().toString(36).substr(2,8)}function u0(t,e){return{usr:t.state,key:t.key,idx:e}}function rh(t,e,n,r){return n===void 0&&(n=null),ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qi(e):e,{state:n,key:e&&e.key||r||Hk()})}function yc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Kk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Or.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ea({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Or.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:a,location:h.location,delta:y})}function f(g,y){a=Or.Push;let v=rh(h.location,g,y);c=u()+1;let x=u0(v,c),b=h.createHref(v);try{o.pushState(x,"",b)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(b)}i&&l&&l({action:a,location:h.location,delta:1})}function m(g,y){a=Or.Replace;let v=rh(h.location,g,y);c=u();let x=u0(v,c),b=h.createHref(v);o.replaceState(x,"",b),i&&l&&l({action:a,location:h.location,delta:0})}function p(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof g=="string"?g:yc(g);return v=v.replace(/ $/,"%20"),ze(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let h={get action(){return a},get location(){return t(s,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(c0,d),l=g,()=>{s.removeEventListener(c0,d),l=null}},createHref(g){return e(s,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(g){return o.go(g)}};return h}var d0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(d0||(d0={}));function zk(t,e,n){return n===void 0&&(n="/"),Wk(t,e,n,!1)}function Wk(t,e,n,r){let s=typeof e=="string"?Qi(e):e,i=Yp(s.pathname||"/",n);if(i==null)return null;let o=KS(t);Yk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=iD(i);a=rD(o[l],c,r)}return a}function KS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vr([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KS(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:tD(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zS(i.path))s(i,o,l)}),e}function zS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Yk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qk=/^:[\w-]+$/,Xk=3,Qk=2,Jk=1,Zk=10,eD=-2,f0=t=>t==="*";function tD(t,e){let n=t.split("/"),r=n.length;return n.some(f0)&&(r+=eD),e&&(r+=Qk),n.filter(s=>!f0(s)).reduce((s,i)=>s+(qk.test(i)?Xk:i===""?Jk:Zk),r)}function nD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function rD(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=h0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=h0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Vr([i,d.pathname]),pathnameBase:cD(Vr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Vr([i,d.pathnameBase]))}return o}function h0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sD(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let h=a[d]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const p=a[d];return m&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function sD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function iD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Qi(t):t;return{pathname:n?n.startsWith("/")?n:aD(n,e):e,search:uD(r),hash:dD(s)}}function aD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function td(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WS(t,e){let n=lD(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function YS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Qi(t):(s=ea({},t),ze(!s.pathname||!s.pathname.includes("?"),td("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),td("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),td("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=oD(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Vr=t=>t.join("/").replace(/\/\/+/g,"/"),cD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qS=["post","put","patch","delete"];new Set(qS);const hD=["get",...qS];new Set(hD);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ta.apply(this,arguments)}const qp=E.createContext(null),pD=E.createContext(null),Us=E.createContext(null),iu=E.createContext(null),Zr=E.createContext({outlet:null,matches:[],isDataRoute:!1}),XS=E.createContext(null);function mD(t,e){let{relative:n}=e===void 0?{}:e;xa()||ze(!1);let{basename:r,navigator:s}=E.useContext(Us),{hash:i,pathname:o,search:a}=ZS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Vr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function xa(){return E.useContext(iu)!=null}function Ea(){return xa()||ze(!1),E.useContext(iu).location}function QS(t){E.useContext(Us).static||E.useLayoutEffect(t)}function Xp(){let{isDataRoute:t}=E.useContext(Zr);return t?LD():gD()}function gD(){xa()||ze(!1);let t=E.useContext(qp),{basename:e,future:n,navigator:r}=E.useContext(Us),{matches:s}=E.useContext(Zr),{pathname:i}=Ea(),o=JSON.stringify(WS(s,n.v7_relativeSplatPath)),a=E.useRef(!1);return QS(()=>{a.current=!0}),E.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=YS(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vr([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function JS(){let{matches:t}=E.useContext(Zr),e=t[t.length-1];return e?e.params:{}}function ZS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Us),{matches:s}=E.useContext(Zr),{pathname:i}=Ea(),o=JSON.stringify(WS(s,r.v7_relativeSplatPath));return E.useMemo(()=>YS(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function yD(t,e){return vD(t,e)}function vD(t,e,n,r){xa()||ze(!1);let{navigator:s}=E.useContext(Us),{matches:i}=E.useContext(Zr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ea(),u;if(e){var d;let g=typeof e=="string"?Qi(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||ze(!1),u=g}else u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=zk(t,{pathname:m}),h=wD(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Vr([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Vr([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&h?E.createElement(iu.Provider,{value:{location:ta({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Or.Pop}},h):h}function xD(){let t=CD(),e=fD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const ED=E.createElement(xD,null);class SD extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(Zr.Provider,{value:this.props.routeContext},E.createElement(XS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TD(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(qp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Zr.Provider,{value:e},r)}function wD(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||ze(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let m,p=!1,h=null,g=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,h=d.route.errorElement||ED,l&&(c<0&&f===0?(p=!0,g=null):c===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let x;return m?x=h:p?x=g:d.route.Component?x=E.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,E.createElement(TD,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?E.createElement(SD,{location:n.location,revalidation:n.revalidation,component:h,error:m,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var eT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eT||{}),vc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vc||{});function bD(t){let e=E.useContext(qp);return e||ze(!1),e}function RD(t){let e=E.useContext(pD);return e||ze(!1),e}function AD(t){let e=E.useContext(Zr);return e||ze(!1),e}function tT(t){let e=AD(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function CD(){var t;let e=E.useContext(XS),n=RD(vc.UseRouteError),r=tT(vc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LD(){let{router:t}=bD(eT.UseNavigateStable),e=tT(vc.UseNavigateStable),n=E.useRef(!1);return QS(()=>{n.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ta({fromRouteId:e},i)))},[t,e])}function xo(t){ze(!1)}function ID(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Or.Pop,navigator:i,static:o=!1,future:a}=t;xa()&&ze(!1);let l=e.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:i,static:o,future:ta({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Qi(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:p="default"}=r,h=E.useMemo(()=>{let g=Yp(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:m,key:p},navigationType:s}},[l,u,d,f,m,p,s]);return h==null?null:E.createElement(Us.Provider,{value:c},E.createElement(iu.Provider,{children:n,value:h}))}function kD(t){let{children:e,location:n}=t;return yD(sh(e),n)}new Promise(()=>{});function sh(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let i=[...e,s];if(r.type===E.Fragment){n.push.apply(n,sh(r.props.children,i));return}r.type!==xo&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ih.apply(this,arguments)}function DD(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function PD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _D(t,e){return t.button===0&&(!e||e==="_self")&&!PD(t)}const OD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ND="6";try{window.__reactRouterVersion=ND}catch{}const FD="startTransition",p0=lv[FD];function MD(t){let{basename:e,children:n,future:r,window:s}=t,i=E.useRef();i.current==null&&(i.current=Vk({window:s,v5Compat:!0}));let o=i.current,[a,l]=E.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=E.useCallback(d=>{c&&p0?p0(()=>l(d)):l(d)},[l,c]);return E.useLayoutEffect(()=>o.listen(u),[o,u]),E.createElement(ID,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const UD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nT=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=DD(e,OD),{basename:m}=E.useContext(Us),p,h=!1;if(typeof c=="string"&&BD.test(c)&&(p=c,UD))try{let x=new URL(window.location.href),b=c.startsWith("//")?new URL(x.protocol+c):new URL(c),T=Yp(b.pathname,m);b.origin===x.origin&&T!=null?c=T+b.search+b.hash:h=!0}catch{}let g=mD(c,{relative:s}),y=$D(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||y(x)}return E.createElement("a",ih({},f,{href:p||g,onClick:h||i?r:v,ref:n,target:l}))});var m0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(m0||(m0={}));var g0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(g0||(g0={}));function $D(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Xp(),c=Ea(),u=ZS(t,{relative:o});return E.useCallback(d=>{if(_D(d,n)){d.preventDefault();let f=r!==void 0?r:yc(c)===yc(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function rT(t,e){return function(){return t.apply(e,arguments)}}const{toString:jD}=Object.prototype,{getPrototypeOf:Qp}=Object,ou=(t=>e=>{const n=jD.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tn=t=>(t=t.toLowerCase(),e=>ou(e)===t),au=t=>e=>typeof e===t,{isArray:Ji}=Array,na=au("undefined");function GD(t){return t!==null&&!na(t)&&t.constructor!==null&&!na(t.constructor)&&Gt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const sT=Tn("ArrayBuffer");function VD(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sT(t.buffer),e}const HD=au("string"),Gt=au("function"),iT=au("number"),lu=t=>t!==null&&typeof t=="object",KD=t=>t===!0||t===!1,Cl=t=>{if(ou(t)!=="object")return!1;const e=Qp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zD=Tn("Date"),WD=Tn("File"),YD=Tn("Blob"),qD=Tn("FileList"),XD=t=>lu(t)&&Gt(t.pipe),QD=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gt(t.append)&&((e=ou(t))==="formdata"||e==="object"&&Gt(t.toString)&&t.toString()==="[object FormData]"))},JD=Tn("URLSearchParams"),[ZD,eP,tP,nP]=["ReadableStream","Request","Response","Headers"].map(Tn),rP=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ji(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function oT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aT=t=>!na(t)&&t!==ds;function oh(){const{caseless:t}=aT(this)&&this||{},e={},n=(r,s)=>{const i=t&&oT(e,s)||s;Cl(e[i])&&Cl(r)?e[i]=oh(e[i],r):Cl(r)?e[i]=oh({},r):Ji(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Sa(arguments[r],n);return e}const sP=(t,e,n,{allOwnKeys:r}={})=>(Sa(e,(s,i)=>{n&&Gt(s)?t[i]=rT(s,n):t[i]=s},{allOwnKeys:r}),t),iP=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),oP=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},aP=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Qp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},lP=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},cP=t=>{if(!t)return null;if(Ji(t))return t;let e=t.length;if(!iT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},uP=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Qp(Uint8Array)),dP=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},fP=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},hP=Tn("HTMLFormElement"),pP=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),mP=Tn("RegExp"),lT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Sa(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},gP=t=>{lT(t,(e,n)=>{if(Gt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Gt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},yP=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ji(t)?r(t):r(String(t).split(e)),n},vP=()=>{},xP=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,nd="abcdefghijklmnopqrstuvwxyz",v0="0123456789",cT={DIGIT:v0,ALPHA:nd,ALPHA_DIGIT:nd+nd.toUpperCase()+v0},EP=(t=16,e=cT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function SP(t){return!!(t&&Gt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const TP=t=>{const e=new Array(10),n=(r,s)=>{if(lu(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Ji(r)?[]:{};return Sa(r,(o,a)=>{const l=n(o,s+1);!na(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},wP=Tn("AsyncFunction"),bP=t=>t&&(lu(t)||Gt(t))&&Gt(t.then)&&Gt(t.catch),uT=((t,e)=>t?setImmediate:e?((n,r)=>(ds.addEventListener("message",({source:s,data:i})=>{s===ds&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ds.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gt(ds.postMessage)),RP=typeof queueMicrotask<"u"?queueMicrotask.bind(ds):typeof process<"u"&&process.nextTick||uT,M={isArray:Ji,isArrayBuffer:sT,isBuffer:GD,isFormData:QD,isArrayBufferView:VD,isString:HD,isNumber:iT,isBoolean:KD,isObject:lu,isPlainObject:Cl,isReadableStream:ZD,isRequest:eP,isResponse:tP,isHeaders:nP,isUndefined:na,isDate:zD,isFile:WD,isBlob:YD,isRegExp:mP,isFunction:Gt,isStream:XD,isURLSearchParams:JD,isTypedArray:uP,isFileList:qD,forEach:Sa,merge:oh,extend:sP,trim:rP,stripBOM:iP,inherits:oP,toFlatObject:aP,kindOf:ou,kindOfTest:Tn,endsWith:lP,toArray:cP,forEachEntry:dP,matchAll:fP,isHTMLForm:hP,hasOwnProperty:y0,hasOwnProp:y0,reduceDescriptors:lT,freezeMethods:gP,toObjectSet:yP,toCamelCase:pP,noop:vP,toFiniteNumber:xP,findKey:oT,global:ds,isContextDefined:aT,ALPHABET:cT,generateString:EP,isSpecCompliantForm:SP,toJSONObject:TP,isAsyncFn:wP,isThenable:bP,setImmediate:uT,asap:RP};function le(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}M.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const dT=le.prototype,fT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fT[t]={value:t}});Object.defineProperties(le,fT);Object.defineProperty(dT,"isAxiosError",{value:!0});le.from=(t,e,n,r,s,i)=>{const o=Object.create(dT);return M.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),le.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const AP=null;function ah(t){return M.isPlainObject(t)||M.isArray(t)}function hT(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function x0(t,e,n){return t?t.concat(e).map(function(s,i){return s=hT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function CP(t){return M.isArray(t)&&!t.some(ah)}const LP=M.toFlatObject(M,{},null,function(e){return/^is[A-Z]/.test(e)});function cu(t,e,n){if(!M.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,g){return!M.isUndefined(g[h])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(e);if(!M.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(M.isDate(p))return p.toISOString();if(!l&&M.isBlob(p))throw new le("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(p)||M.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,h,g){let y=p;if(p&&!g&&typeof p=="object"){if(M.endsWith(h,"{}"))h=r?h:h.slice(0,-2),p=JSON.stringify(p);else if(M.isArray(p)&&CP(p)||(M.isFileList(p)||M.endsWith(h,"[]"))&&(y=M.toArray(p)))return h=hT(h),y.forEach(function(x,b){!(M.isUndefined(x)||x===null)&&e.append(o===!0?x0([h],b,i):o===null?h:h+"[]",c(x))}),!1}return ah(p)?!0:(e.append(x0(g,h,i),c(p)),!1)}const d=[],f=Object.assign(LP,{defaultVisitor:u,convertValue:c,isVisitable:ah});function m(p,h){if(!M.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));d.push(p),M.forEach(p,function(y,v){(!(M.isUndefined(y)||y===null)&&s.call(e,y,M.isString(v)?v.trim():v,h,f))===!0&&m(y,h?h.concat(v):[v])}),d.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return m(t),e}function E0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Jp(t,e){this._pairs=[],t&&cu(t,this,e)}const pT=Jp.prototype;pT.append=function(e,n){this._pairs.push([e,n])};pT.toString=function(e){const n=e?function(r){return e.call(this,r,E0)}:E0;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function IP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mT(t,e,n){if(!e)return t;const r=n&&n.encode||IP;M.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=M.isURLSearchParams(e)?e.toString():new Jp(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class S0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kP=typeof URLSearchParams<"u"?URLSearchParams:Jp,DP=typeof FormData<"u"?FormData:null,PP=typeof Blob<"u"?Blob:null,_P={isBrowser:!0,classes:{URLSearchParams:kP,FormData:DP,Blob:PP},protocols:["http","https","file","blob","url","data"]},Zp=typeof window<"u"&&typeof document<"u",lh=typeof navigator=="object"&&navigator||void 0,OP=Zp&&(!lh||["ReactNative","NativeScript","NS"].indexOf(lh.product)<0),NP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FP=Zp&&window.location.href||"http://localhost",MP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zp,hasStandardBrowserEnv:OP,hasStandardBrowserWebWorkerEnv:NP,navigator:lh,origin:FP},Symbol.toStringTag,{value:"Module"})),pt={...MP,..._P};function UP(t,e){return cu(t,new pt.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return pt.isNode&&M.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function BP(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $P(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function yT(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&M.isArray(s)?s.length:o,l?(M.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!M.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&M.isArray(s[o])&&(s[o]=$P(s[o])),!a)}if(M.isFormData(t)&&M.isFunction(t.entries)){const n={};return M.forEachEntry(t,(r,s)=>{e(BP(r),s,n,0)}),n}return null}function jP(t,e,n){if(M.isString(t))try{return(e||JSON.parse)(t),M.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Ta={transitional:gT,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=M.isObject(e);if(i&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return s?JSON.stringify(yT(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e)||M.isReadableStream(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return UP(e,this.formSerializer).toString();if((a=M.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return cu(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),jP(e)):e}],transformResponse:[function(e){const n=this.transitional||Ta.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(M.isResponse(e)||M.isReadableStream(e))return e;if(e&&M.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?le.from(a,le.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{Ta.headers[t]={}});const GP=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VP=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&GP[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},T0=Symbol("internals");function fo(t){return t&&String(t).trim().toLowerCase()}function Ll(t){return t===!1||t==null?t:M.isArray(t)?t.map(Ll):String(t)}function HP(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const KP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function rd(t,e,n,r,s){if(M.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!M.isString(e)){if(M.isString(r))return e.indexOf(r)!==-1;if(M.isRegExp(r))return r.test(e)}}function zP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function WP(t,e){const n=M.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class _t{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=fo(l);if(!u)throw new Error("header name must be a non-empty string");const d=M.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=Ll(a))}const o=(a,l)=>M.forEach(a,(c,u)=>i(c,u,l));if(M.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(M.isString(e)&&(e=e.trim())&&!KP(e))o(VP(e),n);else if(M.isHeaders(e))for(const[a,l]of e.entries())i(l,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=fo(e),e){const r=M.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return HP(s);if(M.isFunction(n))return n.call(this,s,r);if(M.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=fo(e),e){const r=M.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||rd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=fo(o),o){const a=M.findKey(r,o);a&&(!n||rd(r,r[a],a,n))&&(delete r[a],s=!0)}}return M.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||rd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return M.forEach(this,(s,i)=>{const o=M.findKey(r,i);if(o){n[o]=Ll(s),delete n[i];return}const a=e?zP(i):String(i).trim();a!==i&&delete n[i],n[a]=Ll(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return M.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&M.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[T0]=this[T0]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=fo(o);r[a]||(WP(s,o),r[a]=!0)}return M.isArray(e)?e.forEach(i):i(e),this}}_t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(_t.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});M.freezeMethods(_t);function sd(t,e){const n=this||Ta,r=e||n,s=_t.from(r.headers);let i=r.data;return M.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function vT(t){return!!(t&&t.__CANCEL__)}function Zi(t,e,n){le.call(this,t??"canceled",le.ERR_CANCELED,e,n),this.name="CanceledError"}M.inherits(Zi,le,{__CANCEL__:!0});function xT(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function YP(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function qP(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let d=i,f=0;for(;d!==s;)f+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function XP(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-d)))},()=>s&&o(s)]}const xc=(t,e,n=3)=>{let r=0;const s=qP(50,250);return XP(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},w0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},b0=t=>(...e)=>M.asap(()=>t(...e)),QP=pt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,pt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,JP=pt.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];M.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),M.isString(r)&&o.push("path="+r),M.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ZP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function e_(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ET(t,e){return t&&!ZP(e)?e_(t,e):e}const R0=t=>t instanceof _t?{...t}:t;function Ps(t,e){e=e||{};const n={};function r(c,u,d,f){return M.isPlainObject(c)&&M.isPlainObject(u)?M.merge.call({caseless:f},c,u):M.isPlainObject(u)?M.merge({},u):M.isArray(u)?u.slice():u}function s(c,u,d,f){if(M.isUndefined(u)){if(!M.isUndefined(c))return r(void 0,c,d,f)}else return r(c,u,d,f)}function i(c,u){if(!M.isUndefined(u))return r(void 0,u)}function o(c,u){if(M.isUndefined(u)){if(!M.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>s(R0(c),R0(u),d,!0)};return M.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||s,f=d(t[u],e[u],u);M.isUndefined(f)&&d!==a||(n[u]=f)}),n}const ST=t=>{const e=Ps({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=_t.from(o),e.url=mT(ET(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(M.isFormData(n)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(pt.hasStandardBrowserEnv&&(r&&M.isFunction(r)&&(r=r(e)),r||r!==!1&&QP(e.url))){const c=s&&i&&JP.read(i);c&&o.set(s,c)}return e},t_=typeof XMLHttpRequest<"u",n_=t_&&function(t){return new Promise(function(n,r){const s=ST(t);let i=s.data;const o=_t.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,f,m,p;function h(){m&&m(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function y(){if(!g)return;const x=_t.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:x,config:t,request:g};xT(function(R){n(R),h()},function(R){r(R),h()},T),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new le("Request aborted",le.ECONNABORTED,t,g)),g=null)},g.onerror=function(){r(new le("Network Error",le.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||gT;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),r(new le(b,T.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&M.forEach(o.toJSON(),function(b,T){g.setRequestHeader(T,b)}),M.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),c&&([f,p]=xc(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([d,m]=xc(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(u=x=>{g&&(r(!x||x.type?new Zi(null,t,g):x),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const v=YP(s.url);if(v&&pt.protocols.indexOf(v)===-1){r(new le("Unsupported protocol "+v+":",le.ERR_BAD_REQUEST,t));return}g.send(i||null)})},r_=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof le?u:new Zi(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new le(`timeout ${e} of ms exceeded`,le.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>M.asap(a),l}},s_=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},i_=async function*(t,e){for await(const n of o_(t))yield*s_(n,e)},o_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},A0=(t,e,n,r)=>{const s=i_(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let f=i+=d;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},uu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TT=uu&&typeof ReadableStream=="function",a_=uu&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wT=(t,...e)=>{try{return!!t(...e)}catch{return!1}},l_=TT&&wT(()=>{let t=!1;const e=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),C0=64*1024,ch=TT&&wT(()=>M.isReadableStream(new Response("").body)),Ec={stream:ch&&(t=>t.body)};uu&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ec[e]&&(Ec[e]=M.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new le(`Response type '${e}' is not supported`,le.ERR_NOT_SUPPORT,r)})})})(new Response);const c_=async t=>{if(t==null)return 0;if(M.isBlob(t))return t.size;if(M.isSpecCompliantForm(t))return(await new Request(pt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(M.isArrayBufferView(t)||M.isArrayBuffer(t))return t.byteLength;if(M.isURLSearchParams(t)&&(t=t+""),M.isString(t))return(await a_(t)).byteLength},u_=async(t,e)=>{const n=M.toFiniteNumber(t.getContentLength());return n??c_(e)},d_=uu&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=ST(t);c=c?(c+"").toLowerCase():"text";let m=r_([s,i&&i.toAbortSignal()],o),p;const h=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&l_&&n!=="get"&&n!=="head"&&(g=await u_(u,r))!==0){let T=new Request(e,{method:"POST",body:r,duplex:"half"}),A;if(M.isFormData(r)&&(A=T.headers.get("content-type"))&&u.setContentType(A),T.body){const[R,C]=w0(g,xc(b0(l)));r=A0(T.body,C0,R,C)}}M.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...f,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let v=await fetch(p);const x=ch&&(c==="stream"||c==="response");if(ch&&(a||x&&h)){const T={};["status","statusText","headers"].forEach(k=>{T[k]=v[k]});const A=M.toFiniteNumber(v.headers.get("content-length")),[R,C]=a&&w0(A,xc(b0(a),!0))||[];v=new Response(A0(v.body,C0,R,()=>{C&&C(),h&&h()}),T)}c=c||"text";let b=await Ec[M.findKey(Ec,c)||"text"](v,t);return!x&&h&&h(),await new Promise((T,A)=>{xT(T,A,{data:b,headers:_t.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:p})})}catch(y){throw h&&h(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,t,p),{cause:y.cause||y}):le.from(y,y&&y.code,t,p)}}),uh={http:AP,xhr:n_,fetch:d_};M.forEach(uh,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L0=t=>`- ${t}`,f_=t=>M.isFunction(t)||t===null||t===!1,bT={getAdapter:t=>{t=M.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!f_(n)&&(r=uh[(o=String(n)).toLowerCase()],r===void 0))throw new le(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(L0).join(`
`):" "+L0(i[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:uh};function id(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zi(null,t)}function I0(t){return id(t),t.headers=_t.from(t.headers),t.data=sd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),bT.getAdapter(t.adapter||Ta.adapter)(t).then(function(r){return id(t),r.data=sd.call(t,t.transformResponse,r),r.headers=_t.from(r.headers),r},function(r){return vT(r)||(id(t),r&&r.response&&(r.response.data=sd.call(t,t.transformResponse,r.response),r.response.headers=_t.from(r.response.headers))),Promise.reject(r)})}const RT="1.7.9",du={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{du[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const k0={};du.transitional=function(e,n,r){function s(i,o){return"[Axios v"+RT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new le(s(o," has been removed"+(n?" in "+n:"")),le.ERR_DEPRECATED);return n&&!k0[o]&&(k0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};du.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function h_(t,e,n){if(typeof t!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new le("option "+i+" must be "+l,le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new le("Unknown option "+i,le.ERR_BAD_OPTION)}}const Il={assertOptions:h_,validators:du},An=Il.validators;class Ts{constructor(e){this.defaults=e,this.interceptors={request:new S0,response:new S0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ps(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Il.assertOptions(r,{silentJSONParsing:An.transitional(An.boolean),forcedJSONParsing:An.transitional(An.boolean),clarifyTimeoutError:An.transitional(An.boolean)},!1),s!=null&&(M.isFunction(s)?n.paramsSerializer={serialize:s}:Il.assertOptions(s,{encode:An.function,serialize:An.function},!0)),Il.assertOptions(n,{baseUrl:An.spelling("baseURL"),withXsrfToken:An.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&M.merge(i.common,i[n.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=_t.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(l=l&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});const c=[];this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});let u,d=0,f;if(!l){const p=[I0.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let m=n;for(d=0;d<f;){const p=a[d++],h=a[d++];try{m=p(m)}catch(g){h.call(this,g);break}}try{u=I0.call(this,m)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Ps(this.defaults,e);const n=ET(e.baseURL,e.url);return mT(n,e.params,e.paramsSerializer)}}M.forEach(["delete","get","head","options"],function(e){Ts.prototype[e]=function(n,r){return this.request(Ps(r||{},{method:e,url:n,data:(r||{}).data}))}});M.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ps(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ts.prototype[e]=n(),Ts.prototype[e+"Form"]=n(!0)});class em{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Zi(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new em(function(s){e=s}),cancel:e}}}function p_(t){return function(n){return t.apply(null,n)}}function m_(t){return M.isObject(t)&&t.isAxiosError===!0}const dh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dh).forEach(([t,e])=>{dh[e]=t});function AT(t){const e=new Ts(t),n=rT(Ts.prototype.request,e);return M.extend(n,Ts.prototype,e,{allOwnKeys:!0}),M.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return AT(Ps(t,s))},n}const Be=AT(Ta);Be.Axios=Ts;Be.CanceledError=Zi;Be.CancelToken=em;Be.isCancel=vT;Be.VERSION=RT;Be.toFormData=cu;Be.AxiosError=le;Be.Cancel=Be.CanceledError;Be.all=function(e){return Promise.all(e)};Be.spread=p_;Be.isAxiosError=m_;Be.mergeConfig=Ps;Be.AxiosHeaders=_t;Be.formToJSON=t=>yT(M.isHTMLForm(t)?new FormData(t):t);Be.getAdapter=bT.getAdapter;Be.HttpStatusCode=dh;Be.default=Be;const g_="https://cine.dioneygabriel.com.br/api",y_=()=>localStorage.getItem("selectedLanguage")||"pt-BR",Cn=()=>{const t=y_();return Be.create({baseURL:g_,params:{language:t}})},Dn={getTrending:()=>Cn().get("/trending"),getTopRated:()=>Cn().get("/top-rated"),getPopular:()=>Cn().get("/popular"),getNowPlaying:()=>Cn().get("/now-playing"),getGenres:()=>Cn().get("/genres"),getMovieDetails:t=>Cn().get(`/movie/${t}`),getRecommendations:t=>Cn().get(`/movie/${t}/recommendations`),discoverMovies:t=>Cn().get("/discover",{params:{with_genres:t}}),searchMovies:t=>Cn().get("/search",{params:{query:t}}),getActorDetails:t=>Cn().get(`/actor/${t}`)},Sc=({movie:t,className:e=""})=>w.jsxs(nT,{to:`/movie/${t.id}`,className:`group relative overflow-hidden rounded-xl bg-white/10 backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:shadow-xl ${e}`,children:[w.jsx("div",{className:"aspect-[2/3] w-full",children:w.jsx("img",{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`,alt:t.title,className:"h-full w-full object-cover",loading:"lazy"})}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:w.jsxs("div",{className:"absolute bottom-0 p-4 text-white",children:[w.jsx("h3",{className:"text-lg font-semibold",children:t.title}),w.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[w.jsx(zE,{className:"h-4 w-4 text-yellow-400"}),w.jsx("span",{children:t.vote_average.toFixed(1)})]})]})})]}),v_=t=>{const e={"pt-BR":{happy:"Feliz",sad:"Triste",excited:"Animado",relaxed:"Relaxado"},"en-US":{happy:"Happy",sad:"Sad",excited:"Excited",relaxed:"Relaxed"},"es-ES":{happy:"Feliz",sad:"Triste",excited:"Animado",relaxed:"Relajado"}};return e[t]||e["pt-BR"]},x_=[{id:"happy",genres:[35,12,16]},{id:"sad",genres:[18,10749]},{id:"excited",genres:[28,12,878]},{id:"relaxed",genres:[35,10749,16]}],E_=({onMoodSelect:t})=>{const[e,n]=E.useState(null),r=localStorage.getItem("selectedLanguage")||"pt-BR",s=v_(r),i=o=>{n(o.id),t(o.genres)};return w.jsx("div",{className:"flex flex-wrap gap-4",children:x_.map(o=>w.jsx("button",{onClick:()=>i(o),className:`rounded-full px-6 py-2 transition-all duration-300 ${e===o.id?"bg-accent-pink text-gray-900":"bg-white/10 text-white hover:bg-white/20"}`,children:s[o.id]},o.id))})};function D0(t,[e,n]){return Math.min(n,Math.max(e,t))}var S_=E.createContext(void 0);function T_(t){const e=E.useContext(S_);return t||e||"ltr"}var od=0;function w_(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??P0()),document.body.insertAdjacentElement("beforeend",t[1]??P0()),od++,()=>{od===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),od--}},[])}function P0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ad="focusScope.autoFocusOnMount",ld="focusScope.autoFocusOnUnmount",_0={bubbles:!1,cancelable:!0},b_="FocusScope",CT=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=E.useState(null),c=Ht(s),u=Ht(i),d=E.useRef(null),f=Ve(e,h=>l(h)),m=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let h=function(x){if(m.paused||!a)return;const b=x.target;a.contains(b)?d.current=b:xr(d.current,{select:!0})},g=function(x){if(m.paused||!a)return;const b=x.relatedTarget;b!==null&&(a.contains(b)||xr(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const T of x)T.removedNodes.length>0&&xr(a)};document.addEventListener("focusin",h),document.addEventListener("focusout",g);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",g),v.disconnect()}}},[r,a,m.paused]),E.useEffect(()=>{if(a){N0.add(m);const h=document.activeElement;if(!a.contains(h)){const y=new CustomEvent(ad,_0);a.addEventListener(ad,c),a.dispatchEvent(y),y.defaultPrevented||(R_(k_(LT(a)),{select:!0}),document.activeElement===h&&xr(a))}return()=>{a.removeEventListener(ad,c),setTimeout(()=>{const y=new CustomEvent(ld,_0);a.addEventListener(ld,u),a.dispatchEvent(y),y.defaultPrevented||xr(h??document.body,{select:!0}),a.removeEventListener(ld,u),N0.remove(m)},0)}}},[a,c,u,m]);const p=E.useCallback(h=>{if(!n&&!r||m.paused)return;const g=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,y=document.activeElement;if(g&&y){const v=h.currentTarget,[x,b]=A_(v);x&&b?!h.shiftKey&&y===b?(h.preventDefault(),n&&xr(x,{select:!0})):h.shiftKey&&y===x&&(h.preventDefault(),n&&xr(b,{select:!0})):y===v&&h.preventDefault()}},[n,r,m.paused]);return w.jsx(Ae.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});CT.displayName=b_;function R_(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(xr(r,{select:e}),document.activeElement!==n)return}function A_(t){const e=LT(t),n=O0(e,t),r=O0(e.reverse(),t);return[n,r]}function LT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function O0(t,e){for(const n of t)if(!C_(n,{upTo:e}))return n}function C_(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function L_(t){return t instanceof HTMLInputElement&&"select"in t}function xr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&L_(t)&&e&&t.select()}}var N0=I_();function I_(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=F0(t,e),t.unshift(e)},remove(e){var n;t=F0(t,e),(n=t[0])==null||n.resume()}}}function F0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function k_(t){return t.filter(e=>e.tagName!=="A")}function D_(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var P_=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Vs=new WeakMap,qa=new WeakMap,Xa={},cd=0,IT=function(t){return t&&(t.host||IT(t.parentNode))},__=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IT(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},O_=function(t,e,n,r){var s=__(e,Array.isArray(t)?t:[t]);Xa[n]||(Xa[n]=new WeakMap);var i=Xa[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var m=f.getAttribute(r),p=m!==null&&m!=="false",h=(Vs.get(f)||0)+1,g=(i.get(f)||0)+1;Vs.set(f,h),i.set(f,g),o.push(f),h===1&&p&&qa.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),cd++,function(){o.forEach(function(d){var f=Vs.get(d)-1,m=i.get(d)-1;Vs.set(d,f),i.set(d,m),f||(qa.has(d)||d.removeAttribute(r),qa.delete(d)),m||d.removeAttribute(n)}),cd--,cd||(Vs=new WeakMap,Vs=new WeakMap,qa=new WeakMap,Xa={})}},N_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=P_(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),O_(r,s,n,"aria-hidden")):function(){return null}},Bn=function(){return Bn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bn.apply(this,arguments)};function kT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function F_(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var kl="right-scroll-bar-position",Dl="width-before-scroll-bar",M_="with-scroll-bars-hidden",U_="--removed-body-scroll-bar-size";function ud(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function B_(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var $_=typeof window<"u"?E.useLayoutEffect:E.useEffect,M0=new WeakMap;function j_(t,e){var n=B_(null,function(r){return t.forEach(function(s){return ud(s,r)})});return $_(function(){var r=M0.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||ud(a,null)}),i.forEach(function(a){s.has(a)||ud(a,o)})}M0.set(n,t)},[t]),n}function G_(t){return t}function V_(t,e){e===void 0&&(e=G_);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function H_(t){t===void 0&&(t={});var e=V_(null);return e.options=Bn({async:!0,ssr:!1},t),e}var DT=function(t){var e=t.sideCar,n=kT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Bn({},n))};DT.isSideCarExport=!0;function K_(t,e){return t.useMedium(e),DT}var PT=H_(),dd=function(){},fu=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:dd,onWheelCapture:dd,onTouchMoveCapture:dd}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,m=t.noIsolation,p=t.inert,h=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,v=t.gapMode,x=kT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,T=j_([n,e]),A=Bn(Bn({},x),s);return E.createElement(E.Fragment,null,u&&E.createElement(b,{sideCar:PT,removeScrollBar:c,shards:d,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!h,lockRef:n,gapMode:v}),o?E.cloneElement(E.Children.only(a),Bn(Bn({},A),{ref:T})):E.createElement(y,Bn({},A,{className:l,ref:T}),a))});fu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fu.classNames={fullWidth:Dl,zeroRight:kl};var z_=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function W_(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=z_();return e&&t.setAttribute("nonce",e),t}function Y_(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function q_(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var X_=function(){var t=0,e=null;return{add:function(n){t==0&&(e=W_())&&(Y_(e,n),q_(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Q_=function(){var t=X_();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_T=function(){var t=Q_(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},J_={left:0,top:0,right:0,gap:0},fd=function(t){return parseInt(t||"",10)||0},Z_=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[fd(n),fd(r),fd(s)]},eO=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return J_;var e=Z_(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},tO=_T(),vi="data-scroll-locked",nO=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(M_,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(vi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kl,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Dl,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kl," .").concat(kl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dl," .").concat(Dl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(vi,`] {
    `).concat(U_,": ").concat(a,`px;
  }
`)},U0=function(){var t=parseInt(document.body.getAttribute(vi)||"0",10);return isFinite(t)?t:0},rO=function(){E.useEffect(function(){return document.body.setAttribute(vi,(U0()+1).toString()),function(){var t=U0()-1;t<=0?document.body.removeAttribute(vi):document.body.setAttribute(vi,t.toString())}},[])},sO=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;rO();var i=E.useMemo(function(){return eO(s)},[s]);return E.createElement(tO,{styles:nO(i,!e,s,n?"":"!important")})},fh=!1;if(typeof window<"u")try{var Qa=Object.defineProperty({},"passive",{get:function(){return fh=!0,!0}});window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{fh=!1}var Hs=fh?{passive:!1}:!1,iO=function(t){return t.tagName==="TEXTAREA"},OT=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!iO(t)&&n[e]==="visible")},oO=function(t){return OT(t,"overflowY")},aO=function(t){return OT(t,"overflowX")},B0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=NT(t,r);if(s){var i=FT(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lO=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},cO=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},NT=function(t,e){return t==="v"?oO(e):aO(e)},FT=function(t,e){return t==="v"?lO(e):cO(e)},uO=function(t,e){return t==="h"&&e==="rtl"?-1:1},dO=function(t,e,n,r,s){var i=uO(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var m=FT(t,a),p=m[0],h=m[1],g=m[2],y=h-g-i*p;(p||y)&&NT(t,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},Ja=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$0=function(t){return[t.deltaX,t.deltaY]},j0=function(t){return t&&"current"in t?t.current:t},fO=function(t,e){return t[0]===e[0]&&t[1]===e[1]},hO=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},pO=0,Ks=[];function mO(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(pO++)[0],i=E.useState(_T)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var h=F_([t.lockRef.current],(t.shards||[]).map(j0),!0).filter(Boolean);return h.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),h.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(h,g){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!o.current.allowPinchZoom;var y=Ja(h),v=n.current,x="deltaX"in h?h.deltaX:v[0]-y[0],b="deltaY"in h?h.deltaY:v[1]-y[1],T,A=h.target,R=Math.abs(x)>Math.abs(b)?"h":"v";if("touches"in h&&R==="h"&&A.type==="range")return!1;var C=B0(R,A);if(!C)return!0;if(C?T=R:(T=R==="v"?"h":"v",C=B0(R,A)),!C)return!1;if(!r.current&&"changedTouches"in h&&(x||b)&&(r.current=T),!T)return!0;var k=r.current||T;return dO(k,g,h,k==="h"?x:b,!0)},[]),l=E.useCallback(function(h){var g=h;if(!(!Ks.length||Ks[Ks.length-1]!==i)){var y="deltaY"in g?$0(g):Ja(g),v=e.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&fO(T.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(j0).filter(Boolean).filter(function(T){return T.contains(g.target)}),b=x.length>0?a(g,x[0]):!o.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),c=E.useCallback(function(h,g,y,v){var x={name:h,delta:g,target:y,should:v,shadowParent:gO(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(b){return b!==x})},1)},[]),u=E.useCallback(function(h){n.current=Ja(h),r.current=void 0},[]),d=E.useCallback(function(h){c(h.type,$0(h),h.target,a(h,t.lockRef.current))},[]),f=E.useCallback(function(h){c(h.type,Ja(h),h.target,a(h,t.lockRef.current))},[]);E.useEffect(function(){return Ks.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Hs),document.addEventListener("touchmove",l,Hs),document.addEventListener("touchstart",u,Hs),function(){Ks=Ks.filter(function(h){return h!==i}),document.removeEventListener("wheel",l,Hs),document.removeEventListener("touchmove",l,Hs),document.removeEventListener("touchstart",u,Hs)}},[]);var m=t.removeScrollBar,p=t.inert;return E.createElement(E.Fragment,null,p?E.createElement(i,{styles:hO(s)}):null,m?E.createElement(sO,{gapMode:t.gapMode}):null)}function gO(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const yO=K_(PT,mO);var MT=E.forwardRef(function(t,e){return E.createElement(fu,Bn({},t,{ref:e,sideCar:yO}))});MT.classNames=fu.classNames;var vO=[" ","Enter","ArrowUp","ArrowDown"],xO=[" ","Enter"],wa="Select",[hu,pu,EO]=mE(wa),[eo,_U]=Cp(wa,[EO,nu]),mu=nu(),[SO,es]=eo(wa),[TO,wO]=eo(wa),UT=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:m,form:p}=t,h=mu(e),[g,y]=E.useState(null),[v,x]=E.useState(null),[b,T]=E.useState(!1),A=T_(c),[R=!1,C]=_f({prop:r,defaultProp:s,onChange:i}),[k,L]=_f({prop:o,defaultProp:a,onChange:l}),_=E.useRef(null),$=g?p||!!g.closest("form"):!0,[j,B]=E.useState(new Set),K=Array.from(j).map(G=>G.props.value).join(";");return w.jsx(KI,{...h,children:w.jsxs(SO,{required:m,scope:e,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:T,contentId:Op(),value:k,onValueChange:L,open:R,onOpenChange:C,dir:A,triggerPointerDownPosRef:_,disabled:f,children:[w.jsx(hu.Provider,{scope:e,children:w.jsx(TO,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(G=>{B(Y=>new Set(Y).add(G))},[]),onNativeOptionRemove:E.useCallback(G=>{B(Y=>{const D=new Set(Y);return D.delete(G),D})},[]),children:n})}),$?w.jsxs(cw,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:k,onChange:G=>L(G.target.value),disabled:f,form:p,children:[k===void 0?w.jsx("option",{value:""}):null,Array.from(j)]},K):null]})})};UT.displayName=wa;var BT="SelectTrigger",$T=E.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=mu(n),o=es(BT,n),a=o.disabled||r,l=Ve(e,o.onTriggerChange),c=pu(n),u=E.useRef("touch"),[d,f,m]=uw(h=>{const g=c().filter(x=>!x.disabled),y=g.find(x=>x.value===o.value),v=dw(g,h,y);v!==void 0&&o.onValueChange(v.value)}),p=h=>{a||(o.onOpenChange(!0),m()),h&&(o.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return w.jsx(SS,{asChild:!0,...i,children:w.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":lw(o.value)?"":void 0,...s,ref:l,onClick:pe(s.onClick,h=>{h.currentTarget.focus(),u.current!=="mouse"&&p(h)}),onPointerDown:pe(s.onPointerDown,h=>{u.current=h.pointerType;const g=h.target;g.hasPointerCapture(h.pointerId)&&g.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(p(h),h.preventDefault())}),onKeyDown:pe(s.onKeyDown,h=>{const g=d.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&f(h.key),!(g&&h.key===" ")&&vO.includes(h.key)&&(p(),h.preventDefault())})})})});$T.displayName=BT;var jT="SelectValue",GT=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=es(jT,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Ve(e,l.onValueNodeChange);return gt(()=>{c(u)},[c,u]),w.jsx(Ae.span,{...a,ref:d,style:{pointerEvents:"none"},children:lw(l.value)?w.jsx(w.Fragment,{children:o}):i})});GT.displayName=jT;var bO="SelectIcon",VT=E.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return w.jsx(Ae.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});VT.displayName=bO;var RO="SelectPortal",HT=t=>w.jsx(Lp,{asChild:!0,...t});HT.displayName=RO;var _s="SelectContent",KT=E.forwardRef((t,e)=>{const n=es(_s,t.__scopeSelect),[r,s]=E.useState();if(gt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ms.createPortal(w.jsx(zT,{scope:t.__scopeSelect,children:w.jsx(hu.Slot,{scope:t.__scopeSelect,children:w.jsx("div",{children:t.children})})}),i):null}return w.jsx(WT,{...t,ref:e})});KT.displayName=_s;var ln=10,[zT,ts]=eo(_s),AO="SelectContentImpl",WT=E.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:h,avoidCollisions:g,...y}=t,v=es(_s,n),[x,b]=E.useState(null),[T,A]=E.useState(null),R=Ve(e,Q=>b(Q)),[C,k]=E.useState(null),[L,_]=E.useState(null),$=pu(n),[j,B]=E.useState(!1),K=E.useRef(!1);E.useEffect(()=>{if(x)return N_(x)},[x]),w_();const G=E.useCallback(Q=>{const[fe,...Ce]=$().map(Ee=>Ee.ref.current),[xe]=Ce.slice(-1),Se=document.activeElement;for(const Ee of Q)if(Ee===Se||(Ee==null||Ee.scrollIntoView({block:"nearest"}),Ee===fe&&T&&(T.scrollTop=0),Ee===xe&&T&&(T.scrollTop=T.scrollHeight),Ee==null||Ee.focus(),document.activeElement!==Se))return},[$,T]),Y=E.useCallback(()=>G([C,x]),[G,C,x]);E.useEffect(()=>{j&&Y()},[j,Y]);const{onOpenChange:D,triggerPointerDownPosRef:N}=v;E.useEffect(()=>{if(x){let Q={x:0,y:0};const fe=xe=>{var Se,Ee;Q={x:Math.abs(Math.round(xe.pageX)-(((Se=N.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((Ee=N.current)==null?void 0:Ee.y)??0))}},Ce=xe=>{Q.x<=10&&Q.y<=10?xe.preventDefault():x.contains(xe.target)||D(!1),document.removeEventListener("pointermove",fe),N.current=null};return N.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[x,D,N]),E.useEffect(()=>{const Q=()=>D(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[D]);const[U,H]=uw(Q=>{const fe=$().filter(Se=>!Se.disabled),Ce=fe.find(Se=>Se.ref.current===document.activeElement),xe=dw(fe,Q,Ce);xe&&setTimeout(()=>xe.ref.current.focus())}),z=E.useCallback((Q,fe,Ce)=>{const xe=!K.current&&!Ce;(v.value!==void 0&&v.value===fe||xe)&&(k(Q),xe&&(K.current=!0))},[v.value]),X=E.useCallback(()=>x==null?void 0:x.focus(),[x]),se=E.useCallback((Q,fe,Ce)=>{const xe=!K.current&&!Ce;(v.value!==void 0&&v.value===fe||xe)&&_(Q)},[v.value]),de=r==="popper"?hh:YT,te=de===hh?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:h,avoidCollisions:g}:{};return w.jsx(zT,{scope:n,content:x,viewport:T,onViewportChange:A,itemRefCallback:z,selectedItem:C,onItemLeave:X,itemTextRefCallback:se,focusSelectedItem:Y,selectedItemText:L,position:r,isPositioned:j,searchRef:U,children:w.jsx(MT,{as:qo,allowPinchZoom:!0,children:w.jsx(CT,{asChild:!0,trapped:v.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:pe(s,Q=>{var fe;(fe=v.trigger)==null||fe.focus({preventScroll:!0}),Q.preventDefault()}),children:w.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:w.jsx(de,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Q=>Q.preventDefault(),...y,...te,onPlaced:()=>B(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:pe(y.onKeyDown,Q=>{const fe=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!fe&&Q.key.length===1&&H(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let xe=$().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Se=Q.target,Ee=xe.indexOf(Se);xe=xe.slice(Ee+1)}setTimeout(()=>G(xe)),Q.preventDefault()}})})})})})})});WT.displayName=AO;var CO="SelectItemAlignedPosition",YT=E.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=es(_s,n),o=ts(_s,n),[a,l]=E.useState(null),[c,u]=E.useState(null),d=Ve(e,R=>u(R)),f=pu(n),m=E.useRef(!1),p=E.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=o,x=E.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&h&&g&&y){const R=i.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),L=y.getBoundingClientRect();if(i.dir!=="rtl"){const Se=L.left-C.left,Ee=k.left-Se,vt=R.left-Ee,Ot=R.width+vt,fr=Math.max(Ot,C.width),Wt=window.innerWidth-ln,ns=D0(Ee,[ln,Math.max(ln,Wt-fr)]);a.style.minWidth=Ot+"px",a.style.left=ns+"px"}else{const Se=C.right-L.right,Ee=window.innerWidth-k.right-Se,vt=window.innerWidth-R.right-Ee,Ot=R.width+vt,fr=Math.max(Ot,C.width),Wt=window.innerWidth-ln,ns=D0(Ee,[ln,Math.max(ln,Wt-fr)]);a.style.minWidth=Ot+"px",a.style.right=ns+"px"}const _=f(),$=window.innerHeight-ln*2,j=h.scrollHeight,B=window.getComputedStyle(c),K=parseInt(B.borderTopWidth,10),G=parseInt(B.paddingTop,10),Y=parseInt(B.borderBottomWidth,10),D=parseInt(B.paddingBottom,10),N=K+G+j+D+Y,U=Math.min(g.offsetHeight*5,N),H=window.getComputedStyle(h),z=parseInt(H.paddingTop,10),X=parseInt(H.paddingBottom,10),se=R.top+R.height/2-ln,de=$-se,te=g.offsetHeight/2,Q=g.offsetTop+te,fe=K+G+Q,Ce=N-fe;if(fe<=se){const Se=_.length>0&&g===_[_.length-1].ref.current;a.style.bottom="0px";const Ee=c.clientHeight-h.offsetTop-h.offsetHeight,vt=Math.max(de,te+(Se?X:0)+Ee+Y),Ot=fe+vt;a.style.height=Ot+"px"}else{const Se=_.length>0&&g===_[0].ref.current;a.style.top="0px";const vt=Math.max(se,K+h.offsetTop+(Se?z:0)+te)+Ce;a.style.height=vt+"px",h.scrollTop=fe-se+h.offsetTop}a.style.margin=`${ln}px 0`,a.style.minHeight=U+"px",a.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,a,c,h,g,y,i.dir,r]);gt(()=>x(),[x]);const[b,T]=E.useState();gt(()=>{c&&T(window.getComputedStyle(c).zIndex)},[c]);const A=E.useCallback(R=>{R&&p.current===!0&&(x(),v==null||v(),p.current=!1)},[x,v]);return w.jsx(IO,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:w.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:w.jsx(Ae.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});YT.displayName=CO;var LO="SelectPopperPosition",hh=E.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ln,...i}=t,o=mu(n);return w.jsx(TS,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});hh.displayName=LO;var[IO,tm]=eo(_s,{}),ph="SelectViewport",qT=E.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ts(ph,n),o=tm(ph,n),a=Ve(e,i.onViewportChange),l=E.useRef(0);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),w.jsx(hu.Slot,{scope:n,children:w.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const p=window.innerHeight-ln*2,h=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),y=Math.max(h,g);if(y<p){const v=y+m,x=Math.min(p,v),b=v-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});qT.displayName=ph;var XT="SelectGroup",[kO,DO]=eo(XT),PO=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Op();return w.jsx(kO,{scope:n,id:s,children:w.jsx(Ae.div,{role:"group","aria-labelledby":s,...r,ref:e})})});PO.displayName=XT;var QT="SelectLabel",JT=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=DO(QT,n);return w.jsx(Ae.div,{id:s.id,...r,ref:e})});JT.displayName=QT;var Tc="SelectItem",[_O,ZT]=eo(Tc),ew=E.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=es(Tc,n),l=ts(Tc,n),c=a.value===r,[u,d]=E.useState(i??""),[f,m]=E.useState(!1),p=Ve(e,v=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,v,r,s)}),h=Op(),g=E.useRef("touch"),y=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return w.jsx(_O,{scope:n,value:r,disabled:s,textId:h,isSelected:c,onItemTextChange:E.useCallback(v=>{d(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:w.jsx(hu.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:w.jsx(Ae.div,{role:"option","aria-labelledby":h,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:p,onFocus:pe(o.onFocus,()=>m(!0)),onBlur:pe(o.onBlur,()=>m(!1)),onClick:pe(o.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:pe(o.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:pe(o.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:pe(o.onPointerMove,v=>{var x;g.current=v.pointerType,s?(x=l.onItemLeave)==null||x.call(l):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:pe(o.onKeyDown,v=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&v.key===" "||(xO.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});ew.displayName=Tc;var Eo="SelectItemText",tw=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=es(Eo,n),a=ts(Eo,n),l=ZT(Eo,n),c=wO(Eo,n),[u,d]=E.useState(null),f=Ve(e,y=>d(y),l.onItemTextChange,y=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,y,l.value,l.disabled)}),m=u==null?void 0:u.textContent,p=E.useMemo(()=>w.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=c;return gt(()=>(h(p),()=>g(p)),[h,g,p]),w.jsxs(w.Fragment,{children:[w.jsx(Ae.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ms.createPortal(i.children,o.valueNode):null]})});tw.displayName=Eo;var nw="SelectItemIndicator",rw=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return ZT(nw,n).isSelected?w.jsx(Ae.span,{"aria-hidden":!0,...r,ref:e}):null});rw.displayName=nw;var mh="SelectScrollUpButton",sw=E.forwardRef((t,e)=>{const n=ts(mh,t.__scopeSelect),r=tm(mh,t.__scopeSelect),[s,i]=E.useState(!1),o=Ve(e,r.onScrollButtonChange);return gt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?w.jsx(ow,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});sw.displayName=mh;var gh="SelectScrollDownButton",iw=E.forwardRef((t,e)=>{const n=ts(gh,t.__scopeSelect),r=tm(gh,t.__scopeSelect),[s,i]=E.useState(!1),o=Ve(e,r.onScrollButtonChange);return gt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?w.jsx(ow,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});iw.displayName=gh;var ow=E.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ts("SelectScrollButton",n),o=E.useRef(null),a=pu(n),l=E.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),gt(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),w.jsx(Ae.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{l()})})}),OO="SelectSeparator",aw=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return w.jsx(Ae.div,{"aria-hidden":!0,...r,ref:e})});aw.displayName=OO;var yh="SelectArrow",NO=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=mu(n),i=es(yh,n),o=ts(yh,n);return i.open&&o.position==="popper"?w.jsx(wS,{...s,...r,ref:e}):null});NO.displayName=yh;function lw(t){return t===""||t===void 0}var cw=E.forwardRef((t,e)=>{const{value:n,...r}=t,s=E.useRef(null),i=Ve(e,s),o=D_(n);return E.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),w.jsx(ga,{asChild:!0,children:w.jsx("select",{...r,ref:i,defaultValue:n})})});cw.displayName="BubbleSelect";function uw(t){const e=Ht(t),n=E.useRef(""),r=E.useRef(0),s=E.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=E.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function dw(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=FO(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function FO(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var MO=UT,fw=$T,UO=GT,BO=VT,$O=HT,hw=KT,jO=qT,pw=JT,mw=ew,GO=tw,VO=rw,gw=sw,yw=iw,vw=aw;const HO=MO,KO=UO,xw=E.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(fw,{ref:r,className:yt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,w.jsx(BO,{asChild:!0,children:w.jsx(VE,{className:"h-4 w-4 opacity-50"})})]}));xw.displayName=fw.displayName;const Ew=E.forwardRef(({className:t,...e},n)=>w.jsx(gw,{ref:n,className:yt("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(fC,{className:"h-4 w-4"})}));Ew.displayName=gw.displayName;const Sw=E.forwardRef(({className:t,...e},n)=>w.jsx(yw,{ref:n,className:yt("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(VE,{className:"h-4 w-4"})}));Sw.displayName=yw.displayName;const Tw=E.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>w.jsx($O,{children:w.jsxs(hw,{ref:s,className:yt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[w.jsx(Ew,{}),w.jsx(jO,{className:yt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),w.jsx(Sw,{})]})}));Tw.displayName=hw.displayName;const zO=E.forwardRef(({className:t,...e},n)=>w.jsx(pw,{ref:n,className:yt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));zO.displayName=pw.displayName;const ww=E.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(mw,{ref:r,className:yt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(VO,{children:w.jsx(dC,{className:"h-4 w-4"})})}),w.jsx(GO,{children:e})]}));ww.displayName=mw.displayName;const WO=E.forwardRef(({className:t,...e},n)=>w.jsx(vw,{ref:n,className:yt("-mx-1 my-1 h-px bg-muted",t),...e}));WO.displayName=vw.displayName;const YO=[{value:"pt-BR",label:"Português"},{value:"en-US",label:"English"},{value:"es-ES",label:"Español"}],qO=()=>{const t=GS(),e=n=>{localStorage.setItem("selectedLanguage",n),t.removeQueries(),window.location.reload()};return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(pC,{className:"h-4 w-4 text-gray-400"}),w.jsxs(HO,{defaultValue:localStorage.getItem("selectedLanguage")||"pt-BR",onValueChange:e,children:[w.jsx(xw,{className:"w-[130px] border-none bg-white/10 text-white hover:bg-white/20",children:w.jsx(KO,{})}),w.jsx(Tw,{children:YO.map(n=>w.jsx(ww,{value:n.value,children:n.label},n.value))})]})]})},bw=E.forwardRef(({className:t,type:e,...n},r)=>w.jsx("input",{type:e,className:yt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));bw.displayName="Input";const XO={"pt-BR":{title:"Descubra Novos Filmes",searchPlaceholder:"Buscar filmes...",surprise:"Surpreenda-me",allGenres:"Todos os Gêneros",mood:"Como está seu humor hoje?",searchResults:"Resultados para",selectedGenre:"Filmes do Gênero Selecionado",nowPlaying:"Nos Cinemas",trending:"Mais Vistos da Semana",popular:"Sucessos de Bilheteria",topRated:"Melhores Avaliados"},"en-US":{title:"Discover New Movies",searchPlaceholder:"Search movies...",surprise:"Surprise Me",allGenres:"All Genres",mood:"How are you feeling today?",searchResults:"Results for",selectedGenre:"Movies in Selected Genre",nowPlaying:"Now Playing",trending:"Trending This Week",popular:"Popular Movies",topRated:"Top Rated"},"es-ES":{title:"Descubre Nuevas Películas",searchPlaceholder:"Buscar películas...",surprise:"Sorpréndeme",allGenres:"Todos los Géneros",mood:"¿Cómo te sientes hoy?",searchResults:"Resultados para",selectedGenre:"Películas del Género Seleccionado",nowPlaying:"En Cines",trending:"Tendencias de la Semana",popular:"Películas Populares",topRated:"Mejor Valoradas"}},QO=()=>{const[t,e]=E.useState(),[n,r]=E.useState(),[s,i]=E.useState(""),o=localStorage.getItem("selectedLanguage")||"pt-BR",a=XO[o],{data:l}=kn({queryKey:["trending"],queryFn:async()=>(await Dn.getTrending()).data.results}),{data:c}=kn({queryKey:["topRated"],queryFn:async()=>(await Dn.getTopRated()).data.results}),{data:u}=kn({queryKey:["popular"],queryFn:async()=>(await Dn.getPopular()).data.results}),{data:d}=kn({queryKey:["genres"],queryFn:async()=>(await Dn.getGenres()).data.genres}),{data:f}=kn({queryKey:["movies",t],queryFn:async()=>(await Dn.discoverMovies(t)).data.results,enabled:!!t}),{data:m}=kn({queryKey:["search",s],queryFn:async()=>(await Dn.searchMovies(s)).data.results,enabled:s.length>2}),{data:p}=kn({queryKey:["nowPlaying"],queryFn:async()=>(await Dn.getNowPlaying()).data.results}),h=async x=>{e(x.join(",")),i("")},g=async()=>{if(u){const x=Math.floor(Math.random()*u.length);r(u[x])}},y=x=>{x.preventDefault();const T=new FormData(x.currentTarget).get("search");i(T),e(void 0)},v=({title:x,movies:b})=>{const T=E.useRef(null),A=R=>{const C=T.current;if(!C)return;const k=C.clientWidth*.8;C.scrollBy({left:R==="left"?-k:k,behavior:"smooth"})};return w.jsxs("div",{className:"mb-12 animate-fadeIn",children:[w.jsx("h2",{className:"mb-6 text-2xl font-semibold text-white",children:x}),w.jsxs("div",{className:"group relative",children:[w.jsx("div",{ref:T,className:"flex overflow-x-auto pb-6 scrollbar-hide",children:w.jsx("div",{className:"flex gap-6",children:b==null?void 0:b.slice(0,20).map(R=>w.jsx("div",{className:"w-[200px] flex-shrink-0",children:w.jsx(Sc,{movie:R})},R.id))})}),b&&b.length>5&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>A("left"),className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:block",children:w.jsx(uc,{className:"h-6 w-6"})}),w.jsx("button",{onClick:()=>A("right"),className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:block",children:w.jsx(dc,{className:"h-6 w-6"})})]})]})]})};return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 px-6 py-12",children:[w.jsxs("div",{className:"mx-auto max-w-7xl",children:[w.jsxs("div",{className:"mb-12 flex flex-col items-center gap-8",children:[w.jsx("div",{className:"w-full flex justify-end",children:w.jsx(qO,{})}),w.jsx("h1",{className:"bg-gradient-to-r from-white via-purple-200 to-white bg-clip-text text-center text-5xl font-bold text-transparent",children:a.title}),w.jsx("form",{onSubmit:y,className:"w-full max-w-2xl",children:w.jsxs("div",{className:"relative",children:[w.jsx(bw,{type:"search",name:"search",placeholder:a.searchPlaceholder,className:"h-12 w-full rounded-full bg-white/10 pl-12 pr-4 text-white placeholder:text-gray-400 focus:bg-white/20"}),w.jsx(xC,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"})]})}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[w.jsxs("button",{onClick:g,className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 font-medium text-white transition-all hover:opacity-90",children:[w.jsx(EC,{className:"h-5 w-5"}),a.surprise]}),w.jsxs("button",{onClick:()=>{e(void 0),i("")},className:"flex items-center gap-2 rounded-full bg-white/10 px-6 py-3 font-medium text-white transition-all hover:bg-white/20",children:[w.jsx(mC,{className:"h-5 w-5"}),a.allGenres]})]}),n&&w.jsx("div",{className:"w-full max-w-md animate-fadeIn",children:w.jsx(Sc,{movie:n,className:"mx-auto"})})]}),w.jsxs("div",{className:"mb-12",children:[w.jsx("h2",{className:"mb-6 text-2xl font-semibold text-white",children:a.mood}),w.jsx(E_,{onMoodSelect:h})]}),w.jsx("div",{className:"mb-8 flex flex-wrap gap-4",children:d==null?void 0:d.map(x=>w.jsx("button",{onClick:()=>{e(String(x.id)),i("")},className:`rounded-full px-4 py-2 text-sm transition-all ${t===String(x.id)?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:x.name},x.id))}),s&&m?w.jsx(v,{title:`${a.searchResults} "${s}"`,movies:m}):t?w.jsx(v,{title:a.selectedGenre,movies:f}):w.jsxs(w.Fragment,{children:[w.jsx(v,{title:a.nowPlaying,movies:p}),w.jsx(v,{title:a.trending,movies:l}),w.jsx(v,{title:a.popular,movies:u}),w.jsx(v,{title:a.topRated,movies:c})]})]}),w.jsx("footer",{className:"mt-auto py-6 text-center text-white/70",children:w.jsxs("p",{className:"text-sm",children:["Created with ❤️ by"," ",w.jsx("a",{href:"https://github.com/simpledioney",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-purple-400 hover:text-purple-300 transition-colors",children:"Dioney Gabriel"})]})})]})};function JO(){return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"linear-gradient(to bottom, #1A1F2C, #141821)"},children:w.jsx(KE,{className:"h-12 w-12 animate-spin text-white"})})}const hd="https://scrap.dioneygabriel.com.br/",pd={async searchContent(t){const e=new FormData;return e.append("nome",t),(await Be.post(`${hd}/search`,e)).data},async getVideo(t,e){return(await Be.post(`${hd}/get_video`,{escolha:t,resultados:JSON.stringify(e)})).data},async selectEpisode(t,e){return(await Be.post(`${hd}/select_episode`,{episodio_escolha:t,episodios:JSON.stringify(e)})).data}};function ZO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rw={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(c);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):c;var m=a.parseURL(l);if(!m)throw new Error("Error trying to parse base URL.");if(!m.netLoc&&m.path&&m.path[0]!=="/"){var p=s.exec(m.path);m.netLoc=p[1],m.path=p[2]}m.netLoc&&!m.path&&(m.path="/");var h={scheme:m.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(h.netLoc=m.netLoc,f.path[0]!=="/"))if(!f.path)h.path=m.path,f.params||(h.params=m.params,f.query||(h.query=m.query));else{var g=m.path,y=g.substring(0,g.lastIndexOf("/")+1)+f.path;h.path=a.normalizePath(y)}return h.path===null&&(h.path=u.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(h)},parseURL:function(l){var c=r.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(i,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(Rw);var nm=Rw.exports;function G0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G0(Object(n),!0).forEach(function(r){nN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eN(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tN(t){var e=eN(t,"string");return typeof e=="symbol"?e:String(e)}function nN(t,e,n){return e=tN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(){return We=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},We.apply(this,arguments)}const Z=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},rN=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=sN},sN=Number.MAX_SAFE_INTEGER||9007199254740991;let S=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),ie=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),F=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const os=function(){},vh={trace:os,debug:os,log:os,warn:os,info:os,error:os};let Do=vh;function iN(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):os}function oN(t,...e){e.forEach(function(n){Do[n]=t[n]?t[n].bind(t):iN(n)})}function aN(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){oN(t,"debug","log","info","warn","error");try{Do.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{Do=vh}}else Do=vh}const P=Do,lN=/^(\d+)x(\d+)$/,V0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Fe{constructor(e){typeof e=="string"&&(e=Fe.parseAttrList(e)),We(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;s++)r[s]=parseInt(n.slice(s*2,s*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=lN.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const r={},s='"';for(V0.lastIndex=0;(n=V0.exec(e))!==null;){let i=n[2];i.indexOf(s)===0&&i.lastIndexOf(s)===i.length-1&&(i=i.slice(1,-1));const o=n[1].trim();r[o]=i}return r}}function cN(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function uN(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class Aw{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const r=n.attr;for(const s in r)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==r[s]){P.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=We(new Fe({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);Z(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Z(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Z(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class gu{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var be={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Cw{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[be.AUDIO]:null,[be.VIDEO]:null,[be.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const r=e.split("@",2);let s;r.length===1?s=(n==null?void 0:n.byteRangeEndOffset)||0:s=parseInt(r[1]),this._byteRange=[s,parseInt(r[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=nm.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class md extends Cw{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new gu,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Z(this.programDateTime))return null;const e=Z(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,s,i,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:r,startDTS:s,endDTS:i,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,i)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[be.AUDIO]=null,e[be.VIDEO]=null,e[be.AUDIOVIDEO]=null}}class dN extends Cw{constructor(e,n,r,s,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new gu,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const fN=10;class hN{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Z(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||fN}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function rm(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function pN(t){const e=xh(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function mN(t){const e=function(r,s,i){const o=r[s];r[s]=r[i],r[i]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function gN(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),s=r[r.length-1].split(",");if(s.length===2){const i=s[0]==="base64",o=s[1];i?(r.splice(-1,1),n=rm(o)):n=pN(o)}}return n}function xh(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const Gi=typeof self<"u"?self:void 0;var Te={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Lt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function gd(t){switch(t){case Lt.FAIRPLAY:return Te.FAIRPLAY;case Lt.PLAYREADY:return Te.PLAYREADY;case Lt.WIDEVINE:return Te.WIDEVINE;case Lt.CLEARKEY:return Te.CLEARKEY}}var Za={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function yd(t){if(t===Za.WIDEVINE)return Te.WIDEVINE;if(t===Za.PLAYREADY)return Te.PLAYREADY;if(t===Za.CENC||t===Za.CLEARKEY)return Te.CLEARKEY}function vd(t){switch(t){case Te.FAIRPLAY:return Lt.FAIRPLAY;case Te.PLAYREADY:return Lt.PLAYREADY;case Te.WIDEVINE:return Lt.WIDEVINE;case Te.CLEARKEY:return Lt.CLEARKEY}}function el(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Te.FAIRPLAY,Te.WIDEVINE,Te.PLAYREADY,Te.CLEARKEY].filter(s=>!!e[s]):[];return!r[Te.WIDEVINE]&&n&&r.push(Te.WIDEVINE),r}const Lw=function(t){return Gi!=null&&(t=Gi.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function yN(t,e,n,r){let s;switch(t){case Te.FAIRPLAY:s=["cenc","sinf"];break;case Te.WIDEVINE:case Te.PLAYREADY:s=["cenc"];break;case Te.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return vN(s,e,n,r)}function vN(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs="${i}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(i=>({contentType:`video/mp4; codecs="${i}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function Iw(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),o=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=rm(a).subarray(0,16);return mN(l),l}}return null}function ws(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const sm=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,kw=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,ra=(t,e)=>{const n=e;let r=0;for(;sm(t,e);){r+=10;const s=yu(t,e+6);r+=s,kw(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)},yu=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},xN=(t,e)=>sm(t,e)&&yu(t,e+6)+10<=t.length-e,im=t=>{const e=Pw(t);for(let n=0;n<e.length;n++){const r=e[n];if(Dw(r))return RN(r)}},Dw=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",EN=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=yu(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}},Pw=t=>{let e=0;const n=[];for(;sm(t,e);){const r=yu(t,e+6);e+=10;const s=e+r;for(;e+8<s;){const i=EN(t.subarray(e)),o=SN(i);o&&n.push(o),e+=i.size+10}kw(t,e)&&(e+=10)}return n},SN=t=>t.type==="PRIV"?TN(t):t.type[0]==="W"?bN(t):wN(t),TN=t=>{if(t.size<2)return;const e=Hn(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},wN=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=Hn(t.data.subarray(n),!0);n+=r.length+1;const s=Hn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Hn(t.data.subarray(1));return{key:t.type,data:e}},bN=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=Hn(t.data.subarray(n),!0);n+=r.length+1;const s=Hn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Hn(t.data);return{key:t.type,data:e}},RN=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}},Hn=(t,e=!1)=>{const n=AN();if(n){const c=n.decode(t);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const r=t.length;let s,i,o,a="",l=0;for(;l<r;){if(s=t[l++],s===0&&e)return a;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:i=t[l++],a+=String.fromCharCode((s&31)<<6|i&63);break;case 14:i=t[l++],o=t[l++],a+=String.fromCharCode((s&15)<<12|(i&63)<<6|(o&63)<<0);break}}return a};let xd;function AN(){if(!navigator.userAgent.includes("PlayStation 4"))return!xd&&typeof self.TextDecoder<"u"&&(xd=new self.TextDecoder("utf-8")),xd}const Pn={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},wc=Math.pow(2,32)-1,CN=[].push,_w={video:1,audio:2,id3:3,text:4};function qe(t){return String.fromCharCode.apply(null,t)}function Ow(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function ne(t,e){const n=Nw(t,e);return n<0?4294967296+n:n}function H0(t,e){let n=ne(t,e);return n*=Math.pow(2,32),n+=ne(t,e+4),n}function Nw(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Ed(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function LN(t){const e=t.byteLength;for(let n=0;n<e;){const r=ne(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function ae(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let s=0;s<r;){const i=ne(t,s),o=qe(t.subarray(s+4,s+8)),a=i>1?s+i:r;if(o===e[0])if(e.length===1)n.push(t.subarray(s+8,a));else{const l=ae(t.subarray(s+8,a),e.slice(1));l.length&&CN.apply(n,l)}s=a}return n}function IN(t){const e=[],n=t[0];let r=8;const s=ne(t,r);r+=4;let i=0,o=0;n===0?(i=ne(t,r),o=ne(t,r+4),r+=8):(i=H0(t,r),o=H0(t,r+8),r+=16),r+=2;let a=t.length+o;const l=Ow(t,r);r+=2;for(let c=0;c<l;c++){let u=r;const d=ne(t,u);u+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return P.warn("SIDX has hierarchical references (not supported)"),null;const p=ne(t,u);u+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:a,end:a+f-1}}),a+=f,u+=4,r=u}return{earliestPresentationTime:i,timescale:s,version:n,referencesCount:l,references:e}}function Fw(t){const e=[],n=ae(t,["moov","trak"]);for(let s=0;s<n.length;s++){const i=n[s],o=ae(i,["tkhd"])[0];if(o){let a=o[0];const l=ne(o,a===0?12:20),c=ae(i,["mdia","mdhd"])[0];if(c){a=c[0];const u=ne(c,a===0?12:20),d=ae(i,["mdia","hdlr"])[0];if(d){const f=qe(d.subarray(8,12)),m={soun:be.AUDIO,vide:be.VIDEO}[f];if(m){const p=ae(i,["mdia","minf","stbl","stsd"])[0],h=kN(p);e[l]={timescale:u,type:m},e[m]=nt({timescale:u,id:l},h)}}}}}return ae(t,["moov","mvex","trex"]).forEach(s=>{const i=ne(s,4),o=e[i];o&&(o.default={duration:ne(s,12),flags:ne(s,20)})}),e}function kN(t){const e=t.subarray(8),n=e.subarray(86),r=qe(e.subarray(4,8));let s=r;const i=r==="enca"||r==="encv";if(i){const a=ae(e,[r])[0].subarray(r==="enca"?28:78);ae(a,["sinf"]).forEach(c=>{const u=ae(c,["schm"])[0];if(u){const d=qe(u.subarray(4,8));if(d==="cbcs"||d==="cenc"){const f=ae(c,["frma"])[0];f&&(s=qe(f))}}})}switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const o=ae(n,["avcC"])[0];s+="."+tl(o[1])+tl(o[2])+tl(o[3]);break}case"mp4a":{const o=ae(e,[r])[0],a=ae(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=Sd(a,l),l+=2;const c=a[l++];if(c&128&&(l+=2),c&64&&(l+=a[l++]),a[l++]!==4)break;l=Sd(a,l);const u=a[l++];if(u===64)s+="."+tl(u);else break;if(l+=12,a[l++]!==5)break;l=Sd(a,l);const d=a[l++];let f=(d&248)>>3;f===31&&(f+=1+((d&7)<<3)+((a[l]&224)>>5)),s+="."+f}break}case"hvc1":case"hev1":{const o=ae(n,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],c=a&31,u=ne(o,2),d=(a&32)>>5?"H":"L",f=o[12],m=o.subarray(6,12);s+="."+l+c,s+="."+u.toString(16).toUpperCase(),s+="."+d+f;let p="";for(let h=m.length;h--;){const g=m[h];(g||p)&&(p="."+g.toString(16).toUpperCase()+p)}s+=p;break}case"dvh1":case"dvhe":{const o=ae(n,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;s+="."+Ln(a)+"."+Ln(l);break}case"vp09":{const o=ae(n,["vpcC"])[0],a=o[4],l=o[5],c=o[6]>>4&15;s+="."+Ln(a)+"."+Ln(l)+"."+Ln(c);break}case"av01":{const o=ae(n,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,c=o[2]>>>7?"H":"M",u=(o[2]&64)>>6,d=(o[2]&32)>>5,f=a===2&&u?d?12:10:u?10:8,m=(o[2]&16)>>4,p=(o[2]&8)>>3,h=(o[2]&4)>>2,g=o[2]&3;s+="."+a+"."+Ln(l)+c+"."+Ln(f)+"."+m+"."+p+h+g+"."+Ln(1)+"."+Ln(1)+"."+Ln(1)+"."+0;break}}return{codec:s,encrypted:i}}function Sd(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function tl(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Ln(t){return(t<10?"0":"")+t}function DN(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&ae(t,["moov","trak"]).forEach(s=>{const o=ae(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=ae(o,["enca"]);const l=a.length>0;l||(a=ae(o,["encv"])),a.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);ae(u,["sinf"]).forEach(f=>{const m=Mw(f);if(m){const p=m.subarray(8,24);p.some(h=>h!==0)||(P.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Pn.hexDump(p)} -> ${Pn.hexDump(n)}`),m.set(n,8))}})})}),t}function Mw(t){const e=ae(t,["schm"])[0];if(e){const n=qe(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return ae(t,["schi","tenc"])[0]}return null}function PN(t,e){return ae(e,["moof","traf"]).reduce((n,r)=>{const s=ae(r,["tfdt"])[0],i=s[0],o=ae(r,["tfhd"]).reduce((a,l)=>{const c=ne(l,4),u=t[c];if(u){let d=ne(s,4);if(i===1){if(d===wc)return P.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;d*=wc+1,d+=ne(s,8)}const f=u.timescale||9e4,m=d/f;if(Z(m)&&(a===null||m<a))return m}return a},null);return o!==null&&Z(o)&&(n===null||o<n)?o:n},null)}function _N(t,e){let n=0,r=0,s=0;const i=ae(t,["moof","traf"]);for(let o=0;o<i.length;o++){const a=i[o],l=ae(a,["tfhd"])[0],c=ne(l,4),u=e[c];if(!u)continue;const d=u.default,f=ne(l,0)|(d==null?void 0:d.flags);let m=d==null?void 0:d.duration;f&8&&(f&2?m=ne(l,12):m=ne(l,8));const p=u.timescale||9e4,h=ae(a,["trun"]);for(let g=0;g<h.length;g++){if(n=ON(h[g]),!n&&m){const y=ne(h[g],4);n=m*y}u.type===be.VIDEO?r+=n/p:u.type===be.AUDIO&&(s+=n/p)}}if(r===0&&s===0){let o=1/0,a=0,l=0;const c=ae(t,["sidx"]);for(let u=0;u<c.length;u++){const d=IN(c[u]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const f=d.references.reduce((m,p)=>m+p.info.duration||0,0);a=Math.max(a,f+d.earliestPresentationTime/d.timescale),l=a-o}}if(l&&Z(l))return l}return r||s}function ON(t){const e=ne(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let r=0;const s=ne(t,4);for(let i=0;i<s;i++){if(e&256){const o=ne(t,n);r+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return r}function NN(t,e,n){ae(e,["moof","traf"]).forEach(r=>{ae(r,["tfhd"]).forEach(s=>{const i=ne(s,4),o=t[i];if(!o)return;const a=o.timescale||9e4;ae(r,["tfdt"]).forEach(l=>{const c=l[0],u=n*a;if(u){let d=ne(l,4);if(c===0)d-=u,d=Math.max(d,0),Ed(l,4,d);else{d*=Math.pow(2,32),d+=ne(l,8),d-=u,d=Math.max(d,0);const f=Math.floor(d/(wc+1)),m=Math.floor(d%(wc+1));Ed(l,4,f),Ed(l,8,m)}}})})})}function FN(t){const e={valid:null,remainder:null},n=ae(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=ws(t,0,r.byteOffset-8),e.remainder=ws(t,r.byteOffset-8),e}function sn(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function K0(t,e){const n=[],r=e.samples,s=e.timescale,i=e.id;let o=!1;return ae(r,["moof"]).map(l=>{const c=l.byteOffset-8;ae(l,["traf"]).map(d=>{const f=ae(d,["tfdt"]).map(m=>{const p=m[0];let h=ne(m,4);return p===1&&(h*=Math.pow(2,32),h+=ne(m,8)),h/s})[0];return f!==void 0&&(t=f),ae(d,["tfhd"]).map(m=>{const p=ne(m,4),h=ne(m,0)&16777215,g=(h&1)!==0,y=(h&2)!==0,v=(h&8)!==0;let x=0;const b=(h&16)!==0;let T=0;const A=(h&32)!==0;let R=8;p===i&&(g&&(R+=8),y&&(R+=4),v&&(x=ne(m,R),R+=4),b&&(T=ne(m,R),R+=4),A&&(R+=4),e.type==="video"&&(o=MN(e.codec)),ae(d,["trun"]).map(C=>{const k=C[0],L=ne(C,0)&16777215,_=(L&1)!==0;let $=0;const j=(L&4)!==0,B=(L&256)!==0;let K=0;const G=(L&512)!==0;let Y=0;const D=(L&1024)!==0,N=(L&2048)!==0;let U=0;const H=ne(C,4);let z=8;_&&($=ne(C,z),z+=4),j&&(z+=4);let X=$+c;for(let se=0;se<H;se++){if(B?(K=ne(C,z),z+=4):K=x,G?(Y=ne(C,z),z+=4):Y=T,D&&(z+=4),N&&(k===0?U=ne(C,z):U=Nw(C,z),z+=4),e.type===be.VIDEO){let de=0;for(;de<Y;){const te=ne(r,X);if(X+=4,UN(o,r[X])){const Q=r.subarray(X,X+te);Uw(Q,o?2:1,t+U/s,n)}X+=te,de+=te+4}}t+=K/s}}))})})}),n}function MN(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function UN(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Uw(t,e,n,r){const s=Bw(t);let i=0;i+=e;let o=0,a=0,l=0;for(;i<s.length;){o=0;do{if(i>=s.length)break;l=s[i++],o+=l}while(l===255);a=0;do{if(i>=s.length)break;l=s[i++],a+=l}while(l===255);const c=s.length-i;let u=i;if(a<c)i+=a;else if(a>c){P.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(s[u++]===181){const f=Ow(s,u);if(u+=2,f===49){const m=ne(s,u);if(u+=4,m===1195456820){const p=s[u++];if(p===3){const h=s[u++],g=31&h,y=64&h,v=y?2+g*3:0,x=new Uint8Array(v);if(y){x[0]=h;for(let b=1;b<v;b++)x[b]=s[u++]}r.push({type:p,payloadType:o,pts:n,bytes:x})}}}}}else if(o===5&&a>16){const d=[];for(let p=0;p<16;p++){const h=s[u++].toString(16);d.push(h.length==1?"0"+h:h),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,m=new Uint8Array(f);for(let p=0;p<f;p++)m[p]=s[u++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:Hn(m),userDataBytes:m})}}}function Bw(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const s=e-n.length,i=new Uint8Array(s);let o=0;for(r=0;r<s;o++,r++)o===n[0]&&(o++,n.shift()),i[r]=t[o];return i}function BN(t){const e=t[0];let n="",r="",s=0,i=0,o=0,a=0,l=0,c=0;if(e===0){for(;qe(t.subarray(c,c+1))!=="\0";)n+=qe(t.subarray(c,c+1)),c+=1;for(n+=qe(t.subarray(c,c+1)),c+=1;qe(t.subarray(c,c+1))!=="\0";)r+=qe(t.subarray(c,c+1)),c+=1;r+=qe(t.subarray(c,c+1)),c+=1,s=ne(t,12),i=ne(t,16),a=ne(t,20),l=ne(t,24),c=28}else if(e===1){c+=4,s=ne(t,c),c+=4;const d=ne(t,c);c+=4;const f=ne(t,c);for(c+=4,o=2**32*d+f,rN(o)||(o=Number.MAX_SAFE_INTEGER,P.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=ne(t,c),c+=4,l=ne(t,c),c+=4;qe(t.subarray(c,c+1))!=="\0";)n+=qe(t.subarray(c,c+1)),c+=1;for(n+=qe(t.subarray(c,c+1)),c+=1;qe(t.subarray(c,c+1))!=="\0";)r+=qe(t.subarray(c,c+1)),c+=1;r+=qe(t.subarray(c,c+1)),c+=1}const u=t.subarray(c,t.byteLength);return{schemeIdUri:n,value:r,timeScale:s,presentationTime:o,presentationTimeDelta:i,eventDuration:a,id:l,payload:u}}function $N(t,...e){const n=e.length;let r=8,s=n;for(;s--;)r+=e[s].byteLength;const i=new Uint8Array(r);for(i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(t,4),s=0,r=8;s<n;s++)i.set(e[s],r),r+=e[s].byteLength;return i}function jN(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,s;r=0,s=new Uint8Array;let i;r>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),$N([112,115,115,104],new Uint8Array([r,0,0,0]),t,i,s,o,n||new Uint8Array)}function GN(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let r=0;for(;r+32<n;){const s=new DataView(t,r),i=VN(s);e.push(i),r+=i.size}}return e}function VN(t){const e=t.getUint32(0),n=t.byteOffset,r=t.byteLength;if(r<e)return{offset:n,size:r};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const i=t.getUint32(8)>>>24;if(i!==0&&i!==1)return{offset:n,size:e};const o=t.buffer,a=Pn.hexDump(new Uint8Array(o,n+12,16)),l=t.getUint32(28);let c=null,u=null;if(i===0){if(e-32<l||l<22)return{offset:n,size:e};u=new Uint8Array(o,n+32,l)}else if(i===1){if(!l||r<n+32+l*16+16)return{offset:n,size:e};c=[];for(let d=0;d<l;d++)c.push(new Uint8Array(o,n+32+d*16,16))}return{version:i,systemId:a,kids:c,data:u,offset:n,size:e}}let nl={};class sa{static clearKeyUriToKeyIdMap(){nl={}}constructor(e,n,r,s=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Lt.FAIRPLAY:case Lt.WIDEVINE:case Lt.PLAYREADY:case Lt.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&P.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=HN(e);return new sa(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=gN(this.uri);if(n)switch(this.keyFormat){case Lt.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Lt.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=jN(r,null,n),this.keyId=Iw(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const s=new Uint8Array(16);s.set(r,16-r.length),r=s}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=nl[this.uri];if(!r){const s=Object.keys(nl).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,s),nl[this.uri]=r}this.keyId=r}return this}}function HN(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const $w=/\{\$([a-zA-Z0-9-_]+)\}/g;function z0(t){return $w.test(t)}function Rt(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let r=n.length;r--;){const s=n[r],i=e[s];i&&(e[s]=Eh(t,i))}}function Eh(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace($w,r=>{const s=r.substring(2,r.length-1),i=n==null?void 0:n[s];return i===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),r):i})}return e}function W0(t,e,n){let r=t.variableList;r||(t.variableList=r={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(s))i=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,i=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=i||""}function KN(t,e,n){const r=e.IMPORT;if(n&&r in n){let s=t.variableList;s||(t.variableList=s={}),s[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function Os(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function zN(t){return typeof self<"u"&&t===self.ManagedMediaSource}const bc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function WN(t,e){const n=bc[e];return!!n&&!!n[t.slice(0,4)]}function Td(t,e,n=!0){return!t.split(",").some(r=>!jw(r,e,n))}function jw(t,e,n=!0){var r;const s=Os(n);return(r=s==null?void 0:s.isTypeSupported(ia(t,e)))!=null?r:!1}function ia(t,e){return`${e}/mp4;codecs="${t}"`}function Y0(t){if(t){const e=t.substring(0,4);return bc.video[e]}return 2}function Rc(t){return t.split(",").reduce((e,n)=>{const r=bc.video[n];return r?(r*2+e)/(e?3:2):(bc.audio[n]+e)/(e?2:1)},0)}const wd={};function YN(t,e=!0){if(wd[t])return wd[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let r=0;r<n.length;r++)if(jw(n[r],"audio",e))return wd[t]=n[r],n[r];return t}const qN=/flac|opus/i;function Ac(t,e=!0){return t.replace(qN,n=>YN(n.toLowerCase(),e))}function q0(t,e){return t&&t!=="mp4a"?t:e&&e.split(",")[0]}function XN(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");if(r.length>2){let s=r.shift()+".";s+=parseInt(r.shift()).toString(16),s+=("000"+parseInt(r.shift()).toString(16)).slice(-4),e[n]=s}}return e.join(",")}const X0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Q0=/#EXT-X-MEDIA:(.*)/g,QN=/^#EXT(?:INF|-X-TARGETDURATION):/m,J0=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),JN=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class $n{static findGroup(e,n){for(let r=0;r<e.length;r++){const s=e[r];if(s.id===n)return s}}static resolve(e,n){return nm.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return QN.test(e)}static parseMasterPlaylist(e,n){const r=z0(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},i=[];X0.lastIndex=0;let o;for(;(o=X0.exec(e))!=null;)if(o[1]){var a;const c=new Fe(o[1]);Rt(s,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=Eh(s,o[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:$n.resolve(u,n)},f=c.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),ZN(c.CODECS,d),(a=d.unknownCodecs)!=null&&a.length||i.push(d),s.levels.push(d)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const d=new Fe(u);Rt(s,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=Z0(u,n,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):P.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new Fe(u);Rt(s,d,["NAME","VALUE","QUERYPARAM"]),W0(s,d,n)}break}case"CONTENT-STEERING":{const d=new Fe(u);Rt(s,d,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:$n.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=ey(u);break}}}const l=i.length>0&&i.length<s.levels.length;return s.levels=l?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,n,r){let s;const i={},o=r.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(Q0.lastIndex=0;(s=Q0.exec(e))!==null;){const c=new Fe(s[1]),u=c.TYPE;if(u){const d=a[u],f=i[u]||[];i[u]=f,Rt(r,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const m=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],h=c.CHANNELS,g=c.CHARACTERISTICS,y=c["INSTREAM-ID"],v={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||m||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:m,url:c.URI?$n.resolve(c.URI,n):""};if(p&&(v.assocLang=p),h&&(v.channels=h),g&&(v.characteristics=g),y&&(v.instreamId=y),d!=null&&d.length){const x=$n.findGroup(d,v.groupId)||d[0];ty(v,x,"audioCodec"),ty(v,x,"textCodec")}f.push(v)}}return i}static parseLevelPlaylist(e,n,r,s,i,o){const a=new hN(n),l=a.fragments;let c=null,u=0,d=0,f=0,m=0,p=null,h=new md(s,n),g,y,v,x=-1,b=!1,T=null;for(J0.lastIndex=0,a.m3u8=e,a.hasVariableRefs=z0(e);(g=J0.exec(e))!==null;){b&&(b=!1,h=new md(s,n),h.start=f,h.sn=u,h.cc=m,h.level=r,c&&(h.initSegment=c,h.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,T&&(h.setByteRange(T),T=null)));const k=g[1];if(k){h.duration=parseFloat(k);const L=(" "+g[2]).slice(1);h.title=L||null,h.tagList.push(L?["INF",k,L]:["INF",k])}else if(g[3]){if(Z(h.duration)){h.start=f,v&&sy(h,v,a),h.sn=u,h.level=r,h.cc=m,l.push(h);const L=(" "+g[3]).slice(1);h.relurl=Eh(a,L),ny(h,p),p=h,f+=h.duration,u++,d=0,b=!0}}else if(g[4]){const L=(" "+g[4]).slice(1);p?h.setByteRange(L,p):h.setByteRange(L)}else if(g[5])h.rawProgramDateTime=(" "+g[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),x===-1&&(x=l.length);else{if(g=g[0].match(JN),!g){P.warn("No matches on slow regex match for level playlist!");continue}for(y=1;y<g.length&&!(typeof g[y]<"u");y++);const L=(" "+g[y]).slice(1),_=(" "+g[y+1]).slice(1),$=g[y+2]?(" "+g[y+2]).slice(1):"";switch(L){case"PLAYLIST-TYPE":a.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":u=a.startSN=parseInt(_);break;case"SKIP":{const j=new Fe(_);Rt(a,j,["RECENTLY-REMOVED-DATERANGES"]);const B=j.decimalInteger("SKIPPED-SEGMENTS");if(Z(B)){a.skippedSegments=B;for(let G=B;G--;)l.unshift(null);u+=B}const K=j.enumeratedString("RECENTLY-REMOVED-DATERANGES");K&&(a.recentlyRemovedDateranges=K.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(_),1);break;case"VERSION":a.version=parseInt(_);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(_||$)&&h.tagList.push($?[_,$]:[_]);break;case"DISCONTINUITY":m++,h.tagList.push(["DIS"]);break;case"GAP":h.gap=!0,h.tagList.push([L]);break;case"BITRATE":h.tagList.push([L,_]);break;case"DATERANGE":{const j=new Fe(_);Rt(a,j,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Rt(a,j,j.clientAttrs);const B=new Aw(j,a.dateRanges[j.ID]);B.isValid||a.skippedSegments?a.dateRanges[B.id]=B:P.warn(`Ignoring invalid DATERANGE tag: "${_}"`),h.tagList.push(["EXT-X-DATERANGE",_]);break}case"DEFINE":{{const j=new Fe(_);Rt(a,j,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in j?KN(a,j,o):W0(a,j,n)}break}case"DISCONTINUITY-SEQUENCE":m=parseInt(_);break;case"KEY":{const j=Z0(_,n,a);if(j.isSupported()){if(j.method==="NONE"){v=void 0;break}v||(v={}),v[j.keyFormat]&&(v=We({},v)),v[j.keyFormat]=j}else P.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${_}"`);break}case"START":a.startTimeOffset=ey(_);break;case"MAP":{const j=new Fe(_);if(Rt(a,j,["BYTERANGE","URI"]),h.duration){const B=new md(s,n);ry(B,j,r,v),c=B,h.initSegment=c,c.rawProgramDateTime&&!h.rawProgramDateTime&&(h.rawProgramDateTime=c.rawProgramDateTime)}else{const B=h.byteRangeEndOffset;if(B){const K=h.byteRangeStartOffset;T=`${B-K}@${K}`}else T=null;ry(h,j,r,v),c=h,b=!0}break}case"SERVER-CONTROL":{const j=new Fe(_);a.canBlockReload=j.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=j.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&j.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=j.optionalFloat("PART-HOLD-BACK",0),a.holdBack=j.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const j=new Fe(_);a.partTarget=j.decimalFloatingPoint("PART-TARGET");break}case"PART":{let j=a.partList;j||(j=a.partList=[]);const B=d>0?j[j.length-1]:void 0,K=d++,G=new Fe(_);Rt(a,G,["BYTERANGE","URI"]);const Y=new dN(G,h,n,K,B);j.push(Y),h.duration+=Y.duration;break}case"PRELOAD-HINT":{const j=new Fe(_);Rt(a,j,["URI"]),a.preloadHint=j;break}case"RENDITION-REPORT":{const j=new Fe(_);Rt(a,j,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(j);break}default:P.warn(`line parsed but not handled: ${g}`);break}}}p&&!p.relurl?(l.pop(),f-=p.duration,a.partList&&(a.fragmentHint=p)):a.partList&&(ny(h,p),h.cc=m,a.fragmentHint=h,v&&sy(h,v,a));const A=l.length,R=l[0],C=l[A-1];if(f+=a.skippedSegments*a.targetduration,f>0&&A&&C){a.averagetargetduration=f/A;const k=C.sn;a.endSN=k!=="initSegment"?k:0,a.live||(C.endList=!0),R&&(a.startCC=R.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=m,x>0&&eF(l,x),a}}function Z0(t,e,n){var r,s;const i=new Fe(t);Rt(n,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(r=i.METHOD)!=null?r:"",a=i.URI,l=i.hexadecimalInteger("IV"),c=i.KEYFORMATVERSIONS,u=(s=i.KEYFORMAT)!=null?s:"identity";a&&i.IV&&!l&&P.error(`Invalid IV: ${i.IV}`);const d=a?$n.resolve(a,e):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new sa(o,d,u,f,l)}function ey(t){const n=new Fe(t).decimalFloatingPoint("TIME-OFFSET");return Z(n)?n:null}function ZN(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const s=n.filter(i=>WN(i,r));s.length&&(e[`${r}Codec`]=s.join(","),n=n.filter(i=>s.indexOf(i)===-1))}),e.unknownCodecs=n}function ty(t,e,n){const r=e[n];r&&(t[n]=r)}function eF(t,e){let n=t[e];for(let r=e;r--;){const s=t[r];if(!s)return;s.programDateTime=n.programDateTime-s.duration*1e3,n=s}}function ny(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Z(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function ry(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function sy(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&r.push(t)}var ye={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},re={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function iy(t){const{type:e}=t;switch(e){case ye.AUDIO_TRACK:return re.AUDIO;case ye.SUBTITLE_TRACK:return re.SUBTITLE;default:return re.MAIN}}function bd(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class tF{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,s=n.loader,i=r||s,o=new i(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ye.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,n){const{id:r,level:s,pathwayId:i,url:o,deliveryDirectives:a}=n;this.load({id:r,level:s,pathwayId:i,responseType:"text",type:ye.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:ye.AUDIO_TRACK,url:i,deliveryDirectives:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:ye.SUBTITLE_TRACK,url:i,deliveryDirectives:o})}load(e){var n;const r=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=s.context;if(c&&c.url===e.url&&c.level===e.level){P.trace("[playlist-loader]: playlist request ongoing");return}P.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===ye.MANIFEST?i=r.manifestLoadPolicy.default:i=We({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Z((n=e.deliveryDirectives)==null?void 0:n.part)){let c;if(e.type===ye.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===ye.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===ye.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const f=Math.max(u*3,d*.8)*1e3;i=We({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const o=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,d,f)=>{const m=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),f||null,u);return}u.parsing.start=performance.now(),$n.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(c,u,d,f||null,m):this.handleMasterPlaylist(c,u,d,f)},onError:(c,u,d,f)=>{this.handleNetworkError(u,d,!1,c,f)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};s.load(e,a,l)}handleMasterPlaylist(e,n,r,s){const i=this.hls,o=e.data,a=bd(e,r),l=$n.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,r,l.playlistParsingError,s,n);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:p}=l;this.variableList=p;const{AUDIO:h=[],SUBTITLES:g,"CLOSED-CAPTIONS":y}=$n.parseMasterPlaylistMedia(o,a,l);h.length&&!h.some(x=>!x.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(P.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Fe({}),bitrate:0,url:""})),i.trigger(S.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:g,captions:y,contentSteering:c,url:a,stats:n,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:m,variableList:p})}handleTrackOrLevelPlaylist(e,n,r,s,i){const o=this.hls,{id:a,level:l,type:c}=r,u=bd(e,r),d=0,f=Z(l)?l:Z(a)?a:0,m=iy(r),p=$n.parseLevelPlaylist(e.data,u,f,m,d,this.variableList);if(c===ye.MANIFEST){const h={attrs:new Fe({}),bitrate:0,details:p,name:"",url:u};o.trigger(S.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:u,stats:n,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=p,this.handlePlaylistLoaded(p,e,n,r,s,i)}handleManifestParsingError(e,n,r,s,i){this.hls.trigger(S.ERROR,{type:ie.NETWORK_ERROR,details:F.MANIFEST_PARSING_ERROR,fatal:n.type===ye.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:s,stats:i})}handleNetworkError(e,n,r=!1,s,i){let o=`A network ${r?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===ye.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===ye.AUDIO_TRACK||e.type===ye.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);P.warn(`[playlist-loader]: ${o}`);let l=F.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case ye.MANIFEST:l=r?F.MANIFEST_LOAD_TIMEOUT:F.MANIFEST_LOAD_ERROR,c=!0;break;case ye.LEVEL:l=r?F.LEVEL_LOAD_TIMEOUT:F.LEVEL_LOAD_ERROR,c=!1;break;case ye.AUDIO_TRACK:l=r?F.AUDIO_TRACK_LOAD_TIMEOUT:F.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case ye.SUBTITLE_TRACK:l=r?F.SUBTITLE_TRACK_LOAD_TIMEOUT:F.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:ie.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:n,stats:i};if(s){const f=(n==null?void 0:n.url)||e.url;d.response=nt({url:f,data:void 0},s)}this.hls.trigger(S.ERROR,d)}handlePlaylistLoaded(e,n,r,s,i,o){const a=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:f}=s,m=bd(n,s),p=iy(s),h=typeof s.level=="number"&&p===re.MAIN?c:void 0;if(!e.fragments.length){const y=new Error("No Segments found in Playlist");a.trigger(S.ERROR,{type:ie.NETWORK_ERROR,details:F.LEVEL_EMPTY_ERROR,fatal:!1,url:m,error:y,reason:y.message,response:n,context:s,level:h,parent:p,networkDetails:i,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g){a.trigger(S.ERROR,{type:ie.NETWORK_ERROR,details:F.LEVEL_PARSING_ERROR,fatal:!1,url:m,error:g,reason:g.message,response:n,context:s,level:h,parent:p,networkDetails:i,stats:r});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case ye.MANIFEST:case ye.LEVEL:a.trigger(S.LEVEL_LOADED,{details:e,level:h||0,id:u||0,stats:r,networkDetails:i,deliveryDirectives:f});break;case ye.AUDIO_TRACK:a.trigger(S.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break;case ye.SUBTITLE_TRACK:a.trigger(S.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break}}}function Gw(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Vw(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){P.debug(`[texttrack-utils]: ${r}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){P.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}n==="disabled"&&(t.mode=n)}function li(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function Sh(t,e,n,r){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const i=rF(t.cues,e,n);for(let o=0;o<i.length;o++)(!r||r(i[o]))&&t.removeCue(i[o])}s==="disabled"&&(t.mode=s)}function nF(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,s=n;for(;r<=s;){const i=Math.floor((s+r)/2);if(e<t[i].startTime)s=i-1;else if(e>t[i].startTime&&r<n)r=i+1;else return i}return t[r].startTime-e<e-t[s].startTime?r:s}function rF(t,e,n){const r=[],s=nF(t,e);if(s>-1)for(let i=s,o=t.length;i<o;i++){const a=t[i];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function Pl(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}var mn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const sF=.25;function Th(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function oy(t,e,n,r,s){let i=new t(e,n,"");try{i.value=r,s&&(i.type=s)}catch{i=new t(e,n,JSON.stringify(s?nt({type:s},r):r))}return i}const rl=(()=>{const t=Th();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Rd(t,e){return t.getTime()/1e3-e}function iF(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class oF{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(li(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return Gw(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:s}}}=this;if(!r&&!s)return;const{samples:i}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=Th();if(o)for(let a=0;a<i.length;a++){const l=i[a].type;if(l===mn.emsg&&!r||!s)continue;const c=Pw(i[a].data);if(c){const u=i[a].pts;let d=u+i[a].duration;d>rl&&(d=rl),d-u<=0&&(d=u+sF);for(let m=0;m<c.length;m++){const p=c[m];if(!Dw(p)){this.updateId3CueEnds(u,l);const h=oy(o,u,d,p,l);h&&this.id3Track.addCue(h)}}}}}updateId3CueEnds(e,n){var r;const s=(r=this.id3Track)==null?void 0:r.cues;if(s)for(let i=s.length;i--;){const o=s[i];o.type===n&&o.startTime<e&&o.endTime===rl&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:s}){const{id3Track:i,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(i&&(a||l)){let c;s==="audio"?c=u=>u.type===mn.audioId3&&l:s==="video"?c=u=>u.type===mn.emsg&&a:c=u=>u.type===mn.audioId3&&l||u.type===mn.emsg&&a,Sh(i,n,r,c)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:s}=this,{dateRanges:i}=n,o=Object.keys(i);if(s){const u=Object.keys(r).filter(d=>!o.includes(d));for(let d=u.length;d--;){const f=u[d];Object.keys(r[f].cues).forEach(m=>{s.removeCue(r[f].cues[m])}),delete r[f]}}const a=n.fragments[n.fragments.length-1];if(o.length===0||!Z(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=Th();for(let u=0;u<o.length;u++){const d=o[u],f=i[d],m=Rd(f.startDate,l),p=r[d],h=(p==null?void 0:p.cues)||{};let g=(p==null?void 0:p.durationKnown)||!1,y=rl;const v=f.endDate;if(v)y=Rd(v,l),g=!0;else if(f.endOnNext&&!g){const b=o.reduce((T,A)=>{if(A!==f.id){const R=i[A];if(R.class===f.class&&R.startDate>f.startDate&&(!T||f.startDate<T.startDate))return R}return T},null);b&&(y=Rd(b.startDate,l),g=!0)}const x=Object.keys(f.attr);for(let b=0;b<x.length;b++){const T=x[b];if(!cN(T))continue;const A=h[T];if(A)g&&!p.durationKnown&&(A.endTime=y);else if(c){let R=f.attr[T];uN(T)&&(R=iF(R));const C=oy(c,m,y,{key:T,data:R},mn.dateRange);C&&(C.id=d,this.id3Track.addCue(C),h[T]=C)}}r[d]={cues:h,dateRange:f,durationKnown:g}}}}class aF{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:r,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&r||n;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=i!==void 0?i:o*s);const u=s;return c+Math.min(this.stallCount*1,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,r=this.levelDetails;if(e===null||n===null||r===null)return null;const s=r.edge,i=e-n-this.edgeStalled,o=s-r.totalduration,a=s-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(S.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(S.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var r;n.details===F.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&P.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:i}=this.config;if(!s||i===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const a=r-o,l=Math.min(this.maxLatency,o+n.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,i)),d=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const wh=["NONE","TYPE-0","TYPE-1",null];function lF(t){return wh.indexOf(t)>-1}const Cc=["SDR","PQ","HLG"];function cF(t){return!!t&&Cc.indexOf(t)>-1}var _l={No:"",Yes:"YES",v2:"v2"};function ay(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,s=r<e/2;return e&&s?n?_l.v2:_l.Yes:_l.No}class ly{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class Vi{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return cy(this._audioGroups,e)}hasSubtitleGroup(e){return cy(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function cy(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Ad(t,e){const n=e.startPTS;if(Z(n)){let r=0,s;e.sn>t.sn?(r=n-t.start,s=t):(r=t.start-n,s=e),s.duration!==r&&(s.duration=r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Hw(t,e,n,r,s,i){r-n<=0&&(P.warn("Fragment should have a positive duration",e),r=n+e.duration,i=s+e.duration);let a=n,l=r;const c=e.startPTS,u=e.endPTS;if(Z(c)){const g=Math.abs(c-n);Z(e.deltaPTS)?e.deltaPTS=Math.max(g,e.deltaPTS):e.deltaPTS=g,a=Math.max(n,c),n=Math.min(n,c),s=Math.min(s,e.startDTS),l=Math.min(r,u),r=Math.max(r,u),i=Math.max(i,e.endDTS)}const d=n-e.start;e.start!==0&&(e.start=n),e.duration=r-e.start,e.startPTS=n,e.maxStartPTS=a,e.startDTS=s,e.endPTS=r,e.minEndPTS=l,e.endDTS=i;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let m;const p=f-t.startSN,h=t.fragments;for(h[p]=e,m=p;m>0;m--)Ad(h[m],h[m-1]);for(m=p;m<h.length-1;m++)Ad(h[m],h[m+1]);return t.fragmentHint&&Ad(h[h.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function uF(t,e){let n=null;const r=t.fragments;for(let a=r.length-1;a>=0;a--){const l=r[a].initSegment;if(l){n=l;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;hF(t,e,(a,l,c,u)=>{if(e.skippedSegments&&l.cc!==a.cc){const d=a.cc-l.cc;for(let f=c;f<u.length;f++)u[f].cc+=d}Z(a.startPTS)&&Z(a.endPTS)&&(l.start=l.startPTS=a.startPTS,l.startDTS=a.startDTS,l.maxStartPTS=a.maxStartPTS,l.endPTS=a.endPTS,l.endDTS=a.endDTS,l.minEndPTS=a.minEndPTS,l.duration=a.endPTS-a.startPTS,l.duration&&(s=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=a.elementaryStreams,l.loader=a.loader,l.stats=a.stats,a.initSegment&&(l.initSegment=a.initSegment,n=a.initSegment)});const i=e.fragments;if(n&&(e.fragmentHint?i.concat(e.fragmentHint):i).forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(l.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=i.some(a=>!a),e.deltaUpdateFailed){P.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)i.shift();e.startSN=i[0].sn}else e.canSkipDateRanges&&(e.dateRanges=dF(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=i[i.length-1].cc}fF(t.partList,e.partList,(a,l)=>{l.elementaryStreams=a.elementaryStreams,l.stats=a.stats}),s?Hw(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Kw(t,e),i.length&&(e.totalduration=e.edge-i[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const a=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=a),e.driftEndTime=o,e.driftEnd=a}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function dF(t,e,n){const r=We({},t);return n&&n.forEach(s=>{delete r[s]}),Object.keys(e).forEach(s=>{const i=new Aw(e[s].attr,r[s]);i.isValid?r[s]=i:P.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[s].attr)}"`)}),r}function fF(t,e,n){if(t&&e){let r=0;for(let s=0,i=t.length;s<=i;s++){const o=t[s],a=e[s+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function hF(t,e,n){const r=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let c=s;c<=i;c++){const u=l[o+c];let d=a[c];r&&!d&&c<r&&(d=e.fragments[c]=u),u&&d&&n(u,d,c,a)}}function Kw(t,e){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||bh(e,r[n].start)}function bh(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function pF(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments;if(r.length&&n*4>e){const i=r[r.length-1].duration*1e3;i<n&&(n=i)}}else n/=2;return Math.round(n)}function mF(t,e,n){if(!(t!=null&&t.details))return null;const r=t.details;let s=r.fragments[e-r.startSN];return s||(s=r.fragmentHint,s&&s.sn===e)?s:e<r.startSN&&n&&n.sn===e?n:null}function uy(t,e,n){var r;return t!=null&&t.details?zw((r=t.details)==null?void 0:r.partList,e,n):null}function zw(t,e,n){if(t)for(let r=t.length;r--;){const s=t[r];if(s.index===n&&s.fragment.sn===e)return s}return null}function Ww(t){t.forEach((e,n)=>{const{details:r}=e;r!=null&&r.fragments&&r.fragments.forEach(s=>{s.level=n})})}function Lc(t){switch(t.details){case F.FRAG_LOAD_TIMEOUT:case F.KEY_LOAD_TIMEOUT:case F.LEVEL_LOAD_TIMEOUT:case F.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function dy(t,e){const n=Lc(e);return t.default[`${n?"timeout":"error"}Retry`]}function om(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function fy(t){return nt(nt({},t),{errorRetry:null,timeoutRetry:null})}function Ic(t,e,n,r){if(!t)return!1;const s=r==null?void 0:r.code,i=e<t.maxNumRetry&&(gF(s)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,i):i}function gF(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const Yw={search:function(t,e){let n=0,r=t.length-1,s=null,i=null;for(;n<=r;){s=(n+r)/2|0,i=t[s];const o=e(i);if(o>0)n=s+1;else if(o<0)r=s-1;else return i}return null}};function yF(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!Z(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;n=n||0;for(let i=0;i<t.length;++i){const o=t[i];if(xF(e,n,o))return o}return null}function kc(t,e,n=0,r=0,s=.005){let i=null;if(t){i=e[t.sn-e[0].sn+1]||null;const a=t.endDTS-n;a>0&&a<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(i=e[0]);if(i&&((!t||t.level===i.level)&&Rh(n,r,i)===0||vF(i,t,Math.min(s,r))))return i;const o=Yw.search(e,Rh.bind(null,n,r));return o&&(o!==t||!i)?o:i}function vF(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((s,i)=>(i[0]==="INF"&&(s+=parseFloat(i[1])),s),n);return t.start<=r}return!1}function Rh(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function xF(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function EF(t,e){return Yw.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var it={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},an={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class SF{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=P.log.bind(P,"[info]:"),this.warn=P.warn.bind(P,"[warning]:"),this.error=P.error.bind(P,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.ERROR,this.onError,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.ERROR,this.onError,this),e.off(S.ERROR,this.onErrorOut,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===re.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r,s;if(n.fatal)return;const i=this.hls,o=n.context;switch(n.details){case F.FRAG_LOAD_ERROR:case F.FRAG_LOAD_TIMEOUT:case F.KEY_LOAD_ERROR:case F.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case F.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction={action:it.DoNothing,flags:an.None};return}case F.FRAG_GAP:case F.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=it.SendAlternateToPenaltyBox;return}case F.LEVEL_EMPTY_ERROR:case F.LEVEL_PARSING_ERROR:{var a,l;const c=n.parent===re.MAIN?n.level:i.loadLevel;n.details===F.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,c):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,c))}return;case F.LEVEL_LOAD_ERROR:case F.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case F.AUDIO_TRACK_LOAD_ERROR:case F.AUDIO_TRACK_LOAD_TIMEOUT:case F.SUBTITLE_LOAD_ERROR:case F.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=i.levels[i.loadLevel];if(c&&(o.type===ye.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===ye.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=it.SendAlternateToPenaltyBox,n.errorAction.flags=an.MoveAllAlternatesMatchingHost;return}}return;case F.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=i.levels[i.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?n.errorAction={action:it.SendAlternateToPenaltyBox,flags:an.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(n)}return;case F.BUFFER_ADD_CODEC_ERROR:case F.REMUX_ALLOC_ERROR:case F.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(s=n.level)!=null?s:i.loadLevel);return;case F.INTERNAL_EXCEPTION:case F.BUFFER_APPENDING_ERROR:case F.BUFFER_FULL_ERROR:case F.LEVEL_SWITCH_ERROR:case F.BUFFER_STALLED_ERROR:case F.BUFFER_SEEK_OVER_HOLE:case F.BUFFER_NUDGE_ON_STALL:n.errorAction={action:it.DoNothing,flags:an.None};return}n.type===ie.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,s=dy(r.config.playlistLoadPolicy,e),i=this.playlistError++;if(Ic(s,i,Lc(e),e.response))return{action:it.RetryRequest,flags:an.None,retryConfig:s,retryCount:i};const a=this.getLevelSwitchAction(e,n);return s&&(a.retryConfig=s,a.retryCount=i),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),s=n.levels[r],{fragLoadPolicy:i,keyLoadPolicy:o}=n.config,a=dy(e.details.startsWith("key")?o:i,e),l=n.levels.reduce((u,d)=>u+d.fragmentError,0);if(s&&(e.details!==F.FRAG_GAP&&s.fragmentError++,Ic(a,l,Lc(e),e.response)))return{action:it.RetryRequest,flags:an.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,r);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const s=this.hls.levels[n];if(s){var i,o;const c=e.details;s.loadError++,c===F.BUFFER_APPEND_ERROR&&s.fragmentError++;let u=-1;const{levels:d,loadLevel:f,minAutoLevel:m,maxAutoLevel:p}=r;r.autoLevelEnabled||(r.loadLevel=-1);const h=(i=e.frag)==null?void 0:i.type,y=(h===re.AUDIO&&c===F.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===F.BUFFER_ADD_CODEC_ERROR||c===F.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:A})=>s.audioCodec!==A),x=e.sourceBufferName==="video"&&(c===F.BUFFER_ADD_CODEC_ERROR||c===F.BUFFER_APPEND_ERROR)&&d.some(({codecSet:A,audioCodec:R})=>s.codecSet!==A&&s.audioCodec===R),{type:b,groupId:T}=(o=e.context)!=null?o:{};for(let A=d.length;A--;){const R=(A+f)%d.length;if(R!==f&&R>=m&&R<=p&&d[R].loadError===0){var a,l;const C=d[R];if(c===F.FRAG_GAP&&h===re.MAIN&&e.frag){const k=d[R].details;if(k){const L=kc(e.frag,k.fragments,e.frag.start);if(L!=null&&L.gap)continue}}else{if(b===ye.AUDIO_TRACK&&C.hasAudioGroup(T)||b===ye.SUBTITLE_TRACK&&C.hasSubtitleGroup(T))continue;if(h===re.AUDIO&&(a=s.audioGroups)!=null&&a.some(k=>C.hasAudioGroup(k))||h===re.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(k=>C.hasSubtitleGroup(k))||y&&s.audioCodec===C.audioCodec||!y&&s.audioCodec!==C.audioCodec||x&&s.codecSet===C.codecSet)continue}u=R;break}}if(u>-1&&r.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:it.SendAlternateToPenaltyBox,flags:an.None,nextAutoLevel:u}}return{action:it.SendAlternateToPenaltyBox,flags:an.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case it.DoNothing:break;case it.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==F.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:s,hdcpLevel:i,nextAutoLevel:o}=r;switch(s){case an.None:this.switchLevel(e,o);break;case an.MoveAllAlternatesMatchingHDCP:i&&(n.maxHdcpLevel=wh[wh.indexOf(i)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class am{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=P.log.bind(P,`${n}:`),this.warn=P.warn.bind(P,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const s=n==null?void 0:n.renditionReports;if(s){let i=-1;for(let o=0;o<s.length;o++){const a=s[o];let l;try{l=new self.URL(a.URI,n.url).href}catch(c){P.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===e){i=o;break}else l===e.substring(0,l.length)&&(i=o)}if(i!==-1){const o=s[i],a=parseInt(o["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let l=parseInt(o["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(n.age-n.partTarget,n.targetduration);l>=0&&u>n.partTarget&&(l+=1)}const c=r&&ay(r);return new ly(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,r){const{details:s,stats:i}=n,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;if(s.advancedDateTime=Date.now()-a,s.live||r!=null&&r.live){if(s.reloaded(r),r&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),r&&s.fragments.length>0&&uF(r,s),!this.canLoad||!s.live)return;let l,c,u;if(s.canBlockReload&&s.endSN&&s.advanced){const g=this.hls.config.lowLatencyMode,y=s.lastPartSn,v=s.endSN,x=s.lastPartIndex,b=x!==-1,T=y===v,A=g?0:x;b?(c=T?v+1:y,u=T?A:x+1):c=v+1;const R=s.age,C=R+s.ageHeader;let k=Math.min(C-s.partTarget,s.targetduration*1.5);if(k>0){if(r&&k>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${k} with playlist age: ${s.age}`),k=0;else{const L=Math.floor(k/s.targetduration);if(c+=L,u!==void 0){const _=Math.round(k%s.targetduration/s.partTarget);u+=_}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${R.toFixed(2)}s goal: ${k} skip sn ${L} to part ${u}`)}s.tuneInGoal=k}if(l=this.getDeliveryDirectives(s,n.deliveryDirectives,c,u),g||!T){this.loadPlaylist(l);return}}else(s.canBlockReload||s.canSkipUntil)&&(l=this.getDeliveryDirectives(s,n.deliveryDirectives,c,u));const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,m=(s.edge-f)*1e3,p=pF(s,m);s.updated&&o>this.requestScheduled+p&&(this.requestScheduled=i.loading.start),c!==void 0&&s.canBlockReload?this.requestScheduled=i.loading.first+p-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p);let h=this.requestScheduled-o;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),h)}else this.clearTimer()}getDeliveryDirectives(e,n,r,s){let i=ay(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,s=n.part,i=_l.No),new ly(r,s,i)}checkRetry(e){const n=e.details,r=Lc(e),s=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=s||{},l=!!s&&!!a&&(i===it.RetryRequest||!s.resolved&&i===it.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(r&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const u=om(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${u}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}class zs{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class TF{constructor(e,n,r,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new zs(e),this.fast_=new zs(n),this.defaultTTFB_=s,this.ttfb_=new zs(e)}update(e,n){const{slow_:r,fast_:s,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new zs(e,r.getEstimate(),r.getTotalWeight())),s.halfLife!==n&&(this.fast_=new zs(n,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new zs(e,i.getEstimate(),i.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,s=e/1e3,i=r/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const qw={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},hy={};function wF(t,e,n,r,s,i){const o=t.audioCodec?t.audioGroups:null,a=i==null?void 0:i.audioCodec,l=i==null?void 0:i.channels,c=l?parseInt(l):a?1/0:2;let u=null;if(o!=null&&o.length)try{o.length===1&&o[0]?u=e.groups[o[0]].channels:u=o.reduce((d,f)=>{if(f){const m=e.groups[f];if(!m)throw new Error(`Audio track group ${f} not found`);Object.keys(m.channels).forEach(p=>{d[p]=(d[p]||0)+m.channels[p]})}return d},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(s,8e6))||!!u&&Z(c)&&Object.keys(u).some(d=>parseInt(d)>c)}function bF(t,e,n){const r=t.videoCodec,s=t.audioCodec;if(!r||!s||!n)return Promise.resolve(qw);const i={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},o=t.videoRange;o!=="SDR"&&(i.transferFunction=o.toLowerCase());const a=r.split(",").map(l=>({type:"media-source",video:nt(nt({},i),{},{contentType:ia(l,"video")})}));return s&&t.audioGroups&&t.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const d=u.channels||"",f=parseFloat(d);Z(f)&&f>2&&a.push.apply(a,s.split(",").map(m=>({type:"media-source",audio:{contentType:ia(m,"audio"),channels:""+f}})))}}))}),Promise.all(a.map(l=>{const c=RF(l);return hy[c]||(hy[c]=n.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function RF(t){const{audio:e,video:n}=t,r=n||e;if(r){const s=r.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${s}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${s}`}return""}function AF(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function CF(t,e){let n=!1,r=[];return t&&(n=t!=="SDR",r=[t]),e&&(r=e.allowedVideoRanges||Cc.slice(0),n=e.preferHDR!==void 0?e.preferHDR:AF(),n?r=r.filter(s=>s!=="SDR"):r=["SDR"]),{preferHDR:n,allowedVideoRanges:r}}function LF(t,e,n,r,s){const i=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=o&&parseInt(o)===2;let c=!0,u=!1,d=1/0,f=1/0,m=1/0,p=0,h=[];const{preferHDR:g,allowedVideoRanges:y}=CF(e,s);for(let T=i.length;T--;){const A=t[i[T]];c=A.channels[2]>0,d=Math.min(d,A.minHeight),f=Math.min(f,A.minFramerate),m=Math.min(m,A.minBitrate);const R=y.filter(C=>A.videoRanges[C]>0);R.length>0&&(u=!0,h=R)}d=Z(d)?d:0,f=Z(f)?f:0;const v=Math.max(1080,d),x=Math.max(30,f);return m=Z(m)?m:n,n=Math.max(m,n),u||(e=void 0,h=[]),{codecSet:i.reduce((T,A)=>{const R=t[A];if(A===T)return T;if(R.minBitrate>n)return qn(A,`min bitrate of ${R.minBitrate} > current estimate of ${n}`),T;if(!R.hasDefaultAudio)return qn(A,"no renditions with default or auto-select sound found"),T;if(a&&A.indexOf(a.substring(0,4))%5!==0)return qn(A,`audio codec preference "${a}" not found`),T;if(o&&!l){if(!R.channels[o])return qn(A,`no renditions with ${o} channel sound found (channels options: ${Object.keys(R.channels)})`),T}else if((!a||l)&&c&&R.channels[2]===0)return qn(A,"no renditions with stereo sound found"),T;return R.minHeight>v?(qn(A,`min resolution of ${R.minHeight} > maximum of ${v}`),T):R.minFramerate>x?(qn(A,`min framerate of ${R.minFramerate} > maximum of ${x}`),T):h.some(C=>R.videoRanges[C]>0)?R.maxScore<p?(qn(A,`max score of ${R.maxScore} < selected max of ${p}`),T):T&&(Rc(A)>=Rc(T)||R.fragmentError>t[T].fragmentError)?T:(p=R.maxScore,A):(qn(A,`no variants with VIDEO-RANGE of ${JSON.stringify(h)} found`),T)},void 0),videoRanges:h,preferHDR:g,minFramerate:f,minBitrate:m}}function qn(t,e){P.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function IF(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const s=n.channels||"2";return r.channels[s]=(r.channels[s]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function kF(t,e,n,r){return t.slice(n,r+1).reduce((s,i)=>{if(!i.codecSet)return s;const o=i.audioGroups;let a=s[i.codecSet];a||(s[i.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,i.bitrate);const l=Math.min(i.height,i.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,i.frameRate),a.maxScore=Math.max(a.maxScore,i.score),a.fragmentError+=i.fragmentError,a.videoRanges[i.videoRange]=(a.videoRanges[i.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(d=>{a.channels[d]=(a.channels[d]||0)+u.channels[d]}))}),s},{})}function jn(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const s=e[r];if(bs(t,s,n))return r}return-1}function bs(t,e,n){const{groupId:r,name:s,lang:i,assocLang:o,default:a}=t,l=t.forced;return(r===void 0||e.groupId===r)&&(s===void 0||e.name===s)&&(i===void 0||e.lang===i)&&(i===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||DF(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function DF(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(s=>r.indexOf(s)===-1)}function as(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function PF(t,e,n,r,s){const i=e[r],a=e.reduce((f,m,p)=>{const h=m.uri;return(f[h]||(f[h]=[])).push(p),f},{})[i.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=i.videoRange,c=i.frameRate,u=i.codecSet.substring(0,4),d=py(e,r,f=>{if(f.videoRange!==l||f.frameRate!==c||f.codecSet.substring(0,4)!==u)return!1;const m=f.audioGroups,p=n.filter(h=>!m||m.indexOf(h.groupId)!==-1);return jn(t,p,s)>-1});return d>-1?d:py(e,r,f=>{const m=f.audioGroups,p=n.filter(h=>!m||m.indexOf(h.groupId)!==-1);return jn(t,p,s)>-1})}function py(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}class _F{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:r,hls:s}=this,{autoLevelEnabled:i,media:o}=s;if(!n||!o)return;const a=performance.now(),l=r?r.stats:n.stats,c=r?r.duration:n.duration,u=a-l.loading.start,d=s.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!i||o.paused||!o.playbackRate||!o.readyState)return;const f=s.mainForwardBufferInfo;if(f===null)return;const m=this.bwEstimator.getEstimateTTFB(),p=Math.abs(o.playbackRate);if(u<=Math.max(m,1e3*(c/(p*2))))return;const h=f.len/p,g=l.loading.first?l.loading.first-l.loading.start:-1,y=l.loaded&&g>-1,v=this.getBwEstimate(),x=s.levels,b=x[n.level],T=l.total||Math.max(l.loaded,Math.round(c*b.averageBitrate/8));let A=y?u-g:u;A<1&&y&&(A=Math.min(u,l.loaded*8/v));const R=y?l.loaded*1e3/A:0,C=R?(T-l.loaded)/R:T*8/v+m/1e3;if(C<=h)return;const k=R?R*8:v;let L=Number.POSITIVE_INFINITY,_;for(_=n.level-1;_>d;_--){const j=x[_].maxBitrate;if(L=this.getTimeToLoadFrag(m/1e3,k,c*j,!x[_].details),L<h)break}if(L>=C||L>c*10)return;s.nextLoadLevel=s.nextAutoLevel=_,y?this.bwEstimator.sample(u-Math.min(m,g),l.loaded):this.bwEstimator.sampleTTFB(u);const $=x[_].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>$&&this.resetEstimator($),this.clearTimer(),P.warn(`[abr] Fragment ${n.sn}${r?" part "+r.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${h.toFixed(3)} s
      Estimated load time for current fragment: ${C.toFixed(3)} s
      Estimated load time for down switch fragment: ${L.toFixed(3)} s
      TTFB estimate: ${g|0} ms
      Current BW estimate: ${Z(v)?v|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${_} @ ${$|0} bps`),s.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(P.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new TF(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(S.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var s;this.fragCurrent=r,this.partCurrent=(s=n.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case F.BUFFER_ADD_CODEC_ERROR:case F.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case F.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:s,partCurrent:i}=this;if(r&&s&&r.sn===s.sn&&r.level===s.level){const o=performance.now(),a=i?i.stats:r.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,r,s){const i=e+r/n,o=s?this.lastLevelLoadSec:0;return i+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:s}=n.stats,i=s.end-s.start;Z(i)&&(this.lastLevelLoadSec=i/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:r}){const s=r?r.stats:n.stats;if(n.type===re.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const i=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,l=(o.loaded?o.loaded.duration:0)+i;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const i={stats:s,frag:n,part:r,id:n.type};this.onFragBuffered(S.FRAG_BUFFERED,i),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:s}=n,i=s!=null&&s.stats.loaded?s.stats:r.stats;if(i.aborted||this.ignoreFragment(r))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==re.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,n,e,0,s,1,1);if(i>-1)return i;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return P.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const i=r&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,i)&&o[e].loadError<=o[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{maxAutoLevel:s,config:i,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;if(c){const g=this.findBestLevel(l,o,s,c,0,u,d);if(g>=0)return g}let f=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!c){const g=this.bitrateTestDelay;g&&(f=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-g,P.info(`[abr] bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),u=d=1)}const m=this.findBestLevel(l,o,s,c,f,u,d);if(P.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${m}`),m>-1)return m;const p=r.levels[o],h=r.levels[r.loadLevel];return(p==null?void 0:p.bitrate)<(h==null?void 0:h.bitrate)?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,s,i,o,a){var l;const c=s+i,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:f,partCurrent:m}=this,{levels:p,allAudioTracks:h,loadLevel:g,config:y}=this.hls;if(p.length===1)return 0;const v=p[d],x=!!(v!=null&&(l=v.details)!=null&&l.live),b=g===-1||u===-1;let T,A="SDR",R=(v==null?void 0:v.frameRate)||0;const{audioPreference:C,videoPreference:k}=y,L=this.audioTracksByGroup||(this.audioTracksByGroup=IF(h));if(b){if(this.firstSelection!==-1)return this.firstSelection;const K=this.codecTiers||(this.codecTiers=kF(p,L,n,r)),G=LF(K,A,e,C,k),{codecSet:Y,videoRanges:D,minFramerate:N,minBitrate:U,preferHDR:H}=G;T=Y,A=H?D[D.length-1]:D[0],R=N,e=Math.max(e,U),P.log(`[abr] picked start tier ${JSON.stringify(G)}`)}else T=v==null?void 0:v.codecSet,A=v==null?void 0:v.videoRange;const _=m?m.duration:f?f.duration:0,$=this.bwEstimator.getEstimateTTFB()/1e3,j=[];for(let K=r;K>=n;K--){var B;const G=p[K],Y=K>d;if(!G)continue;if(y.useMediaCapabilities&&!G.supportedResult&&!G.supportedPromise){const se=navigator.mediaCapabilities;typeof(se==null?void 0:se.decodingInfo)=="function"&&wF(G,L,A,R,e,C)?(G.supportedPromise=bF(G,L,se),G.supportedPromise.then(de=>{if(!this.hls)return;G.supportedResult=de;const te=this.hls.levels,Q=te.indexOf(G);de.error?P.warn(`[abr] MediaCapabilities decodingInfo error: "${de.error}" for level ${Q} ${JSON.stringify(de)}`):de.supported||(P.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Q} ${JSON.stringify(de)}`),Q>-1&&te.length>1&&(P.log(`[abr] Removing unsupported level ${Q}`),this.hls.removeLevel(Q)))})):G.supportedResult=qw}if(T&&G.codecSet!==T||A&&G.videoRange!==A||Y&&R>G.frameRate||!Y&&R>0&&R<G.frameRate||G.supportedResult&&!((B=G.supportedResult.decodingInfoResults)!=null&&B[0].smooth)){j.push(K);continue}const D=G.details,N=(m?D==null?void 0:D.partTarget:D==null?void 0:D.averagetargetduration)||_;let U;Y?U=a*e:U=o*e;const H=_&&s>=_*2&&i===0?p[K].averageBitrate:p[K].maxBitrate,z=this.getTimeToLoadFrag($,U,H*N,D===void 0);if(U>=H&&(K===u||G.loadError===0&&G.fragmentError===0)&&(z<=$||!Z(z)||x&&!this.bitrateTestDelay||z<c)){const se=this.forcedAutoLevel;return K!==g&&(se===-1||se!==g)&&(j.length&&P.trace(`[abr] Skipped level(s) ${j.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[j[0]].codecs}" ${p[j[0]].videoRange}; not compatible with "${v.codecs}" ${A}`),P.info(`[abr] switch candidate:${d}->${K} adjustedbw(${Math.round(U)})-bitrate=${Math.round(U-H)} ttfb:${$.toFixed(1)} avgDuration:${N.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${z.toFixed(1)} firstSelection:${b} codecSet:${T} videoRange:${A} hls.loadLevel:${g}`)),b&&(this.firstSelection=K),K}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls,s=Math.min(Math.max(e,r),n);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}}class OF{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var et={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class NF{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.BUFFER_APPENDED,this.onBufferAppended,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.BUFFER_APPENDED,this.onBufferAppended,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let s=r.length;s--;){const i=r[s];if(!i)break;const o=i.end;if(i.start<=e&&o!==null&&e<=o)return i}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:r}=this,s=Object.keys(r);for(let i=s.length;i--;){const o=r[s[i]];if((o==null?void 0:o.body.type)===n&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,n,r,s){this.timeRanges&&(this.timeRanges[e]=n);const i=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||i>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===r&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,n);return u&&this.removeFragment(a.body),u})})}detectPartialFragments(e){const n=this.timeRanges,{frag:r,part:s}=e;if(!n||r.sn==="initSegment")return;const i=Ws(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const a=!r.relurl;Object.keys(n).forEach(l=>{const c=r.elementaryStreams[l];if(!c)return;const u=n[l],d=a||c.partial===!0;o.range[l]=this.getBufferedTimes(r,s,d,u)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),sl(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=r.filter(s=>s.fragment.sn>=e))}fragBuffered(e,n){const r=Ws(e);let s=this.fragments[r];!s&&n&&(s=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,n,r,s){const i={time:[],partial:r},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<s.length;u++){const d=s.start(u)-this.bufferPadding,f=s.end(u)+this.bufferPadding;if(c>=d&&l<=f){i.time.push({startPTS:Math.max(o,s.start(u)),endPTS:Math.min(a,s.end(u))});break}else if(o<f&&a>d){const m=Math.max(o,s.start(u)),p=Math.min(a,s.end(u));p>m&&(i.partial=!0,i.time.push({startPTS:m,endPTS:p}))}else if(a<=d)break}return i}getPartialFragment(e){let n=null,r,s,i,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&sl(u)&&(s=u.body.start-a,i=u.body.end+a,e>=s&&e<=i&&(r=Math.min(e-s,i-e),o<=r&&(n=u.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||sl(n))}getState(e){const n=Ws(e),r=this.fragments[n];return r?r.buffered?sl(r)?et.PARTIAL:et.OK:et.APPENDING:et.NOT_LOADED}isTimeBuffered(e,n,r){let s,i;for(let o=0;o<r.length;o++){if(s=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=s&&n<=i)return!0;if(n<=s)return!1}return!1}onFragLoaded(e,n){const{frag:r,part:s}=n;if(r.sn==="initSegment"||r.bitrateTest)return;const i=s?null:n,o=Ws(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:s,timeRanges:i}=n;if(r.sn==="initSegment")return;const o=r.type;if(s){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(s)}this.timeRanges=i,Object.keys(i).forEach(a=>{const l=i[a];this.detectEvictedFragments(a,l,o,s)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Ws(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==r||s&&!l.gap||l.start<n&&l.end>e&&(a.buffered||i)&&this.removeFragment(l)})}removeFragment(e){const n=Ws(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const s=e.sn;this.activePartLists[e.type]=r.filter(i=>i.fragment.sn!==s)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function sl(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function Ws(t){return`${t.type}_${t.level}_${t.sn}`}const FF={length:0,start:()=>0,end:()=>0};class Ie{static isBuffered(e,n){try{if(e){const r=Ie.getBuffered(e);for(let s=0;s<r.length;s++)if(n>=r.start(s)&&n<=r.end(s))return!0}}catch{}return!1}static bufferInfo(e,n,r){try{if(e){const s=Ie.getBuffered(e),i=[];let o;for(o=0;o<s.length;o++)i.push({start:s.start(o),end:s.end(o)});return this.bufferedInfo(i,n,r)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.sort(function(c,u){const d=c.start-u.start;return d||u.end-c.end});let s=[];if(r)for(let c=0;c<e.length;c++){const u=s.length;if(u){const d=s[u-1].end;e[c].start-d<r?e[c].end>d&&(s[u-1].end=e[c].end):s.push(e[c])}else s.push(e[c])}else s=e;let i=0,o,a=n,l=n;for(let c=0;c<s.length;c++){const u=s[c].start,d=s[c].end;if(n+r>=u&&n<d)a=u,l=d,i=l-n;else if(n+r<u){o=u;break}}return{len:i,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return P.log("failed to get media.buffered",n),FF}}}class lm{constructor(e,n,r,s=0,i=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=il(),this.buffering={audio:il(),video:il(),audiovideo:il()},this.level=e,this.sn=n,this.id=r,this.size=s,this.part=i,this.partial=o}}function il(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Ol(t,e){for(let r=0,s=t.length;r<s;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function MF(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function UF(t,e){const n=t.fragments,r=e.fragments;if(!r.length||!n.length){P.log("No fragments to align");return}const s=Ol(n,r[0].cc);if(!s||s&&!s.startPTS){P.log("No frag in previous level to align on");return}return s}function my(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function Xw(t,e){const n=e.fragments;for(let r=0,s=n.length;r<s;r++)my(n[r],t);e.fragmentHint&&my(e.fragmentHint,t),e.alignedSliding=!0}function BF(t,e,n){e&&($F(t,n,e),!n.alignedSliding&&e&&Dc(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&Kw(e,n))}function $F(t,e,n){if(MF(t,n,e)){const r=UF(n,e);r&&Z(r.start)&&(P.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Xw(r.start,e))}}function Dc(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let s,i;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(s=Ol(r,o),i=Ol(n,o)),(!s||!i)&&(s=r[Math.floor(r.length/2)],i=Ol(n,s.cc)||n[Math.floor(n.length/2)]);const a=s.programDateTime,l=i.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(i.start-s.start);Xw(c,t)}const gy=Math.pow(2,17);class jF{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Zn({type:ie.NETWORK_ERROR,details:F.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(vy(e));return}else e.gap=!1;const c=this.loader=e.loader=i?new i(s):new o(s),u=yy(e),d=fy(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:gy};e.stats=c.stats,c.load(u,f,{onSuccess:(m,p,h,g)=>{this.resetLoader(e,c);let y=m.data;h.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),a({frag:e,part:null,payload:y,networkDetails:g})},onError:(m,p,h,g)=>{this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:nt({url:r,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:h,stats:g}))},onAbort:(m,p,h)=>{this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:h,stats:m}))},onTimeout:(m,p,h)=>{this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:h,stats:m}))},onProgress:(m,p,h,g)=>{n&&n({frag:e,part:null,payload:h,networkDetails:g})}})})}loadPart(e,n,r){this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(vy(e,n));return}const c=this.loader=e.loader=i?new i(s):new o(s),u=yy(e,n),d=fy(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:gy};n.stats=c.stats,c.load(u,f,{onSuccess:(m,p,h,g)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:m.data,networkDetails:g};r(y),a(y)},onError:(m,p,h,g)=>{this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:nt({url:u.url,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:h,stats:g}))},onAbort:(m,p,h)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:h,stats:m}))},onTimeout:(m,p,h)=>{this.resetLoader(e,c),l(new Zn({type:ie.NETWORK_ERROR,details:F.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:h,stats:m}))}})})}updateStatsFromPart(e,n){const r=e.stats,s=n.stats,i=s.total;if(r.loaded+=s.loaded,i){const l=Math.round(e.duration/n.duration),c=Math.min(Math.round(r.loaded/i),l),d=(l-c)*Math.round(r.loaded/c);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function yy(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},s=n.byteRangeStartOffset,i=n.byteRangeEndOffset;if(Z(s)&&Z(i)){var o;let a=s,l=i;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const c=i-s;c%16&&(l=i+(16-c%16)),s!==0&&(r.resetIV=!0,a=s-16)}r.rangeStart=a,r.rangeEnd=l}return r}function vy(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:ie.MEDIA_ERROR,details:F.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Zn(r)}class Zn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class GF{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class VF{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function HF(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?ws(t,0,e-n):t}class KF{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let s=0;s<4;s++)r[s]=n.getUint32(s*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,s=r[0],i=r[1],o=r[2],a=r[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],f=l[3],m=new Uint32Array(256);let p=0,h=0,g=0;for(g=0;g<256;g++)g<128?m[g]=g<<1:m[g]=g<<1^283;for(g=0;g<256;g++){let y=h^h<<1^h<<2^h<<3^h<<4;y=y>>>8^y&255^99,e[p]=y,n[y]=p;const v=m[p],x=m[v],b=m[x];let T=m[y]*257^y*16843008;s[p]=T<<24|T>>>8,i[p]=T<<16|T>>>16,o[p]=T<<8|T>>>24,a[p]=T,T=b*16843009^x*65537^v*257^p*16843008,c[y]=T<<24|T>>>8,u[y]=T<<16|T>>>16,d[y]=T<<8|T>>>24,f[y]=T,p?(p=v^m[m[m[b^v]]],h^=m[m[h]]):p=h=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,s=0;for(;s<n.length&&r;)r=n[s]===this.key[s],s++;if(r)return;this.key=n;const i=this.keySize=n.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const o=this.ksRows=(i+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,m=this.invSubMix,p=m[0],h=m[1],g=m[2],y=m[3];let v,x;for(a=0;a<o;a++){if(a<i){v=c[a]=n[a];continue}x=v,a%i===0?(x=x<<8|x>>>24,x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255],x^=f[a/i|0]<<24):i>6&&a%i===4&&(x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255]),c[a]=v=(c[a-i]^x)>>>0}for(l=0;l<o;l++)a=o-l,l&3?x=c[a]:x=c[a-4],l<4||a<=4?u[l]=x:u[l]=p[d[x>>>24]]^h[d[x>>>16&255]]^g[d[x>>>8&255]]^y[d[x&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const s=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let m=f[0],p=f[1],h=f[2],g=f[3];const y=new Int32Array(e),v=new Int32Array(y.length);let x,b,T,A,R,C,k,L,_,$,j,B,K,G;const Y=this.networkToHostOrderSwap;for(;n<y.length;){for(_=Y(y[n]),$=Y(y[n+1]),j=Y(y[n+2]),B=Y(y[n+3]),R=_^i[0],C=B^i[1],k=j^i[2],L=$^i[3],K=4,G=1;G<s;G++)x=l[R>>>24]^c[C>>16&255]^u[k>>8&255]^d[L&255]^i[K],b=l[C>>>24]^c[k>>16&255]^u[L>>8&255]^d[R&255]^i[K+1],T=l[k>>>24]^c[L>>16&255]^u[R>>8&255]^d[C&255]^i[K+2],A=l[L>>>24]^c[R>>16&255]^u[C>>8&255]^d[k&255]^i[K+3],R=x,C=b,k=T,L=A,K=K+4;x=o[R>>>24]<<24^o[C>>16&255]<<16^o[k>>8&255]<<8^o[L&255]^i[K],b=o[C>>>24]<<24^o[k>>16&255]<<16^o[L>>8&255]<<8^o[R&255]^i[K+1],T=o[k>>>24]<<24^o[L>>16&255]<<16^o[R>>8&255]<<8^o[C&255]^i[K+2],A=o[L>>>24]<<24^o[R>>16&255]<<16^o[C>>8&255]<<8^o[k&255]^i[K+3],v[n]=Y(x^m),v[n+1]=Y(A^p),v[n+2]=Y(T^h),v[n+3]=Y(b^g),m=_,p=$,h=j,g=B,n=n+4}return v.buffer}}const zF=16;class cm{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?HF(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r){return this.useSoftware?new Promise((s,i)=>{this.softwareDecrypt(new Uint8Array(e),n,r);const o=this.flush();o?s(o.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r)}softwareDecrypt(e,n,r){const{currentIV:s,currentResult:i,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=sn(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;s&&(r=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new KF),l.expandKey(n);const c=i;return this.currentResult=l.decrypt(a.buffer,0,r),this.currentIV=ws(a,-16).buffer,c||null}webCryptoDecrypt(e,n,r){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r));this.key=n,this.fastAesKey=new VF(this.subtle,n)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new GF(this.subtle,new Uint8Array(r)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(P.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,r)))}onWebCryptoError(e,n,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%zF;return r!==e.length&&(n=ws(e,0,r),this.remainderData=ws(e,r)),n}logOnce(e){this.logEnabled&&(P.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const WF={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},V={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class um extends OF{constructor(e,n,r,s,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=V.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=s,this.log=P.log.bind(P,`${s}:`),this.warn=P.warn.bind(P,`${s}:`),this.hls=e,this.fragmentLoader=new jF(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new cm(e.config),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=V.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const r=n.partList;if(r!=null&&r.length){const i=r[r.length-1];return Ie.isBuffered(this.media,i.start+i.duration/2)}const s=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===V.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:r,mediaBuffer:s,state:i}=this,o=r?r.currentTime:0,a=Ie.bufferInfo(s||r,o,e.maxBufferHole);if(this.log(`media seeking to ${Z(o)?o.toFixed(3):o}, state: ${i}`),this.state===V.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,c=n.start-l,u=n.start+n.duration+l;if(!a.len||u<a.start||c>a.end){const d=o>u;(o<c||d)&&(d&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=V.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const s=i=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${i.part?" p: "+i.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,n,r,s).then(i=>{if(!i)return;const o=this.state;if(this.fragContextChanged(e)){(o===V.FRAG_LOADING||!this.fragCurrent&&o===V.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=V.IDLE);return}"payload"in i&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(S.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===V.STOPPED||this.state===V.ERROR||(this.warn(`Frag error: ${(i==null?void 0:i.message)||i}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===et.APPENDING){const i=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===et.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const s={startOffset:e,endOffset:n,type:r};this.hls.trigger(S.BUFFER_FLUSHING,s)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:s}=this,{payload:i}=r,o=e.decryptdata;if(i&&i.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),o.key.buffer,o.iv.buffer).catch(l=>{throw s.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return s.trigger(S.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),r.payload=l,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===V.STOPPED||this.state===V.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state=V.IDLE,e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var r,s,i,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===re.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((s=e.endPTS)!=null?s:NaN).toFixed(3)}] > buffer:${a?WF.toString(Ie.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==re.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(d=>!!u[d])){this.state=V.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=V.IDLE,a&&(!this.loadedmetadata&&e.type==re.MAIN&&a.buffered.length&&((i=this.fragCurrent)==null?void 0:i.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:s,partsLoaded:i}=e,o=!i||i.length===0||i.some(l=>!l),a=new lm(r.level,r.sn,r.stats.chunkCount+1,0,s?s.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,s){var i;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=V.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(S.KEY_LOADED,u),this.state===V.KEY_LOADING&&(this.state=V.IDLE),u}),this.hls.trigger(S.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=o.partList;if(u&&s){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const d=this.getNextPart(u,e,r);if(d>-1){const f=u[d];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${d}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=V.FRAG_LOADING;let m;return a?m=a.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,n,s)).catch(p=>this.handleFragLoadError(p)):m=this.doFragPartsLoad(e,f,n,s).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(S.FRAG_LOADING,{frag:e,part:f,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(u,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),Z(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=V.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,s)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([u])=>(!l&&u&&s&&s(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(S.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,n,r,s){return new Promise((i,o)=>{var a;const l=[],c=(a=r.details)==null?void 0:a.partList,u=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const m=f.part;this.hls.trigger(S.FRAG_LOADED,f);const p=uy(r,e.sn,d.index+1)||zw(c,e.sn,d.index+1);if(p)u(p);else return i({frag:e,part:m,partsLoaded:l})}).catch(o)};u(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===F.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(S.ERROR,n)}else this.hls.trigger(S.ERROR,{type:ie.OTHER_ERROR,details:F.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==V.PARSING){!this.fragCurrent&&this.state!==V.STOPPED&&this.state!==V.ERROR&&(this.state=V.IDLE);return}const{frag:r,part:s,level:i}=n,o=self.performance.now();r.stats.parsing.end=o,s&&(s.stats.parsing.end=o),this.updateLevelTiming(r,s,i,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:s,sn:i,part:o}=e;if(!(n!=null&&n[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of level ${s}. The current chunk will not be buffered.`),null;const a=n[s],l=o>-1?uy(a,i,o):null,c=l?l.fragment:mF(a,i,r);return c?(r&&r!==c&&(c.stats=r.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,n,r,s,i){var o;if(!e||this.state!==V.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=sn(a,l)),!((o=c)!=null&&o.length))return;const u={type:e.type,frag:n,part:r,chunkMeta:s,parent:n.type,data:c};if(this.hls.trigger(S.BUFFER_APPENDING,u),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!Ie.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,s=Ie.bufferInfo(n,r,0),i=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),a=Math.max(Math.min(e.start-o,s.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const r=this.getLoadPosition();return Z(r)?this.getFwdBufferInfoAtPos(e,r,n):null}getFwdBufferInfoAtPos(e,n,r){const{config:{maxBufferHole:s}}=this,i=Ie.bufferInfo(e,n,s);if(i.len===0&&i.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&i.nextStart<o.end)return Ie.bufferInfo(e,n,Math.max(i.nextStart,s))}return i}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,s=Math.max(Math.min(e-n,r.maxBufferLength),n),i=Math.max(e-n*3,r.maxMaxBufferLength/2,s);return i>=s?(r.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0):!1}getAppendedFrag(e,n=re.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,re.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,s=r.length;if(!s)return null;const{config:i}=this,o=r[0].start;let a;if(n.live){const l=i.initialLiveManifestSize;if(s<l)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(n,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=r[0]);if(!a){const l=i.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===et.OK||r===et.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,s,i){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&r.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,s);if(l!==null&&r.len+l.len>=i)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let s=-1,i=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,s>-1&&r<c.start)break;const u=c.loaded;u?s=-1:(i||c.independent||o)&&c.fragment===n&&(s=a),i=u}return s}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e,n){const r=this.fragPrevious;let s=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),s=yF(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=n[i-e.startSN];r.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=EF(n,r.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,n,r){const{config:s}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,{maxFragLookUpTolerance:c}=s,u=r.partList,d=!!(s.lowLatencyMode&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let f;if(e<n){const m=e>n-c?0:c;f=kc(i,o,e,m)}else f=o[o.length-1];if(f){const m=f.sn-r.startSN,p=this.fragmentTracker.getState(f);if((p===et.OK||p===et.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!d||u[0].fragment.sn>f.sn)&&i&&f.level===i.level){const g=o[m+1];f.sn<a&&this.fragmentTracker.getState(g)!==et.OK?f=g:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const s=this.hls.liveSyncPosition,i=r.currentTime,o=e.fragments[0].start,a=e.edge,l=i>=o-n.maxFragLookUpTolerance&&i<=a;if(s!==null&&r.duration>s&&(i<s||!l)){const c=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&r.readyState<4||i<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=s),r.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),r.currentTime=s))}}alignPlaylists(e,n,r){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const i=e.fragments[0].start,o=!n,a=e.alignedSliding&&Z(i);if(o||!a&&!i){const{fragPrevious:l}=this;BF(l,r,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${s}`),c}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;if(r<n&&(r=-1),r===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,i=s?this.startTimeOffset:e.startTimeOffset;i!==null&&Z(i)?(r=n+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Start time offset ${i} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||n:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==V.FRAG_LOADING_WAITING_RETRY)&&(this.state=V.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const u=this.getCurrentContext(n.chunkMeta);u&&(n.frag=u.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const i=n.details===F.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===it.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=om(c,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),o.resolved=!0,this.retryDate=self.performance.now()+u,this.state=V.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!i&&a!==it.RemoveAlternatePermanently&&(o.resolved=!0);else{P.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===it.SendAlternateToPenaltyBox?this.state=V.WAITING_LEVEL:this.state=V.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===V.PARSING||this.state===V.PARSED){const n=e.frag,r=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,r),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len,(n==null?void 0:n.duration)||10);const o=!i;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===re.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==V.STOPPED&&(this.state=V.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const s=Ie.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,s,r),this.state===V.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=V.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,s){var i;const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const f=s?0:Hw(o,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(S.LEVEL_PTS_UPDATED,{details:o,level:r,drift:f,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((i=this.transmuxer)==null?void 0:i.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=V.PARSED,this.hls.trigger(S.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class Qw{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=YF(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function YF(t,e){const n=new Uint8Array(e);let r=0;for(let s=0;s<t.length;s++){const i=t[s];n.set(i,r),r+=i.length}return n}function qF(){return typeof __HLS_WORKER_BUNDLE__=="function"}function XF(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function QF(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Mn(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class dm{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=sn(this.cachedData,e),this.cachedData=null);let r=ra(e,0),s=r?r.length:0,i;const o=this._audioTrack,a=this._id3Track,l=r?im(r):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Z(l))&&(this.basePTS=JF(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:mn.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const u=this.appendFrame(o,e,s);u?(this.frameIndex++,this.lastPTS=u.sample.pts,s+=u.length,i=s):s=c}else xN(e,s)?(r=ra(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:mn.audioId3,duration:Number.POSITIVE_INFINITY}),s+=r.length,i=s):s++;if(s===c&&i!==c){const u=ws(e,i);this.cachedData?this.cachedData=sn(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:Mn(),id3Track:a,textTrack:Mn()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:Mn(),id3Track:this._id3Track,textTrack:Mn()}}destroy(){}}const JF=(t,e,n)=>{if(Z(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};function ZF(t,e,n,r){let s,i,o,a;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[n+2]&192)>>>6)+1;const d=(e[n+2]&60)>>>2;if(d>u.length-1){const f=new Error(`invalid ADTS sampling index:${d}`);t.emit(S.ERROR,S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,P.log(`manifest codec:${r}, ADTS type:${s}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(s=5,a=new Array(4),i=d-3):(s=2,a=new Array(2),i=d):l.indexOf("android")!==-1?(s=2,a=new Array(2),i=d):(s=5,a=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&d>=6?i=d-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(d>=6&&o===1||/vivaldi/i.test(l))||!r&&o===1)&&(s=2,a=new Array(2)),i=d)),a[0]=s<<3,a[0]|=(d&14)>>1,a[1]|=(d&1)<<7,a[1]|=o<<3,s===5&&(a[1]|=(i&14)>>1,a[2]=(i&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[d],channelCount:o,codec:"mp4a.40."+s,manifestCodec:c}}function Jw(t,e){return t[e]===255&&(t[e+1]&246)===240}function Zw(t,e){return t[e+1]&1?7:9}function fm(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function eM(t,e){return e+5<t.length}function Pc(t,e){return e+1<t.length&&Jw(t,e)}function tM(t,e){return eM(t,e)&&Jw(t,e)&&fm(t,e)<=t.length-e}function nM(t,e){if(Pc(t,e)){const n=Zw(t,e);if(e+n>=t.length)return!1;const r=fm(t,e);if(r<=n)return!1;const s=e+r;return s===t.length||Pc(t,s)}return!1}function e1(t,e,n,r,s){if(!t.samplerate){const i=ZF(e,n,r,s);if(!i)return;t.config=i.config,t.samplerate=i.samplerate,t.channelCount=i.channelCount,t.codec=i.codec,t.manifestCodec=i.manifestCodec,P.log(`parsed codec:${t.codec}, rate:${i.samplerate}, channels:${i.channelCount}`)}}function t1(t){return 1024*9e4/t}function rM(t,e){const n=Zw(t,e);if(e+n<=t.length){const r=fm(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function n1(t,e,n,r,s){const i=t1(t.samplerate),o=r+s*i,a=rM(e,n);let l;if(a){const{frameLength:d,headerLength:f}=a,m=f+d,p=Math.max(0,n+m-e.length);p?(l=new Uint8Array(m-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+m);const h={unit:l,pts:o};return p||t.samples.push(h),{sample:h,length:m,missing:p}}const c=e.length-n;return l=new Uint8Array(c),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}let ol=null;const sM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],iM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],oM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],aM=[0,1,1,4];function r1(t,e,n,r,s){if(n+24>e.length)return;const i=s1(e,n);if(i&&n+i.frameLength<=e.length){const o=i.samplesPerFrame*9e4/i.sampleRate,a=r+s*o,l={unit:e.subarray(n,n+i.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(l),{sample:l,length:i.frameLength,missing:0}}}function s1(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,s=t[e+2]>>4&15,i=t[e+2]>>2&3;if(n!==1&&s!==0&&s!==15&&i!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,c=sM[l*14+s-1]*1e3,d=iM[(n===3?0:n===2?1:2)*3+i],f=a===3?1:2,m=oM[n][r],p=aM[r],h=m*8*p,g=Math.floor(m*c/d+o)*p;if(ol===null){const x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ol=x?parseInt(x[1]):0}return!!ol&&ol<=87&&r===2&&c>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:g,samplesPerFrame:h}}}function hm(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function i1(t,e){return e+1<t.length&&hm(t,e)}function lM(t,e){return hm(t,e)&&4<=t.length-e}function o1(t,e){if(e+1<t.length&&hm(t,e)){const r=s1(t,e);let s=4;r!=null&&r.frameLength&&(s=r.frameLength);const i=e+s;return i===t.length||i1(t,i)}return!1}class cM extends dm{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=ra(e,0);let r=(n==null?void 0:n.length)||0;if(o1(e,r))return!1;for(let s=e.length;r<s;r++)if(nM(e,r))return P.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return tM(e,n)}appendFrame(e,n,r){e1(e,this.observer,n,r,e.manifestCodec);const s=n1(e,n,r,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const uM=/\/emsg[-/]ID3/i;class dM{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,s){const i=this.videoTrack=Mn("video",1),o=this.audioTrack=Mn("audio",1),a=this.txtTrack=Mn("text",1);if(this.id3Track=Mn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Fw(e);if(l.video){const{id:c,timescale:u,codec:d}=l.video;i.id=c,i.timescale=a.timescale=u,i.codec=d}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;o.id=c,o.timescale=u,o.codec=d}a.id=_w.text,i.sampleDuration=0,i.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return LN(e)}demux(e,n){this.timeOffset=n;let r=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=sn(this.remainderData,e));const a=FN(r);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=r;const o=this.extractID3Track(s,n);return i.samples=K0(n,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(n,this.timeOffset);return r.samples=K0(e,n),{videoTrack:n,audioTrack:Mn(),id3Track:s,textTrack:Mn()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const s=ae(e.samples,["emsg"]);s&&s.forEach(i=>{const o=BN(i);if(uM.test(o.schemeIdUri)){const a=Z(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;r.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:mn.emsg,duration:l})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const a1=(t,e)=>{let n=0,r=5;e+=r;const s=new Uint32Array(1),i=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),l=8-a;i[0]=4278190080>>>24+l<<l,s[0]=(o[0]&i[0])>>l,n=n?n<<a|s[0]:s[0],e+=1,r-=a}return n};class fM extends dm{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const s=l1(e,n,r,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const n=ra(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&im(n)!==void 0&&a1(e,r)<16}}function l1(t,e,n,r,s){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const i=e[n+4]>>6;if(i>=3)return-1;const a=[48e3,44100,32e3][i],l=e[n+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+i]*2;if(n+u>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const m=(e[n+6]<<8|e[n+7])>>12-f&1,h=[2,1,2,3,3,4,4,5][d]+m,g=e[n+5]>>3,y=e[n+5]&7,v=new Uint8Array([i<<6|g<<1|y>>2,(y&3)<<6|d<<3|m<<2|l>>4,l<<4&224]),x=1536/a*9e4,b=r+s*x,T=e.subarray(n,n+u);return t.config=v,t.channelCount=h,t.samplerate=a,t.samples.push({unit:T,pts:b}),u}class hM{constructor(){this.VideoSample=null}createVideoSample(e,n,r,s){return{key:e,frame:!1,pts:n,dts:r,units:[],debug:s,length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,s;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const i=r.units;s=i[i.length-1]}return s}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,s=r.length;if(s){const i=r[s-1];e.pts=i.pts,e.dts=i.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&P.log(e.pts+"/"+e.dts+":"+e.debug)}}class xy{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,s=new Uint8Array(4),i=Math.min(4,n);if(i===0)throw new Error("no bytes available");s.set(e.subarray(r,r+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&P.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,r=8,s;for(let i=0;i<e;i++)r!==0&&(s=this.readEG(),r=(n+s+256)%256),n=r===0?n:r}readSPS(){let e=0,n=0,r=0,s=0,i,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),m=this.skipEG.bind(this),p=this.skipUEG.bind(this),h=this.skipScalingList.bind(this);l();const g=l();if(c(5),f(3),l(),p(),g===100||g===110||g===122||g===244||g===44||g===83||g===86||g===118||g===128){const A=u();if(A===3&&f(1),p(),p(),f(1),d())for(o=A!==3?8:12,a=0;a<o;a++)d()&&(a<6?h(16):h(64))}p();const y=u();if(y===0)u();else if(y===1)for(f(1),m(),m(),i=u(),a=0;a<i;a++)m();p(),f(1);const v=u(),x=u(),b=c(1);b===0&&f(1),f(1),d()&&(e=u(),n=u(),r=u(),s=u());let T=[1,1];if(d()&&d())switch(l()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((v+1)*16-e*2-n*2),height:(2-b)*(x+1)*16-(b?2:4)*(r+s),pixelRatio:T}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class pM extends hM{parseAVCPES(e,n,r,s,i){const o=this.parseAVCNALu(e,r.data);let a=this.VideoSample,l,c=!1;r.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),o.forEach(u=>{var d;switch(u.type){case 1:{let h=!1;l=!0;const g=u.data;if(c&&g.length>4){const y=new xy(g).readSliceType();(y===2||y===4||y===7||y===9)&&(h=!0)}if(h){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.frame=!0,a.key=h;break}case 5:l=!0,(d=a)!=null&&d.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,Uw(u.data,1,r.pts,n.samples);break}case 7:{var m,p;l=!0,c=!0;const h=u.data,y=new xy(h).readSPS();if(!e.sps||e.width!==y.width||e.height!==y.height||((m=e.pixelRatio)==null?void 0:m[0])!==y.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[h],e.duration=i;const v=h.subarray(1,4);let x="avc1.";for(let b=0;b<3;b++){let T=v[b].toString(16);T.length<2&&(T="0"+T),x+=T}e.codec=x}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+u.type+" ");break}a&&l&&a.units.push(u)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,n){const r=n.byteLength;let s=e.naluState||0;const i=s,o=[];let a=0,l,c,u,d=-1,f=0;for(s===-1&&(d=0,f=n[0]&31,s=0,a=1);a<r;){if(l=n[a++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(c=a-s-1,d>=0){const m={data:n.subarray(d,c),type:f};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(i&&a<=4-i&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-i)),c>0&&(m.data=sn(m.data,n.subarray(0,c)),m.state=0))}a<r?(u=n[a]&31,d=a,f=u,s=0):s=-1}else s=0}if(d>=0&&s>=0){const m={data:n.subarray(d,r),type:f,state:s};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=sn(m.data,n))}return e.naluState=s,o}}class mM{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new cm(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,r){const s=e[n].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)r.set(e.subarray(i,i+16),s);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(r.subarray(s,s+16),i);return e}decryptAvcSample(e,n,r,s,i){const o=Bw(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{i.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,s)})}decryptAvcSamples(e,n,r,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){s();return}const i=e[n].units;for(;!(r>=i.length);r++){const o=i[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,s,o),!this.decrypter.isSync()))return}}}}const Je=188;class Tr{constructor(e,n,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.videoParser=new pM}static probe(e){const n=Tr.syncOffset(e);return n>0&&P.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let r=Math.min(Je*5,n-Je)+1,s=0;for(;s<r;){let i=!1,o=-1,a=0;for(let l=s;l<n;l+=Je)if(e[l]===71&&(n-l===Je||e[l+Je]===71)){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+Je*99,e.length-Je)+1)),i||(i=Ah(e,l)===0),i&&a>1&&(o===0&&a>2||l+Je>r))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:_w[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Tr.createTrack("video"),this._audioTrack=Tr.createTrack("audio",s),this._id3Track=Tr.createTrack("id3"),this._txtTrack=Tr.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,s=!1){r||(this.sampleAes=null);let i;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,d=o.pesData,f=a.pid,m=l.pid,p=a.pesData,h=l.pesData,g=null,y=this.pmtParsed,v=this._pmtId,x=e.length;if(this.remainderData&&(e=sn(this.remainderData,e),x=e.length,this.remainderData=null),x<Je&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const b=Math.max(0,Tr.syncOffset(e));x-=(x-b)%Je,x<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,x,e.buffer.byteLength-x));let T=0;for(let R=b;R<x;R+=Je)if(e[R]===71){const C=!!(e[R+1]&64),k=Ah(e,R),L=(e[R+3]&48)>>4;let _;if(L>1){if(_=R+5+e[R+4],_===R+Je)continue}else _=R+4;switch(k){case u:C&&(d&&(i=Ys(d))&&this.videoParser.parseAVCPES(o,c,i,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(_,R+Je)),d.size+=R+Je-_);break;case f:if(C){if(p&&(i=Ys(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(_,R+Je)),p.size+=R+Je-_);break;case m:C&&(h&&(i=Ys(h))&&this.parseID3PES(l,i),h={data:[],size:0}),h&&(h.data.push(e.subarray(_,R+Je)),h.size+=R+Je-_);break;case 0:C&&(_+=e[_]+1),v=this._pmtId=gM(e,_);break;case v:{C&&(_+=e[_]+1);const $=yM(e,_,this.typeSupported,r,this.observer);u=$.videoPid,u>0&&(o.pid=u,o.segmentCodec=$.segmentVideoCodec),f=$.audioPid,f>0&&(a.pid=f,a.segmentCodec=$.segmentAudioCodec),m=$.id3Pid,m>0&&(l.pid=m),g!==null&&!y&&(P.warn(`MPEG-TS PMT found at ${R} after unknown PID '${g}'. Backtracking to sync byte @${b} to parse all TS packets.`),g=null,R=b-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=k;break}}else T++;T>0&&_c(this.observer,new Error(`Found ${T} TS packet/s that do not start with 0x47`)),o.pesData=d,a.pesData=p,l.pesData=h;const A={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return s&&this.extractRemainingSamples(A),A}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:s,textTrack:i}=e,o=r.pesData,a=n.pesData,l=s.pesData;let c;if(o&&(c=Ys(o))?(this.videoParser.parseAVCPES(r,i,c,!0,this._duration),r.pesData=null):r.pesData=o,a&&(c=Ys(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,c);break;case"mp3":this.parseMPEGPES(n,c);break;case"ac3":this.parseAC3PES(n,c);break}n.pesData=null}else a!=null&&a.size&&P.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(c=Ys(l))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=l}demuxSampleAes(e,n,r){const s=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new mM(this.observer,this.config,n);return this.decrypt(s,i)}decrypt(e,n){return new Promise(r=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?n.decryptAacSamples(s.samples,0,()=>{i.samples?n.decryptAvcSamples(i.samples,0,0,()=>{r(e)}):r(e)}):i.samples&&n.decryptAvcSamples(i.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let r=0;const s=this.aacOverFlow;let i=n.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)i=sn(s.sample.unit,i);else{const m=f-d;s.sample.unit.set(i.subarray(0,d),m),e.samples.push(s.sample),r=s.missing}}let o,a;for(o=r,a=i.length;o<a-1&&!Pc(i,o);o++);if(o!==r){let d;const f=o<a-1;if(f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",_c(this.observer,new Error(d),f),!f)return}e1(e,this.observer,i,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(s){const d=t1(e.samplerate);l=s.sample.pts+d}else{P.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=n1(e,i,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!Pc(i,o);o++);}parseMPEGPES(e,n){const r=n.data,s=r.length;let i=0,o=0;const a=n.pts;if(a===void 0){P.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(i1(r,o)){const l=r1(e,r,o,a,i);if(l)o+=l.length,i++;else break}else o++}parseAC3PES(e,n){{const r=n.data,s=n.pts;if(s===void 0){P.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const i=r.length;let o=0,a=0,l;for(;a<i&&(l=l1(e,r,a,s,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){P.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=We({},n,{type:this._videoTrack?mn.emsg:mn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function Ah(t,e){return((t[e+1]&31)<<8)+t[e+2]}function gM(t,e){return(t[e+10]&31)<<8|t[e+11]}function yM(t,e,n,r,s){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],a=e+3+o-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<a;){const c=Ah(t,e),u=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){Cd("ADTS AAC");break}case 15:i.audioPid===-1&&(i.audioPid=c);break;case 21:i.id3Pid===-1&&(i.id3Pid=c);break;case 219:if(!r){Cd("H.264");break}case 27:i.videoPid===-1&&(i.videoPid=c,i.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?P.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=c,i.segmentAudioCodec="mp3");break;case 193:if(!r){Cd("AC-3");break}case 129:n.ac3?i.audioPid===-1&&(i.audioPid=c,i.segmentAudioCodec="ac3"):P.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&u>0){let d=e+5,f=u;for(;f>2;){switch(t[d]){case 106:n.ac3!==!0?P.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=c,i.segmentAudioCodec="ac3");break}const p=t[d+1]+2;d+=p,f-=p}}break;case 194:case 135:return _c(s,new Error("Unsupported EC-3 in M2TS found")),i;case 36:return _c(s,new Error("Unsupported HEVC in M2TS found")),i}e+=u+5}return i}function _c(t,e,n){P.warn(`parsing error: ${e.message}`),t.emit(S.ERROR,S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function Cd(t){P.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Ys(t){let e=0,n,r,s,i,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=sn(a[0],a[1]),a.splice(1,1);if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const c=n[7];c&192&&(i=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,c&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,i-o>60*9e4&&(P.warn(`${Math.round((i-o)/9e4)}s delta between PTS and DTS, align them`),i=o)):o=i),s=n[8];let u=s+9;if(t.size<=u)return null;t.size-=u;const d=new Uint8Array(t.size);for(let f=0,m=a.length;f<m;f++){n=a[f];let p=n.byteLength;if(u)if(u>p){u-=p;continue}else n=n.subarray(u),p-=u,u=0;d.set(n,e),e+=p}return r&&(r-=s+3),{data:d,pts:i,dts:o,len:r}}return null}class vM extends dm{resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=ra(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&im(n)!==void 0&&a1(e,r)<=16)return!1;for(let s=e.length;r<s;r++)if(o1(e,r))return P.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return lM(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return r1(e,n,r,this.basePTS,this.frameIndex)}}class Ey{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const yr=Math.pow(2,32)-1;class O{static init(){O.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in O.types)O.types.hasOwnProperty(e)&&(O.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);O.HDLR_TYPES={video:n,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);O.STTS=O.STSC=O.STCO=i,O.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),O.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),O.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);O.FTYP=O.box(O.types.ftyp,o,l,o,a),O.DINF=O.box(O.types.dinf,O.box(O.types.dref,s))}static box(e,...n){let r=8,s=n.length;const i=s;for(;s--;)r+=n[s].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),s=0,r=8;s<i;s++)o.set(n[s],r),r+=n[s].byteLength;return o}static hdlr(e){return O.box(O.types.hdlr,O.HDLR_TYPES[e])}static mdat(e){return O.box(O.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(yr+1)),s=Math.floor(n%(yr+1));return O.box(O.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return O.box(O.types.mdia,O.mdhd(e.timescale,e.duration),O.hdlr(e.type),O.minf(e))}static mfhd(e){return O.box(O.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?O.box(O.types.minf,O.box(O.types.smhd,O.SMHD),O.DINF,O.stbl(e)):O.box(O.types.minf,O.box(O.types.vmhd,O.VMHD),O.DINF,O.stbl(e))}static moof(e,n,r){return O.box(O.types.moof,O.mfhd(e),O.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=O.trak(e[n]);return O.box.apply(null,[O.types.moov,O.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(O.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=O.trex(e[n]);return O.box.apply(null,[O.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(yr+1)),s=Math.floor(n%(yr+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return O.box(O.types.mvhd,i)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let s,i;for(s=0;s<n.length;s++)i=n[s].flags,r[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return O.box(O.types.sdtp,r)}static stbl(e){return O.box(O.types.stbl,O.stsd(e),O.box(O.types.stts,O.STTS),O.box(O.types.stsc,O.STSC),O.box(O.types.stsz,O.STSZ),O.box(O.types.stco,O.STCO))}static avc1(e){let n=[],r=[],s,i,o;for(s=0;s<e.sps.length;s++)i=e.sps[s],o=i.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],o=i.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(i));const a=O.box(O.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return O.box(O.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return O.box(O.types.mp4a,O.audioStsd(e),O.box(O.types.esds,O.esds(e)))}static mp3(e){return O.box(O.types[".mp3"],O.audioStsd(e))}static ac3(e){return O.box(O.types["ac-3"],O.audioStsd(e),O.box(O.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?O.box(O.types.stsd,O.STSD,O.mp3(e)):e.segmentCodec==="ac3"?O.box(O.types.stsd,O.STSD,O.ac3(e)):O.box(O.types.stsd,O.STSD,O.mp4a(e)):O.box(O.types.stsd,O.STSD,O.avc1(e))}static tkhd(e){const n=e.id,r=e.duration*e.timescale,s=e.width,i=e.height,o=Math.floor(r/(yr+1)),a=Math.floor(r%(yr+1));return O.box(O.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,n){const r=O.sdtp(e),s=e.id,i=Math.floor(n/(yr+1)),o=Math.floor(n%(yr+1));return O.box(O.types.traf,O.box(O.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),O.box(O.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,o>>24,o>>16&255,o>>8&255,o&255])),O.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,O.box(O.types.trak,O.tkhd(e),O.mdia(e))}static trex(e){const n=e.id;return O.box(O.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],s=r.length,i=12+16*s,o=new Uint8Array(i);let a,l,c,u,d,f;for(n+=8+i,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<s;a++)l=r[a],c=l.duration,u=l.size,d=l.flags,f=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return O.box(O.types.trun,o)}static initSegment(e){O.types||O.init();const n=O.moov(e);return sn(O.FTYP,n)}}O.types=void 0;O.HDLR_TYPES=void 0;O.STTS=void 0;O.STSC=void 0;O.STCO=void 0;O.STSZ=void 0;O.VMHD=void 0;O.SMHD=void 0;O.STSD=void 0;O.FTYP=void 0;O.DINF=void 0;const c1=9e4;function pm(t,e,n=1,r=!1){const s=t*e*n;return r?Math.round(s):s}function xM(t,e,n=1,r=!1){return pm(t,e,1/n,r)}function ho(t,e=!1){return pm(t,1e3,1/c1,e)}function EM(t,e=1){return pm(t,c1,1/e)}const SM=10*1e3,Sy=1024,TM=1152,wM=1536;let qs=null,Ld=null;class Nl{constructor(e,n,r,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,qs===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);qs=o?parseInt(o[1]):0}if(Ld===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);Ld=i?parseInt(i[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){P.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){P.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){P.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,s=e.reduce((i,o)=>{let a=o.pts,l=a-i;return l<-4294967296&&(n=!0,a=Qt(a,r),l=a-i),l>0?i:a},r);return n&&P.debug("PTS rollover detected"),s}remux(e,n,r,s,i,o,a,l){let c,u,d,f,m,p,h=i,g=i;const y=e.pid>-1,v=n.pid>-1,x=n.samples.length,b=e.samples.length>0,T=a&&x>0||x>1;if((!y||b)&&(!v||T)||this.ISGenerated||a){if(this.ISGenerated){var R,C,k,L;const B=this.videoTrackConfig;B&&(n.width!==B.width||n.height!==B.height||((R=n.pixelRatio)==null?void 0:R[0])!==((C=B.pixelRatio)==null?void 0:C[0])||((k=n.pixelRatio)==null?void 0:k[1])!==((L=B.pixelRatio)==null?void 0:L[1]))&&this.resetInitSegment()}else d=this.generateIS(e,n,i,o);const _=this.isVideoContiguous;let $=-1,j;if(T&&($=bM(n.samples),!_&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,$>0){P.warn(`[mp4-remuxer]: Dropped ${$} out of ${x} video samples due to a missing keyframe`);const B=this.getVideoStartPts(n.samples);n.samples=n.samples.slice($),n.dropped+=$,g+=(n.samples[0].pts-B)/n.inputTimeScale,j=g}else $===-1&&(P.warn(`[mp4-remuxer]: No keyframe found out of ${x} video samples`),p=!1);if(this.ISGenerated){if(b&&T){const B=this.getVideoStartPts(n.samples),G=(Qt(e.samples[0].pts,B)-B)/n.inputTimeScale;h+=Math.max(0,G),g+=Math.max(0,-G)}if(b){if(e.samplerate||(P.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,i,o)),u=this.remuxAudio(e,h,this.isAudioContiguous,o,v||T||l===re.AUDIO?g:void 0),T){const B=u?u.endPTS-u.startPTS:0;n.inputTimeScale||(P.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,i,o)),c=this.remuxVideo(n,g,_,B)}}else T&&(c=this.remuxVideo(n,g,_,0));c&&(c.firstKeyFrame=$,c.independent=$!==-1,c.firstKeyFramePTS=j)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(m=u1(r,i,this._initPTS,this._initDTS)),s.samples.length&&(f=d1(s,i,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:f,id3:m}}generateIS(e,n,r,s){const i=e.samples,o=n.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||s,d="audio/mp4",f,m,p;if(u&&(f=m=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):O.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?f=m=i[0].pts-Math.round(p*r):u=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:O.initSegment([n]),metadata:{width:n.width,height:n.height}},u)if(p=n.inputTimeScale,!c||p!==c.timescale){const h=this.getVideoStartPts(o),g=Math.round(p*r);m=Math.min(m,Qt(o[0].dts,h)-g),f=Math.min(f,h-g)}else u=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:m,timescale:p}):f=p=void 0,{tracks:l,initPTS:f,timescale:p}}remuxVideo(e,n,r,s){const i=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let u=this.nextAvcDts,d=8,f=this.videoSampleDuration,m,p,h=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,y=!1;if(!r||u===null){const N=n*i,U=o[0].pts-Qt(o[0].dts,o[0].pts);qs&&u!==null&&Math.abs(N-U-u)<15e3?r=!0:u=N-U}const v=c.baseTime*i/c.timescale;for(let N=0;N<l;N++){const U=o[N];U.pts=Qt(U.pts-v,u),U.dts=Qt(U.dts-v,u),U.dts<o[N>0?N-1:N].dts&&(y=!0)}y&&o.sort(function(N,U){const H=N.dts-U.dts,z=N.pts-U.pts;return H||z}),m=o[0].dts,p=o[o.length-1].dts;const x=p-m,b=x?Math.round(x/(l-1)):f||e.inputTimeScale/30;if(r){const N=m-u,U=N>b,H=N<-1;if((U||H)&&(U?P.warn(`AVC: ${ho(N,!0)} ms (${N}dts) hole between fragments detected at ${n.toFixed(3)}`):P.warn(`AVC: ${ho(-N,!0)} ms (${N}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!H||u>=o[0].pts||qs)){m=u;const z=o[0].pts-N;if(U)o[0].dts=m,o[0].pts=z;else for(let X=0;X<o.length&&!(o[X].dts>z);X++)o[X].dts-=N,o[X].pts-=N;P.log(`Video: Initial PTS/DTS adjusted: ${ho(z,!0)}/${ho(m,!0)}, delta: ${ho(N,!0)} ms`)}}m=Math.max(0,m);let T=0,A=0,R=m;for(let N=0;N<l;N++){const U=o[N],H=U.units,z=H.length;let X=0;for(let se=0;se<z;se++)X+=H[se].data.length;A+=X,T+=z,U.length=X,U.dts<R?(U.dts=R,R+=b/4|0||1):R=U.dts,h=Math.min(U.pts,h),g=Math.max(U.pts,g)}p=o[l-1].dts;const C=A+4*T+8;let k;try{k=new Uint8Array(C)}catch(N){this.observer.emit(S.ERROR,S.ERROR,{type:ie.MUX_ERROR,details:F.REMUX_ALLOC_ERROR,fatal:!1,error:N,bytes:C,reason:`fail allocating video mdat ${C}`});return}const L=new DataView(k.buffer);L.setUint32(0,C),k.set(O.types.mdat,4);let _=!1,$=Number.POSITIVE_INFINITY,j=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let N=0;N<l;N++){const U=o[N],H=U.units;let z=0;for(let de=0,te=H.length;de<te;de++){const Q=H[de],fe=Q.data,Ce=Q.data.byteLength;L.setUint32(d,Ce),d+=4,k.set(fe,d),d+=Ce,z+=4+Ce}let X;if(N<l-1)f=o[N+1].dts-U.dts,X=o[N+1].pts-U.pts;else{const de=this.config,te=N>0?U.dts-o[N-1].dts:b;if(X=N>0?U.pts-o[N-1].pts:b,de.stretchShortVideoTrack&&this.nextAudioPts!==null){const Q=Math.floor(de.maxBufferHole*i),fe=(s?h+s*i:this.nextAudioPts)-U.pts;fe>Q?(f=fe-te,f<0?f=te:_=!0,P.log(`[mp4-remuxer]: It is approximately ${fe/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=te}else f=te}const se=Math.round(U.pts-U.dts);$=Math.min($,f),B=Math.max(B,f),j=Math.min(j,X),K=Math.max(K,X),a.push(new Ty(U.key,f,z,se))}if(a.length){if(qs){if(qs<70){const N=a[0].flags;N.dependsOn=2,N.isNonSync=0}}else if(Ld&&K-j<B-$&&b/B<.025&&a[0].cts===0){P.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let N=m;for(let U=0,H=a.length;U<H;U++){const z=N+a[U].duration,X=N+a[U].cts;if(U<H-1){const se=z+a[U+1].cts;a[U].duration=se-X}else a[U].duration=U?a[U-1].duration:b;a[U].cts=0,N=z}}}f=_||!f?b:f,this.nextAvcDts=u=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const D={data1:O.moof(e.sequenceNumber++,m,We({},e,{samples:a})),data2:k,startPTS:h/i,endPTS:(g+f)/i,startDTS:m/i,endDTS:u/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,D}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return TM;case"ac3":return wM;default:return Sy}}remuxAudio(e,n,r,s,i){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],p=i!==void 0;let h=e.samples,g=f?0:8,y=this.nextAudioPts||-1;const v=n*o,x=d.baseTime*o/d.timescale;if(this.isAudioContiguous=r=r||h.length&&y>0&&(s&&Math.abs(v-y)<9e3||Math.abs(Qt(h[0].pts-x,v)-y)<20*u),h.forEach(function(G){G.pts=Qt(G.pts-x,v)}),!r||y<0){if(h=h.filter(G=>G.pts>=0),!h.length)return;i===0?y=0:s&&!p?y=Math.max(0,v):y=h[0].pts}if(e.segmentCodec==="aac"){const G=this.config.maxAudioFramesDrift;for(let Y=0,D=y;Y<h.length;Y++){const N=h[Y],U=N.pts,H=U-D,z=Math.abs(1e3*H/o);if(H<=-G*u&&p)Y===0&&(P.warn(`Audio frame @ ${(U/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*H/o)} ms.`),this.nextAudioPts=y=D=U);else if(H>=G*u&&z<SM&&p){let X=Math.round(H/u);D=U-X*u,D<0&&(X--,D+=u),Y===0&&(this.nextAudioPts=y=D),P.warn(`[mp4-remuxer]: Injecting ${X} audio frame @ ${(D/o).toFixed(3)}s due to ${Math.round(1e3*H/o)} ms gap.`);for(let se=0;se<X;se++){const de=Math.max(D,0);let te=Ey.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);te||(P.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),te=N.unit.subarray()),h.splice(Y,0,{unit:te,pts:de}),D+=u,Y++}}N.pts=D,D+=u}}let b=null,T=null,A,R=0,C=h.length;for(;C--;)R+=h[C].unit.byteLength;for(let G=0,Y=h.length;G<Y;G++){const D=h[G],N=D.unit;let U=D.pts;if(T!==null){const z=m[G-1];z.duration=Math.round((U-T)/l)}else if(r&&e.segmentCodec==="aac"&&(U=y),b=U,R>0){R+=g;try{A=new Uint8Array(R)}catch(z){this.observer.emit(S.ERROR,S.ERROR,{type:ie.MUX_ERROR,details:F.REMUX_ALLOC_ERROR,fatal:!1,error:z,bytes:R,reason:`fail allocating audio mdat ${R}`});return}f||(new DataView(A.buffer).setUint32(0,R),A.set(O.types.mdat,4))}else return;A.set(N,g);const H=N.byteLength;g+=H,m.push(new Ty(!0,c,H,0)),T=U}const k=m.length;if(!k)return;const L=m[m.length-1];this.nextAudioPts=y=T+l*L.duration;const _=f?new Uint8Array(0):O.moof(e.sequenceNumber++,b/l,We({},e,{samples:m}));e.samples=[];const $=b/o,j=y/o,K={data1:_,data2:A,startPTS:$,endPTS:j,startDTS:$,endDTS:j,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,K}remuxEmptyAudio(e,n,r,s){const i=e.inputTimeScale,o=e.samplerate?e.samplerate:i,a=i/o,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,d=(l!==null?l:s.startDTS*i)+u,f=s.endDTS*i+u,m=a*Sy,p=Math.ceil((f-d)/m),h=Ey.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(P.warn("[mp4-remuxer]: remux empty Audio"),!h){P.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const g=[];for(let y=0;y<p;y++){const v=d+y*m;g.push({unit:h,pts:v,dts:v})}return e.samples=g,this.remuxAudio(e,n,r,!1)}}function Qt(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function bM(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function u1(t,e,n,r){const s=t.samples.length;if(!s)return;const i=t.inputTimeScale;for(let a=0;a<s;a++){const l=t.samples[a];l.pts=Qt(l.pts-n.baseTime*i/n.timescale,e*i)/i,l.dts=Qt(l.dts-r.baseTime*i/r.timescale,e*i)/i}const o=t.samples;return t.samples=[],{samples:o}}function d1(t,e,n){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=Qt(a.pts-n.baseTime*s/n.timescale,e*s)/s}t.samples.sort((o,a)=>o.pts-a.pts);const i=t.samples;return t.samples=[],{samples:i}}class Ty{constructor(e,n,r,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=r,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class RM{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,r,s){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(DN(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=Fw(e);s.audio&&(n=wy(s.audio,be.AUDIO)),s.video&&(r=wy(s.video,be.VIDEO));const i={};s.audio&&s.video?i.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:s.audio?i.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:s.video?i.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:P.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,n,r,s,i,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:s,id3:r,initSegment:void 0};Z(u)||(u=this.lastEndTime=i||0);const f=n.samples;if(!(f!=null&&f.length))return d;const m={initPTS:void 0,timescale:1};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return P.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(m.tracks=this.initTracks,this.emitInitSegment=!1);const h=_N(f,p),g=PN(p,f),y=g===null?i:g;(AM(c,y,i,h)||m.timescale!==c.timescale&&o)&&(m.initPTS=y-i,c&&c.timescale===1&&P.warn(`Adjusting initPTS by ${m.initPTS-c.baseTime}`),this.initPTS=c={baseTime:m.initPTS,timescale:1});const v=e?y-c.baseTime/c.timescale:u,x=v+h;NN(p,f,c.baseTime/c.timescale),h>0?this.lastEndTime=x:(P.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,T=!!p.video;let A="";b&&(A+="audio"),T&&(A+="video");const R={data1:f,startPTS:v,startDTS:v,endPTS:x,endDTS:x,type:A,hasAudio:b,hasVideo:T,nb:1,dropped:0};return d.audio=R.type==="audio"?R:void 0,d.video=R.type!=="audio"?R:void 0,d.initSegment=m,d.id3=u1(r,i,c,c),s.samples.length&&(d.text=d1(s,i,c)),d}}function AM(t,e,n,r){if(t===null)return!0;const s=Math.max(r,1),i=e-t.baseTime/t.timescale;return Math.abs(i-n)>s}function wy(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===be.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return Ac(n,!1);const r="mp4a.40.5";return P.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${r}"`),r}return P.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let er;try{er=self.performance.now.bind(self.performance)}catch{P.debug("Unable to use Performance API on this environment"),er=Gi==null?void 0:Gi.Date.now}const Fl=[{demux:dM,remux:RM},{demux:Tr,remux:Nl},{demux:cM,remux:Nl},{demux:vM,remux:Nl}];Fl.splice(2,0,{demux:fM,remux:Nl});class by{constructor(e,n,r,s,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.vendor=s,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,s){const i=r.transmuxing;i.executeStart=er();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:f,timeOffset:m,initSegmentChange:p}=s||a,{audioCodec:h,videoCodec:g,defaultInitPts:y,duration:v,initSegmentData:x}=l,b=CM(o,n);if(b&&b.method==="AES-128"){const C=this.getDecrypter();if(C.isSync()){let k=C.softwareDecrypt(o,b.key.buffer,b.iv.buffer);if(r.part>-1&&(k=C.flush()),!k)return i.executeEnd=er(),Id(r);o=new Uint8Array(k)}else return this.decryptionPromise=C.webCryptoDecrypt(o,b.key.buffer,b.iv.buffer).then(k=>{const L=this.push(k,null,r);return this.decryptionPromise=null,L}),this.decryptionPromise}const T=this.needsProbing(u,d);if(T){const C=this.configureTransmuxer(o);if(C)return P.warn(`[transmuxer] ${C.message}`),this.observer.emit(S.ERROR,S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),i.executeEnd=er(),Id(r)}(u||d||p||T)&&this.resetInitSegment(x,h,g,v,n),(u||p||T)&&this.resetInitialTimestamp(y),c||this.resetContiguity();const A=this.transmux(o,b,m,f,r),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,i.executeEnd=er(),A}flush(e){const n=e.transmuxing;n.executeStart=er();const{decrypter:r,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return i.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(r){const d=r.flush();d&&o.push(this.push(d,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return n.executeEnd=er(),[Id(e)];const u=l.flush(a);return Ml(u)?u.then(d=>(this.flushRemux(o,d,e),o)):(this.flushRemux(o,u,e),o)}flushRemux(e,n,r){const{audioTrack:s,videoTrack:i,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;P.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const u=this.remuxer.remux(s,i,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=er()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,s,i){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,s),a.resetInitSegment(e,n,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,s,i){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,s,i):o=this.transmuxUnencrypted(e,r,s,i),o}transmuxUnencrypted(e,n,r,s){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,l,n,r,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,n,r,s,i){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:s,vendor:i}=this;let o;for(let f=0,m=Fl.length;f<m;f++){var a;if((a=Fl[f].demux)!=null&&a.probe(e)){o=Fl[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=o.remux,d=o.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(r,n,s,i)),(!l||!(l instanceof d))&&(this.demuxer=new d(r,n,s),this.probe=d.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new cm(this.config)),e}}function CM(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const Id=t=>({remuxResult:{},chunkMeta:t});function Ml(t){return"then"in t&&t.then instanceof Function}class LM{constructor(e,n,r,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=s,this.defaultInitPts=i||null}}class IM{constructor(e,n,r,s,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=o}}var f1={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],m]:l._events[p].push(m):(l._events[p]=m,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,p=new Array(m);f<m;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,m,p){var h=n?n+c:c;if(!this._events[h])return!1;var g=this._events[h],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,m),!0;case 6:return g.fn.call(g.context,u,d,f,m,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var b=g.length,T;for(x=0;x<b;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,d);break;case 4:g[x].fn.call(g[x].context,u,d,f);break;default:if(!v)for(T=1,v=new Array(y-1);T<y;T++)v[T-1]=arguments[T];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,m);else{for(var h=0,g=[],y=p.length;h<y;h++)(p[h].fn!==u||f&&!p[h].once||d&&p[h].context!==d)&&g.push(p[h]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(f1);var kM=f1.exports,mm=ZO(kM);class h1{constructor(e,n,r,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=n,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=s;const o=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===S.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new mm,this.observer.on(S.FRAG_DECRYPTED,o),this.observer.on(S.ERROR,o);const a=Os(i.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(i.workerPath||qF())){try{i.workerPath?(P.log(`loading Web Worker ${i.workerPath} for "${n}"`),this.workerContext=QF(i.workerPath)):(P.log(`injecting Web Worker for "${n}"`),this.workerContext=XF()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:u}=this.workerContext;u.addEventListener("message",this.onwmsg),u.onerror=d=>{const f=new Error(`${d.message}  (${d.filename}:${d.lineno})`);i.enableWorker=!1,P.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(S.ERROR,{type:ie.OTHER_ERROR,details:F.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:n,config:JSON.stringify(i)})}catch(u){P.warn(`Error setting up "${n}" Web Worker, fallback to inline`,u),this.resetWorker(),this.error=null,this.transmuxer=new by(this.observer,l,i,"",n)}return}this.transmuxer=new by(this.observer,l,i,"",n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,r,s,i,o,a,l,c,u){var d,f;c.transmuxing.start=self.performance.now();const{transmuxer:m}=this,p=o?o.start:i.start,h=i.decryptdata,g=this.frag,y=!(g&&i.cc===g.cc),v=!(g&&c.level===g.level),x=g?c.sn-g.sn:-1,b=this.part?c.part-this.part.index:-1,T=x===0&&c.id>1&&c.id===(g==null?void 0:g.stats.chunkCount),A=!v&&(x===1||x===0&&(b===1||T&&b<=0)),R=self.performance.now();(v||x||i.stats.parsing.start===0)&&(i.stats.parsing.start=R),o&&(b||!A)&&(o.stats.parsing.start=R);const C=!(g&&((d=i.initSegment)==null?void 0:d.url)===((f=g.initSegment)==null?void 0:f.url)),k=new IM(y,A,l,v,p,C);if(!A||y||C){P.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${y}
        trackSwitch: ${v}
        contiguous: ${A}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${C}`);const L=new LM(r,s,n,a,u);this.configureTransmuxer(L)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:h,chunkMeta:c,state:k},e instanceof ArrayBuffer?[e]:[]);else if(m){const L=m.push(e,h,c,k);Ml(L)?(m.async=!0,L.then(_=>{this.handleTransmuxComplete(_)}).catch(_=>{this.transmuxerError(_,c,"transmuxer-interface push error")})):(m.async=!1,this.handleTransmuxComplete(L))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let r=n.flush(e);Ml(r)||n.async?(Ml(r)||(r=Promise.resolve(r)),r.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data;if(!(n!=null&&n.event)){P.warn(`worker message received with no ${n?"event name":"data"}`);return}const r=this.hls;if(this.hls)switch(n.event){case"init":{var s;const i=(s=this.workerContext)==null?void 0:s.objectURL;i&&self.URL.revokeObjectURL(i);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":P[n.data.logType]&&P[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Ry=100;class DM extends um{constructor(e,n,r){super(e,n,r,"[audio-stream-controller]",re.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){if(r==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:s,timescale:i},this.log(`InitPTS for cc: ${o} found from main: ${s}`),this.videoTrackCC=o,this.state===V.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=V.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Ry),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=V.IDLE):(this.loadedmetadata=!1,this.state=V.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case V.IDLE:this.doTickIdle();break;case V.WAITING_TRACK:{var e;const{levels:r,trackId:s}=this,i=r==null||(e=r[s])==null?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=V.WAITING_INIT_PTS}break}case V.FRAG_LOADING_WAITING_RETRY:{var n;const r=performance.now(),s=this.retryDate;if(!s||r>=s||(n=this.media)!=null&&n.seeking){const{levels:i,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[o])||null),this.state=V.IDLE}break}case V.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:s,part:i,cache:o,complete:a}=r;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=V.FRAG_LOADING;const l=o.flush(),c={frag:s,part:i,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${s.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=Ie.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);Rh(c.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log(`Waiting fragment cc (${s.cc}) @ ${s.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=V.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=V.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:r,trackId:s}=this,i=e.config;if(!this.buffering||!r&&(this.startFragRequested||!i.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=V.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,be.AUDIO,re.AUDIO));const c=this.getFwdBufferInfo(l,re.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,a)){e.trigger(S.BUFFER_EOS,{type:"audio"}),this.state=V.ENDED;return}const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,re.MAIN),d=c.len,f=this.getMaxBufferLength(u==null?void 0:u.len),m=a.fragments,p=m[0].start,h=this.getLoadPosition(),g=this.flushing?h:c.end;if(this.switchingTrack&&r){const b=h;a.PTSKnown&&b<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}if(d>=f&&!this.switchingTrack&&g<m[m.length-1].start)return;let y=this.getNextFragment(g,a),v=!1;if(y&&this.isLoopLoading(y,g)&&(v=!!y.gap,y=this.getNextFragmentLoopLoading(y,a,c,re.MAIN,f)),!y){this.bufferFlushed=!0;return}const x=u&&y.start>u.end+a.targetduration;if(x||!(u!=null&&u.len)&&c.len){const b=this.getAppendedFrag(y.start,re.MAIN);if(b===null||(v||(v=!!b.gap||!!x&&u.len===0),x&&!v||v&&c.nextStart&&c.nextStart<b.end))return}this.loadFragment(y,o,g)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new Vi(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),r?this.setInterval(Ry):this.resetTransmuxer(),r?(this.switchingTrack=n,this.state=V.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=V.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(S.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:s}=this,{details:i,id:o}=n;if(!s){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const a=s[o];let l=0;if(i.live||(r=a.details)!=null&&r.live){this.checkLiveUpdate(i);const u=this.mainDetails;if(i.deltaUpdateFailed||!u)return;if(!a.details&&i.hasProgramDateTime&&u.hasProgramDateTime)Dc(i,u),l=i.fragments[0].start;else{var c;l=this.alignPlaylists(i,a.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}a.details=i,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(this.mainDetails||i,l),this.state===V.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=V.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new h1(this.hls,re.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const m=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(m!==void 0){const g=s?s.index:-1,y=g!==-1,v=new lm(r.level,r.sn,r.stats.chunkCount,i.byteLength,g,y);f.push(i,p,d,"",r,s,u.totalduration,!1,v,m)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:h}=this.waitingData=this.waitingData||{frag:r,part:s,cache:new Qw,complete:!1};h.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=V.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r.type!==re.AUDIO){if(!this.loadedmetadata&&r.type===re.MAIN){const i=this.videoBuffer||this.media;i&&Ie.getBuffered(i).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(S.AUDIO_TRACK_SWITCHED,nt({},i)))}this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=V.ERROR;return}switch(n.details){case F.FRAG_GAP:case F.FRAG_PARSING_ERROR:case F.FRAG_DECRYPT_ERROR:case F.FRAG_LOAD_ERROR:case F.FRAG_LOAD_TIMEOUT:case F.KEY_LOAD_ERROR:case F.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(re.AUDIO,n);break;case F.AUDIO_TRACK_LOAD_ERROR:case F.AUDIO_TRACK_LOAD_TIMEOUT:case F.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===V.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===ye.AUDIO_TRACK&&(this.state=V.IDLE);break;case F.BUFFER_APPEND_ERROR:case F.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===F.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case F.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==be.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==be.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===V.ENDED&&(this.state=V.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,re.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:d}=u,{audio:f,text:m,id3:p,initSegment:h}=i;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=V.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),h!=null&&h.tracks){const g=l.initSegment||l;this._bufferInitSegment(u,h.tracks,g,o),s.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:r,tracks:h.tracks})}if(f){const{startPTS:g,endPTS:y,startDTS:v,endDTS:x}=f;c&&(c.elementaryStreams[be.AUDIO]={startPTS:g,endPTS:y,startDTS:v,endDTS:x}),l.setElementaryStreamInfo(be.AUDIO,g,y,v,x),this.bufferFragmentData(f,l,c,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const g=We({id:r,frag:l,details:d},p);s.trigger(S.FRAG_PARSING_METADATA,g)}if(m){const g=We({id:r,frag:l,details:d},m);s.trigger(S.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,n,r,s){if(this.state!==V.PARSING)return;n.video&&delete n.video;const i=n.audio;if(!i)return;i.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${o}/${i.codec}]`),o&&o.split(",").length===1&&(i.levelCodec=o),this.hls.trigger(S.BUFFER_CODECS,n);const a=i.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:s,parent:r.type,data:a};this.hls.trigger(S.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===et.NOT_LOADED||s===et.PARTIAL){var i;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((i=n.details)!=null&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=V.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&Dc(n.details,o)}else this.startFragRequested=!0,super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a}=this.bufferedTrack;bs({name:n,lang:r,assocLang:s,characteristics:i,audioCodec:o,channels:a},e,as)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(S.AUDIO_TRACK_SWITCHED,nt({},e))}}function p1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!oa(t[n].attrs,e[n].attrs))return!1;return!0}function oa(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>t[s]!==e[s])}function Ch(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class PM extends am{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Audio track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,m)=>{f.id=m});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!i&&l){const f=jn(l,a,as);if(f>-1)i=a[f];else{const m=jn(l,this.tracks);i=this.tracks[m]}}let c=this.findTrackId(i);c===-1&&i&&(c=this.findTrackId(null));const u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(S.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(i)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===ye.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const s=this.currentTrack;if(s&&bs(e,s,as))return s;const i=jn(e,this.tracksInGroup,as);if(i>-1){const o=this.tracksInGroup[i];return this.setAudioTrack(i),o}else if(s){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=PF(e,n.levels,r,o,as);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=jn(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e],i=s.details&&!s.details.live;if(e===this.trackId&&s===r&&i||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(S.AUDIO_TRACK_SWITCHING,nt({},s)),i))return;const o=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(!(this.selectDefaultTrack&&!s.default)&&(!e||bs(e,s,as)))return r}if(e){const{name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<n.length;c++){const u=n[c];if(bs({name:r,lang:s,assocLang:i,characteristics:o,audioCodec:a,channels:l},u,as))return c}for(let c=0;c<n.length;c++){const u=n[c];if(oa(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<n.length;c++){const u=n[c];if(oa(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${r} "${n.name}" lang:${n.lang} group:${s}`),this.clearTimer(),this.hls.trigger(S.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}}const Ay=500;class _M extends um{constructor(e,n,r){super(e,n,r,"[subtitle-stream-controller]",re.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.ERROR,this.onError,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.ERROR,this.onError,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=V.IDLE,this.setInterval(Ay),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:s}=n;if(this.fragPrevious=r,this.state=V.IDLE,!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=r.start;for(let c=0;c<i.length;c++)if(a>=i[c].start&&a<=i[c].end){o=i[c];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},i.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(e,n){const{startOffset:r,endOffset:s}=n;if(r===0&&s!==Number.POSITIVE_INFINITY){const i=s-1;if(i<=0)return;n.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=i){o.shift();continue}else if(o[a].start<i)o[a].start=i;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,i,re.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===re.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===re.SUBTITLE&&(n.details===F.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==V.STOPPED&&(this.state=V.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&p1(this.levels,n)){this.levels=n.map(r=>new Vi(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const s=new Vi(r);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,re.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(Ay)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:s,levels:i}=this,{details:o,id:a}=n;if(!i){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=i[a];if(a>=i.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(r=l.details)!=null&&r.live){const d=this.mainDetails;if(o.deltaUpdateFailed||!d)return;const f=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Dc(o,d),c=o.fragments[0].start):f&&(c=f.start,bh(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&f&&(c=f.start,bh(o,c))}}l.details=o,this.levelLastLoaded=l,a===s&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===V.IDLE&&(kc(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,s=n.decryptdata,i=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&s!=null&&s.key&&s.iv&&s.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),s.key.buffer,s.iv.buffer).catch(a=>{throw i.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();i.trigger(S.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=V.IDLE})}}doTick(){if(!this.media){this.state=V.IDLE;return}if(this.state===V.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details)return;const{config:s}=this,i=this.getLoadPosition(),o=Ie.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,re.MAIN),u=r.details,d=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>d)return;const f=u.fragments,m=f.length,p=u.edge;let h=null;const g=this.fragPrevious;if(a<p){const y=s.maxFragLookUpTolerance,v=a>p-y?0:y;h=kc(g,f,Math.max(f[0].start,a),v),!h&&g&&g.start<f[0].start&&(h=f[0])}else h=f[m-1];if(!h)return;if(h=this.mapToInitFragWhenRequired(h),h.sn!=="initSegment"){const y=h.sn-u.startSN,v=f[y-1];v&&v.cc===h.cc&&this.fragmentTracker.getState(v)===et.NOT_LOADED&&(h=v)}this.fragmentTracker.getState(h)===et.NOT_LOADED&&this.loadFragment(h,r,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,r))}get mediaBufferTimeRanges(){return new OM(this.tracksBuffered[this.currentTrackId]||[])}}class OM{constructor(e){this.buffered=void 0;const n=(r,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}class NM extends am{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=Pl(this.media.textTracks);for(let i=0;i<r.length;i++)if(r[i].mode==="hidden")n=r[i];else if(r[i].mode==="showing"){n=r[i];break}const s=this.findTrackForTextTrack(n);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Pl(this.media.textTracks).forEach(n=>{li(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Subtitle track with id:${r} and group:${s} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,s=this.groupIds;let i=this.currentTrack;if(!r||(s==null?void 0:s.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(u=>!r||r.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,d)=>{u.id=d});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!i&&a){this.selectDefaultTrack=!1;const u=jn(a,o);if(u>-1)i=o[u];else{const d=jn(a,this.tracks);i=this.tracks[d]}}let l=this.findTrackId(i);l===-1&&i&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let s=0;s<n.length;s++){const i=n[s];if(!(r&&!i.default||!r&&!e)&&(!e||bs(i,e)))return s}if(e){for(let s=0;s<n.length;s++){const i=n[s];if(oa(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<n.length;s++){const i=n[s];if(oa(e.attrs,i.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if(Ch(s,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===ye.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&bs(e,r))return r;const s=jn(e,this.tracksInGroup);if(s>-1){const i=this.tracksInGroup[s];return this.setSubtitleTrack(s),i}else{if(r)return null;{const i=jn(e,n);if(i>-1)return n[i]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(S.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Pl(e.textTracks),r=this.currentTrack;let s;if(r&&(s=n.filter(i=>Ch(r,i))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(i=>{i.mode!=="disabled"&&i!==s&&(i.mode="disabled")}),s){const i=this.subtitleDisplay?"showing":"hidden";s.mode!==i&&(s.mode=i)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!Z(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,s=n[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:e});return}const i=!!s.details&&!s.details.live;if(e===this.trackId&&s===r&&i)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:o,groupId:a="",name:l,type:c,url:u}=s;this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const d=this.switchParams(s.url,r==null?void 0:r.details,s.details);this.loadPlaylist(d)}}class FM{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,r){const s=this.queues[n];s.push(e),s.length===1&&!r&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const r=new Promise(i=>{n=i}),s={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),r}executeNext(e){const n=this.queues[e];if(n.length){const r=n[0];try{r.execute()}catch(s){P.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${s}`),r.onError(s);const i=this.buffers[e];i!=null&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Cy=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class MM{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=r=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:r,mediaSource:s}=this;this.log("Media source opened"),r&&(r.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(S.MEDIA_ATTACHED,{media:r,mediaSource:s})),s&&s.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:s}=this;r!==s&&P.error(`Media element src was set while attaching MediaSource (${s} > ${r})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=zN(Os(e.config.preferManagedMediaSource)),this.log=P.log.bind(P,n),this.warn=P.warn.bind(P,n),this.error=P.error.bind(P,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_APPENDING,this.onBufferAppending,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.BUFFER_EOS,this.onBufferEos,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.FRAG_PARSED,this.onFragParsed,this),e.on(S.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_APPENDING,this.onBufferAppending,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.BUFFER_EOS,this.onBufferEos,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.FRAG_PARSED,this.onFragParsed,this),e.off(S.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new FM(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const r=this.media=n.media,s=Os(this.appendSource);if(r&&s){var i;const o=this.mediaSource=new s;this.log(`created media source: ${(i=o.constructor)==null?void 0:i.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&o instanceof l,Ly(r),UM(r,a),r.load()}catch{r.src=a}else r.src=a;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:r}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(s){this.warn(`onMediaDetaching: ${s.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(e.removeAttribute("src"),this.appendSource&&Ly(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(S.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var r;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(s){this.warn(`onBufferReset ${e}`,s)}}onBufferCodecs(e,n){const r=this.getSourceBufferTypes().length,s=Object.keys(n);if(s.forEach(o=>{if(r){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:c,codec:u,levelCodec:d,container:f,metadata:m}=n[o],p=q0(l.codec,l.levelCodec),h=p==null?void 0:p.replace(Cy,"$1");let g=q0(u,d);const y=(a=g)==null?void 0:a.replace(Cy,"$1");if(g&&h!==y){o.slice(0,5)==="audio"&&(g=Ac(g,this.appendSource));const v=`${f};codecs=${g}`;this.appendChangeType(o,v),this.log(`switching codec ${p} to ${g}`),this.tracks[o]={buffer:l.buffer,codec:u,container:f,levelCodec:d,metadata:m,id:c}}}}else this.pendingTracks[o]=n[o]}),r)return;const i=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==i&&(this.log(`${i} bufferCodec event(s) expected ${s.join(",")}`),this.bufferCodecEventsExpected=i),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:r}=this,s={execute:()=>{const i=this.sourceBuffer[e];i&&(this.log(`changing ${e} sourceBuffer type to ${n}`),i.changeType(n)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:i=>{this.warn(`Failed to change ${e} SourceBuffer type`,i)}};r.append(s,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:r,operationQueue:s,tracks:i}=this,{data:o,type:a,frag:l,part:c,chunkMeta:u}=n,d=u.buffering[a],f=self.performance.now();d.start=f;const m=l.stats.buffering,p=c?c.stats.buffering:null;m.start===0&&(m.start=f),p&&p.start===0&&(p.start=f);const h=i.audio;let g=!1;a==="audio"&&(h==null?void 0:h.container)==="audio/mpeg"&&(g=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const y=l.start,v={execute:()=>{if(d.executeStart=self.performance.now(),g){const x=this.sourceBuffer[a];if(x){const b=y-x.timestampOffset;Math.abs(b)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${y} (delta: ${b}) sn: ${l.sn})`),x.timestampOffset=y)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const x=self.performance.now();d.executeEnd=d.end=x,m.first===0&&(m.first=x),p&&p.first===0&&(p.first=x);const{sourceBuffer:b}=this,T={};for(const A in b)T[A]=Ie.getBuffered(b[A]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(S.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:T})},onError:x=>{const b={type:ie.MEDIA_ERROR,parent:l.type,details:F.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:c,chunkMeta:u,error:x,err:x,fatal:!1};if(x.code===DOMException.QUOTA_EXCEEDED_ERR)b.details=F.BUFFER_FULL_ERROR;else{const T=++this.appendErrors[a];b.details=F.BUFFER_APPEND_ERROR,this.warn(`Failed ${T}/${r.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),T>=r.config.appendErrorMaxRetry&&(b.fatal=!0)}r.trigger(S.ERROR,b)}};s.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(e,n){const{operationQueue:r}=this,s=i=>({execute:this.removeExecutor.bind(this,i,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(S.BUFFER_FLUSHED,{type:i})},onError:o=>{this.warn(`Failed to remove from ${i} SourceBuffer`,o)}});n.type?r.append(s(n.type),n.type):this.getSourceBufferTypes().forEach(i=>{r.append(s(i),i)})}onFragParsed(e,n){const{frag:r,part:s}=n,i=[],o=s?s.elementaryStreams:r.elementaryStreams;o[be.AUDIOVIDEO]?i.push("audiovideo"):(o[be.AUDIO]&&i.push("audio"),o[be.VIDEO]&&i.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const c=s?s.stats:r.stats;this.hls.trigger(S.FRAG_BUFFERED,{frag:r,part:s,stats:c,id:r.type})};i.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,i)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((s,i)=>{const o=this.sourceBuffer[i];return o&&(!n.type||n.type===i)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${i} sourceBuffer now EOS`))),s&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(i=>{const o=this.sourceBuffer[i];o&&(o.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.getSourceBufferTypes().length)return;const i=e.config,o=r.currentTime,a=n.levelTargetDuration,l=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Z(l)&&l>0){const c=Math.max(l,a),u=Math.floor(o/a)*a-c;this.flushBackBuffer(o,a,u)}if(Z(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const c=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),u=Math.max(c,a),d=Math.floor(o/a)*a+u;this.flushFrontBuffer(o,a,d)}}flushBackBuffer(e,n,r){const{details:s,sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const l=i[a];if(l){const c=Ie.getBuffered(l);if(c.length>0&&r>c.start(0)){if(this.hls.trigger(S.BACK_BUFFER_REACHED,{bufferEnd:r}),s!=null&&s.live)this.hls.trigger(S.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l.ended&&c.end(c.length-1)-e<n*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:a})}}})}flushFrontBuffer(e,n,r){const{sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(o=>{const a=s[o];if(a){const l=Ie.getBuffered(a),c=l.length;if(c<2)return;const u=l.start(c-1),d=l.end(c-1);if(r>u||e>=u&&e<=d)return;if(a.ended&&e-d<2*n){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:r,mediaSource:s}=this,i=e.fragments[0].start+e.totalduration,o=r.duration,a=Z(s.duration)?s.duration:0;e.live&&n.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>o||!Z(o))&&(this.log(`Updating Media Source duration to ${i.toFixed(3)}`),s.duration=i)}updateSeekableRange(e){const n=this.mediaSource,r=e.fragments;if(r.length&&e.live&&n!=null&&n.setLiveSeekableRange){const i=Math.max(0,r[0].start),o=Math.max(i,i+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${i}-${o}.`),n.setLiveSeekableRange(i,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:r}=this,s=Object.keys(r).length;if(s&&(!e||s===2||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const i=this.getSourceBufferTypes();if(i.length)this.hls.trigger(S.BUFFER_CREATED,{tracks:this.tracks}),i.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!n[i]){var s;const o=e[i];if(!o)throw Error(`source buffer exists for track ${i}, however track does not`);let a=((s=o.levelCodec)==null?void 0:s.indexOf(","))===-1?o.levelCodec:o.codec;a&&i.slice(0,5)==="audio"&&(a=Ac(a,this.appendSource));const l=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${l})`);try{const c=n[i]=r.addSourceBuffer(l),u=i;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(d,f)=>{const m=f.removedRanges;m!=null&&m.length&&this.hls.trigger(S.BUFFER_FLUSHED,{type:i})}),this.tracks[i]={buffer:c,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(c){this.error(`error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:i,mimeType:l})}}}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:r}=this;r.current(e).onComplete(),r.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var r;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${s}`,n),this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(s)}removeExecutor(e,n,r){const{media:s,mediaSource:i,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!s||!i||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const c=Z(s.duration)?s.duration:1/0,u=Z(i.duration)?i.duration:1/0,d=Math.max(0,n),f=Math.min(r,c,u);f>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${f}] from the ${e} SourceBuffer`),l.remove(d,f)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.sourceBuffer[n];if(!r){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,s=n.map(i=>r.appendBlocker(i));Promise.all(s).then(()=>{e(),n.forEach(i=>{const o=this.sourceBuffer[i];o!=null&&o.updating||r.shiftAndExecuteNext(i)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,r){const s=this.sourceBuffer[e];if(!s)return;const i=r.bind(this,e);this.listeners[e].push({event:n,listener:i}),s.addEventListener(n,i)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(r=>{n.removeEventListener(r.event,r.listener)})}}function Ly(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function UM(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const BM={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},m1=t=>String.fromCharCode(BM[t]||t),cn=15,Xn=100,$M={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},jM={17:2,18:4,21:6,22:8,23:10,19:13,20:15},GM={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},VM={25:2,26:4,29:6,30:8,31:10,27:13,28:15},HM=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class KM{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;P.log(`${this.time} [${e}] ${r}`)}}}const rs=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class g1{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const s=n[r];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class zM{constructor(){this.uchar=" ",this.penState=new g1}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class WM{constructor(e){this.chars=[],this.pos=0,this.currPenState=new g1,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<Xn;n++)this.chars.push(new zM);this.logger=e}equals(e){for(let n=0;n<Xn;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<Xn;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<Xn;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Xn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Xn)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=m1(e);if(this.pos>=Xn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<Xn;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<Xn;r++){const s=this.chars[r].uchar;s!==" "&&(n=!1),e.push(s)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class kd{constructor(e){this.rows=[],this.currRow=cn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<cn;n++)this.rows.push(new WM(e));this.logger=e}reset(){for(let e=0;e<cn;e++)this.rows[e].clear();this.currRow=cn-1}equals(e){let n=!0;for(let r=0;r<cn;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<cn;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<cn;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<cn;a++)this.rows[a].clear();const i=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[i].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[n-this.nrRollUpRows+c+1].copy(o.rows[i+c])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,o=Math.max(i-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",s=-1;for(let i=0;i<cn;i++){const o=this.rows[i].getTextString();o&&(s=i+1,e?n.push("Row "+s+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class Iy{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new kd(r),this.nonDisplayedMemory=new kd(r),this.lastOutputScreen=new kd(r),this.currRollUpRow=this.displayedMemory.rows[cn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[cn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=s[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class ky{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=qM(),this.logger=void 0;const s=this.logger=new KM;this.channels=[null,new Iy(e,n,s),new Iy(e+1,r,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const s=n[r]&127,i=n[r+1]&127;let o=!1,a=null;if(s===0&&i===0)continue;this.logger.log(3,()=>"["+rs([n[r],n[r+1]])+"] -> ("+rs([s,i])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(YM(s,i,l)){al(null,null,l),this.logger.log(3,()=>"Repeated command ("+rs([s,i])+") is dropped");continue}al(s,i,this.cmdHistory),o=this.parseCmd(s,i),o||(o=this.parseMidrow(s,i)),o||(o=this.parsePAC(s,i)),o||(o=this.parseBackgroundAttributes(s,i))}else al(null,null,l);if(!o&&(a=this.parseChars(s,i),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+rs([s,i])+" orig: "+rs([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=33&&n<=35;if(!(r||s))return!1;const i=e===20||e===21||e===23?1:2,o=this.channels[i];return e===20||e===21||e===28||e===29?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.currentChannel=i,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[r];return s?(s.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+rs([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const s=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,i=(e===16||e===24)&&n>=64&&n<=95;if(!(s||i))return!1;const o=e<=23?1:2;n>=64&&n<=95?r=o===1?$M[e]:GM[e]:r=o===1?jM[e]:VM[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(r,n)),this.currentChannel=o,!0):!1}interpretPAC(e,n){let r;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,s.underline=(r&1)===1,r<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((r-16)/2)*4,s}parseChars(e,n){let r,s=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let o;i===17?o=n+80:i===18?o=n+112:o=n+144,this.logger.log(2,()=>"Special char '"+m1(o)+"' in channel "+r),s=[o]}else e>=32&&e<=127&&(s=n===0?[e]:[e,n]);return s&&this.logger.log(3,()=>"Char codes =  "+rs(s).join(",")),s}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=45&&n<=47;if(!(r||s))return!1;let i;const o={};e===16||e===24?(i=Math.floor((n-32)/2),o.background=HM[i],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}al(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function al(t,e,n){n.a=t,n.b=e}function YM(t,e,n){return n.a===t&&n.b===e}function qM(){return{a:null,b:null}}class ll{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var gm=function(){if(Gi!=null&&Gi.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function r(a){return n(t,a)}function s(a){return n(e,a)}function i(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)a[d]=u[d]}return a}function o(a,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let f="",m=!1,p=a,h=l,g=c,y=null,v="",x=!0,b="auto",T="start",A=50,R="middle",C=50,k="middle";Object.defineProperty(u,"id",i({},d,{get:function(){return f},set:function(L){f=""+L}})),Object.defineProperty(u,"pauseOnExit",i({},d,{get:function(){return m},set:function(L){m=!!L}})),Object.defineProperty(u,"startTime",i({},d,{get:function(){return p},set:function(L){if(typeof L!="number")throw new TypeError("Start time must be set to a number.");p=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",i({},d,{get:function(){return h},set:function(L){if(typeof L!="number")throw new TypeError("End time must be set to a number.");h=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",i({},d,{get:function(){return g},set:function(L){g=""+L,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",i({},d,{get:function(){return y},set:function(L){y=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",i({},d,{get:function(){return v},set:function(L){const _=r(L);if(_===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=_,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",i({},d,{get:function(){return x},set:function(L){x=!!L,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",i({},d,{get:function(){return b},set:function(L){if(typeof L!="number"&&L!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");b=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",i({},d,{get:function(){return T},set:function(L){const _=s(L);if(!_)throw new SyntaxError("An invalid or illegal string was specified.");T=_,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",i({},d,{get:function(){return A},set:function(L){if(L<0||L>100)throw new Error("Position must be between 0 and 100.");A=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",i({},d,{get:function(){return R},set:function(L){const _=s(L);if(!_)throw new SyntaxError("An invalid or illegal string was specified.");R=_,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",i({},d,{get:function(){return C},set:function(L){if(L<0||L>100)throw new Error("Size must be between 0 and 100.");C=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",i({},d,{get:function(){return k},set:function(L){const _=s(L);if(!_)throw new SyntaxError("An invalid or illegal string was specified.");k=_,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class XM{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function y1(t){function e(r,s,i,o){return(r|0)*3600+(s|0)*60+(i|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class QM{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let s=0;s<r.length;++s)if(n===r[s]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function v1(t,e,n,r){const s=r?t.split(r):[t];for(const i in s){if(typeof s[i]!="string")continue;const o=s[i].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const Lh=new gm(0,0,""),cl=Lh.align==="middle"?"middle":"center";function JM(t,e,n){const r=t;function s(){const a=y1(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function i(a,l){const c=new QM;v1(a,function(f,m){let p;switch(f){case"region":for(let h=n.length-1;h>=0;h--)if(n[h].id===m){c.set(f,n[h].region);break}break;case"vertical":c.alt(f,m,["rl","lr"]);break;case"line":p=m.split(","),c.integer(f,p[0]),c.percent(f,p[0])&&c.set("snapToLines",!1),c.alt(f,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",cl,"end"]);break;case"position":p=m.split(","),c.percent(f,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",cl,"end","line-left","line-right","auto"]);break;case"size":c.percent(f,m);break;case"align":c.alt(f,m,["start",cl,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&Lh.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",cl);let d=c.get("position","auto");d==="auto"&&Lh.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=s(),o(),i(t,e)}function x1(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class ZM{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new XM,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let i=n.buffer,o=0;for(i=x1(i);o<i.length&&i[o]!=="\r"&&i[o]!==`
`;)++o;const a=i.slice(0,o);return i[o]==="\r"&&++o,i[o]===`
`&&++o,n.buffer=i.slice(o),a}function s(i){v1(i,function(o,a){},/:/)}try{let i="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;i=r();const a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=r(),n.state){case"HEADER":/:/.test(i)?s(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new gm(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{JM(i,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=i.indexOf("-->")!==-1;if(!i||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=i}continue;case"BADCUE":i||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const e2=/\r\n|\n\r|\n|\r/g,Dd=function(e,n,r=0){return e.slice(r,r+n.length)===n},t2=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Z(n)||!Z(r)||!Z(s)||!Z(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*s,n+=60*60*1e3*i,n},Pd=function(e){let n=5381,r=e.length;for(;r;)n=n*33^e.charCodeAt(--r);return(n>>>0).toString()};function ym(t,e,n){return Pd(t.toString())+Pd(e.toString())+Pd(n)}const n2=function(e,n,r){let s=e[n],i=e[s.prevCC];if(!i||!i.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=i)!=null&&o.new;){var o;e.ccOffset+=s.start-i.start,s.new=!1,s=i,i=e[s.prevCC]}e.presentationOffset=r};function r2(t,e,n,r,s,i,o){const a=new ZM,l=Hn(new Uint8Array(t)).trim().replace(e2,`
`).split(`
`),c=[],u=e?EM(e.baseTime,e.timescale):0;let d="00:00.000",f=0,m=0,p,h=!0;a.oncue=function(g){const y=n[r];let v=n.ccOffset;const x=(f-u)/9e4;if(y!=null&&y.new&&(m!==void 0?v=n.ccOffset=y.start:n2(n,r,x)),x){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}v=x-n.presentationOffset}const b=g.endTime-g.startTime,T=Qt((g.startTime+v-m)*9e4,s*9e4)/9e4;g.startTime=Math.max(T,0),g.endTime=Math.max(T+b,0);const A=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(A)),g.id||(g.id=ym(g.startTime,g.endTime,A)),g.endTime>0&&c.push(g)},a.onparsingerror=function(g){p=g},a.onflush=function(){if(p){o(p);return}i(c)},l.forEach(g=>{if(h)if(Dd(g,"X-TIMESTAMP-MAP=")){h=!1,g.slice(16).split(",").forEach(y=>{Dd(y,"LOCAL:")?d=y.slice(6):Dd(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{m=t2(d)/1e3}catch(y){p=y}return}else g===""&&(h=!1);a.parse(g+`
`)}),a.flush()}const _d="stpp.ttml.im1t",E1=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,S1=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,s2={left:"start",center:"center",right:"end",start:"start",end:"end"};function Dy(t,e,n,r){const s=ae(new Uint8Array(t),["mdat"]);if(s.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(a=>Hn(a)),o=xM(e.baseTime,1,e.timescale);try{i.forEach(a=>n(i2(a,o)))}catch(a){r(a)}}function i2(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(i).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||i[f],d),{}),a=s.getAttribute("xml:space")!=="preserve",l=Py(Od(s,"styling","style")),c=Py(Od(s,"layout","region")),u=Od(s,"body","[begin]");return[].map.call(u,d=>{const f=T1(d,a);if(!f||!d.hasAttribute("begin"))return null;const m=Fd(d.getAttribute("begin"),o),p=Fd(d.getAttribute("dur"),o);let h=Fd(d.getAttribute("end"),o);if(m===null)throw _y(d);if(h===null){if(p===null)throw _y(d);h=m+p}const g=new gm(m-e,h-e,f);g.id=ym(g.startTime,g.endTime,g.text);const y=c[d.getAttribute("region")],v=l[d.getAttribute("style")],x=o2(y,v,l),{textAlign:b}=x;if(b){const T=s2[b];T&&(g.lineAlign=T),g.align=b}return We(g,x),g}).filter(d=>d!==null)}function Od(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Py(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function T1(t,e){return[].slice.call(t.childNodes).reduce((n,r,s)=>{var i;return r.nodeName==="br"&&s?n+`
`:(i=r.childNodes)!=null&&i.length?T1(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function o2(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(s=n[o]),i.reduce((a,l)=>{const c=Nd(e,r,l)||Nd(t,r,l)||Nd(s,r,l);return c&&(a[l]=c),a},{})}function Nd(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function _y(t){return new Error(`Could not parse ttml timestamp ${t}`)}function Fd(t,e){if(!t)return null;let n=y1(t);return n===null&&(E1.test(t)?n=a2(t,e):S1.test(t)&&(n=l2(t,e))),n}function a2(t,e){const n=E1.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function l2(t,e){const n=S1.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class c2{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Ny(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new ll(this,"textTrack1"),n=new ll(this,"textTrack2"),r=new ll(this,"textTrack3"),s=new ll(this,"textTrack4");this.cea608Parser1=new ky(1,e,n),this.cea608Parser2=new ky(3,r,s)}}addCues(e,n,r,s,i){let o=!1;for(let a=i.length;a--;){const l=i[a],c=u2(l[0],l[1],n,r);if(c>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,c/(r-n)>.5))return}if(o||i.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,s)}else{const a=this.Cues.newCue(null,n,r,s);this.hls.trigger(S.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){const{unparsedVttFrags:o}=this;r==="main"&&(this.initPTS[n.cc]={baseTime:s,timescale:i}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(S.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let s=0;s<r.textTracks.length;s++){const i=r.textTracks[s];if(Oy(i,{name:e,lang:n,attrs:{}}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:s}=this,{label:i,languageCode:o}=n[e],a=this.getExistingTrack(i,o);if(a)r[e]=a,li(r[e]),Gw(r[e],s);else{const l=this.createTextTrack("captions",i,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,s={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,n,r){const s=this.media;if(s)return s.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{li(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Ny(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)li(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],s=r.some(i=>i.textCodec===_d);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(p1(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?Pl(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&Oy(a[f],l)){d=a[f],a[f]=null;break}d&&(u=d)}if(u)li(u);else{const d=w1(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&P.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const s=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!s)return;const i=`textTrack${s[1]}`,o=this.captionsProperties[i];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===re.MAIN){var r,s;const{cea608Parser1:i,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=n.frag,u=(r=(s=n.part)==null?void 0:s.index)!=null?r:-1;i&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(i.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,n){const{frag:r,payload:s}=n;if(r.type===re.SUBTITLE)if(s.byteLength){const i=r.decryptdata,o="stats"in n;if(i==null||!i.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===_d?this._parseIMSC1(r,s):this._parseVTTs(n)}}else this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;Dy(n,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),r.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{P.log(`Failed to parse IMSC1: ${s}`),r.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var n;const{frag:r,payload:s}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[r.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(n=r.initSegment)!=null&&n.data?sn(r.initSegment.data,new Uint8Array(s)):s;r2(c,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,u=>{this._appendCues(u,r.level),l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,s),P.log(`Failed to parse VTT cue: ${u}`),!(d&&a>r.cc)&&l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:u})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||Dy(n,this.initPTS[e.cc],()=>{r.textCodec=_d,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[n];if(!s||s.mode==="disabled")return;e.forEach(i=>Vw(s,i))}else{const s=this.tracks[n];if(!s)return;const i=s.default?"default":"subtitles"+n;r.trigger(S.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===re.SUBTITLE&&this.onFragLoaded(S.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:s}=this;if(!this.enabled||!r||!s)return;const{frag:i,samples:o}=n;if(!(i.type===re.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);r.addData(o[a].pts,c[0]),s.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:s,type:i}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!i||i==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>Sh(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>Sh(a[l],n,s))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let s=2;for(let i=0;i<r;i++){const o=e[s++],a=127&e[s++],l=127&e[s++];if(a===0&&l===0)continue;if((4&o)!==0){const u=3&o;(u===0||u===1)&&(n[u].push(a),n[u].push(l))}}return n}}function w1(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function Oy(t,e){return!!t&&t.kind===w1(e)&&Ch(e,t)}function u2(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function Ny(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class vm{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&Z(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&P.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,vm.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const s=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let i=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&s(l,e[a+1])){i=a;break}}return i}}class d2{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const s=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,r){const s=performance.now();if(n){if(this.lastTime){const i=s-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/i,c=this.hls;if(c.trigger(S.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;P.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(S.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const ul="[eme]";class xi{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=xi.CDMCleanupPromise?[xi.CDMCleanupPromise]:[],this.debug=P.debug.bind(P,ul),this.log=P.log.bind(P,ul),this.warn=P.warn.bind(P,ul),this.error=P.error.bind(P,ul),this.onMediaEncrypted=n=>{const{initDataType:r,initData:s}=n,i=`"${n.type}" event: init data type: "${r}"`;if(this.debug(i),s!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=el(this.config));const a=o.map(vd).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=gd(o);let l,c;if(r==="sinf"){if(a!==Te.FAIRPLAY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=qe(new Uint8Array(s));try{const h=rm(JSON.parse(p).sinf),g=Mw(h);if(!g)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=g.subarray(8,24),c=Te.FAIRPLAY}catch(h){this.warn(`${i} Failed to parse sinf: ${h}`);return}}else{if(a!==Te.WIDEVINE&&a!==Te.PLAYREADY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}const p=GN(s),h=p.filter(y=>!!y.systemId&&yd(y.systemId)===a);h.length>1&&this.warn(`${i} Using first of ${h.length} pssh found for selected key-system ${a}`);const g=h[0];if(!g){p.length===0||p.some(y=>!y.systemId)?this.warn(`${i} contains incomplete or invalid pssh data`):this.log(`ignoring ${i} for ${p.map(y=>yd(y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=yd(g.systemId),g.version===0&&g.data)if(c===Te.WIDEVINE){const y=g.data.length-22;l=g.data.subarray(y,y+16)}else c===Te.PLAYREADY&&(l=Iw(g.data))}if(!c||!l){this.log(`Unable to handle ${i} with key-system ${a}`);return}const u=Pn.hexDump(l),{keyIdToKeySessionPromise:d,mediaKeySessions:f}=this;let m=d[u];for(let p=0;p<f.length;p++){const h=f[p],g=h.decryptdata;if(!g.keyId)continue;const y=Pn.hexDump(g.keyId);if(u===y||g.uri.replace(/-/g,"").indexOf(u)!==-1){if(m=d[y],g.pssh)break;delete d[y],g.pssh=new Uint8Array(s),g.keyId=l,m=d[u]=m.then(()=>this.generateRequestWithPreferredKeySession(h,r,s,"encrypted-event-key-match")),m.catch(v=>this.handleError(v));break}}if(!m){if(c!==a){this.log(`Ignoring "${i}" with ${c} init data for selected key-system ${a}`);return}m=d[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:p,mediaKeys:h})=>{var g;this.throwIfDestroyed();const y=new sa("ISO-23001-7",u,(g=vd(p))!=null?g:"");return y.pssh=new Uint8Array(s),y.keyId=l,this.attemptSetMediaKeys(p,h).then(()=>{this.throwIfDestroyed();const v=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:h});return this.generateRequestWithPreferredKeySession(v,r,s,"encrypted-event-no-match")})}),m.catch(p=>this.handleError(p))}})}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,s=n[e];if(s)return s.licenseUrl;if(e===Te.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,s=n.map(o=>o.audioCodec).filter(r),i=n.map(o=>o.videoCodec).filter(r);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,s,i).then(d=>o({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Yt?a(d):a(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return Lw===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(e,n)}getMediaKeysPromise(e,n,r){const s=yN(e,n,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=i==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),o=this.requestMediaKeySystemAccess(e,s);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),a.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),a.mediaKeys})}return o.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Pn.hexDump(e.keyId||[])}`);const s=r.createSession(),i={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),s=this.getKeyIdString(n),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,i,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Pn.hexDump(e.keyId)}updateKeySession(e,n){var r;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Pn.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),s.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,r)=>{const s=el(this.config),i=e.map(gd).filter(o=>!!o&&s.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(i).then(({keySystem:o})=>{const a=vd(o);a?n(a):r(new Error(`Unable to find format for key-system "${o}"`))}).catch(r)})}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),s=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);let i=this.keyIdToKeySessionPromise[r];return i||(i=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),i.catch(o=>this.handleError(o))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Yt?this.hls.trigger(S.ERROR,e.data):this.hls.trigger(S.ERROR,{type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const s=gd(e.keyFormat),i=s?[s]:el(this.config);return this.attemptKeySystemAccess(i)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=el(this.config)),e.length===0)throw new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>r.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,n,r,s){var i,o;const a=(i=this.config.drmSystems)==null||(o=i[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const p=a.call(this.hls,n,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,r=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${c} (init data type: ${n} length: ${r?r.byteLength:null})`);const u=new mm,d=e._onmessage=p=>{const h=e.mediaKeysSession;if(!h){u.emit("error",new Error("invalid state"));return}const{messageType:g,message:y}=p;this.log(`"${g}" message event for session "${h.sessionId}" message size: ${y.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,y).catch(v=>{this.handleError(v),u.emit("error",v)}):g==="license-release"?e.keySystem===Te.FAIRPLAY&&(this.updateKeySession(e,xh("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${g}"`)},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const g=e.keyStatus;u.emit("keyStatus",g),g==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",f);const m=new Promise((p,h)=>{u.on("error",h),u.on("keyStatus",g=>{g.startsWith("usable")?p():g==="output-restricted"?h(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):g==="internal-error"?h(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${g}"`)):g==="expired"?h(new Error("key expired while generating request")):this.warn(`unhandled key status change "${g}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${c}`)}).catch(p=>{throw new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>m).catch(p=>{throw u.removeAllListeners(),this.removeSession(e),p}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${Pn.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Pn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,s=new r(n),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:i},c=n.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,p,h)=>{o(f.data)},onError:(f,m,p,h)=>{a(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:nt({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,m,p)=>{a(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,m,p)=>{a(new Error("aborted"))}};s.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((s,i)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),s(e)}).catch(o=>{i(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(s=>{throw new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const s=new DOMParser().parseFromString(r,"application/xml"),i=s.querySelectorAll("HttpHeader");if(i.length>0){let u;for(let d=0,f=i.length;d<f;d++){var o,a;u=i[d];const m=(o=u.querySelector("name"))==null?void 0:o.textContent,p=(a=u.querySelector("value"))==null?void 0:a.textContent;m&&p&&e.setRequestHeader(m,p)}}const l=s.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return xh(atob(c))}setupLicenseXHR(e,n,r,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,n,r,s)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),i.call(this.hls,e,n,r,s)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}s(l)}else{const l=r.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)i(new Yt({type:ie.KEY_SYSTEM_ERROR,details:F.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,n).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==Te.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},sa.clearKeyUriToKeyIdMap();const r=n.length;xi.CDMCleanupPromise=Promise.all(n.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),n.remove().catch(i=>{this.log(`Could not remove session: ${i}`)}).then(()=>n.close()).catch(i=>{this.log(`Could not close session: ${i}`)})}}}xi.CDMCleanupPromise=void 0;class Yt extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var dt;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(dt||(dt={}));var Ih;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(Ih||(Ih={}));var fs;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(fs||(fs={}));const f2={[fs.OBJECT]:["br","d","ot","tb"],[fs.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[fs.SESSION]:["cid","pr","sf","sid","st","v"],[fs.STATUS]:["bs","rtp"]};class Hi{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(r=>r instanceof Hi?r:new Hi(r))),this.value=e,this.params=n}}class b1{constructor(e){this.description=void 0,this.description=e}}const h2="Dict";function p2(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function m2(t,e,n,r){return new Error(`failed to ${t} "${p2(e)}" as ${n}`,{cause:r})}const Fy="Bare Item",g2="Boolean",y2="Byte Sequence",v2="Decimal",x2="Integer";function E2(t){return t<-999999999999999||999999999999999<t}const S2=/[\x00-\x1f\x7f]+/,T2="Token",w2="Key";function zn(t,e,n){return m2("serialize",t,e,n)}function b2(t){if(typeof t!="boolean")throw zn(t,g2);return t?"?1":"?0"}function R2(t){return btoa(String.fromCharCode(...t))}function A2(t){if(ArrayBuffer.isView(t)===!1)throw zn(t,y2);return`:${R2(t)}:`}function R1(t){if(E2(t))throw zn(t,x2);return t.toString()}function C2(t){return`@${R1(t.getTime()/1e3)}`}function A1(t,e){if(t<0)return-A1(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const s=Math.floor(t*n);return(s%2===0?s:s+1)/n}else return Math.round(t*n)/n}function L2(t){const e=A1(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw zn(t,v2);const n=e.toString();return n.includes(".")?n:`${n}.0`}const I2="String";function k2(t){if(S2.test(t))throw zn(t,I2);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function D2(t){return t.description||t.toString().slice(7,-1)}function My(t){const e=D2(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw zn(e,T2);return e}function kh(t){switch(typeof t){case"number":if(!Z(t))throw zn(t,Fy);return Number.isInteger(t)?R1(t):L2(t);case"string":return k2(t);case"symbol":return My(t);case"boolean":return b2(t);case"object":if(t instanceof Date)return C2(t);if(t instanceof Uint8Array)return A2(t);if(t instanceof b1)return My(t);default:throw zn(t,Fy)}}function Dh(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw zn(t,w2);return t}function xm(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${Dh(e)}`:`;${Dh(e)}=${kh(n)}`).join("")}function C1(t){return t instanceof Hi?`${kh(t.value)}${xm(t.params)}`:kh(t)}function P2(t){return`(${t.value.map(C1).join(" ")})${xm(t.params)}`}function _2(t,e={whitespace:!0}){if(typeof t!="object")throw zn(t,h2);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([s,i])=>{i instanceof Hi||(i=new Hi(i));let o=Dh(s);return i.value===!0?o+=xm(i.params):(o+="=",Array.isArray(i.value)?o+=P2(i):o+=C1(i)),o}).join(`,${r}`)}function O2(t,e){return _2(t,e)}const N2=t=>t==="ot"||t==="sf"||t==="st",F2=t=>typeof t=="number"?Z(t):t!=null&&t!==""&&t!==!1;function M2(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const s=n.pathname.split("/").slice(1),i=r.pathname.split("/").slice(1,-1);for(;s[0]===i[0];)s.shift(),i.shift();for(;i.length;)i.shift(),s.unshift("..");return s.join("/")}function U2(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?i:i&3|8).toString(16)})}}}const Ul=t=>Math.round(t),B2=(t,e)=>(e!=null&&e.baseUrl&&(t=M2(t,e.baseUrl)),encodeURIComponent(t)),dl=t=>Ul(t/100)*100,$2={br:Ul,d:Ul,bl:dl,dl,mtp:dl,nor:B2,rtp:dl,tb:Ul};function j2(t,e){const n={};if(t==null||typeof t!="object")return n;const r=Object.keys(t).sort(),s=We({},$2,e==null?void 0:e.formatters),i=e==null?void 0:e.filter;return r.forEach(o=>{if(i!=null&&i(o))return;let a=t[o];const l=s[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||F2(a)&&(N2(o)&&typeof a=="string"&&(a=new b1(a)),n[o]=a))}),n}function L1(t,e={}){return t?O2(j2(t,e),We({whitespace:!1},e)):""}function G2(t,e={}){if(!t)return{};const n=Object.entries(t),r=Object.entries(f2).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),s=n.reduce((i,o)=>{var a,l;const[c,u]=o,d=((a=r.find(f=>f[1].includes(c)))==null?void 0:a[0])||fs.REQUEST;return(l=i[d])!=null||(i[d]={}),i[d][c]=u,i},{});return Object.entries(s).reduce((i,[o,a])=>(i[o]=L1(a,e),i),{})}function V2(t,e,n){return We(t,G2(e,n))}const H2="CMCD";function K2(t,e={}){if(!t)return"";const n=L1(t,e);return`${H2}=${encodeURIComponent(n)}`}const Uy=/CMCD=[^&#]+/;function z2(t,e,n){const r=K2(e,n);if(!r)return t;if(Uy.test(t))return t.replace(Uy,r);const s=t.includes("?")?"&":"?";return`${t}${s}${r}`}class W2{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:dt.MANIFEST,su:!this.initialized})}catch(i){P.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const i=s.frag,o=this.hls.levels[i.level],a=this.getObjectType(i),l={d:i.duration*1e3,ot:a};(a===dt.VIDEO||a===dt.AUDIO||a==dt.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(s,l)}catch(i){P.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||U2(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHED,this.onMediaDetached,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHED,this.onMediaDetached,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,s;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(s=n.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:Ih.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){We(n,this.createData());const r=n.ot===dt.INIT||n.ot===dt.VIDEO||n.ot===dt.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:s}=this;s&&(n=Object.keys(n).reduce((i,o)=>(s.includes(o)&&(i[o]=n[o]),i),{})),this.useHeaders?(e.headers||(e.headers={}),V2(e.headers,n)):e.url=z2(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return dt.TIMED_TEXT;if(e.sn==="initSegment")return dt.INIT;if(n==="audio")return dt.AUDIO;if(n==="main")return this.hls.audioTracks.length?dt.VIDEO:dt.MUXED}getTopBandwidth(e){let n=0,r;const s=this.hls;if(e===dt.AUDIO)r=s.audioTracks;else{const i=s.maxAutoLevel,o=i>-1?i+1:s.levels.length;r=s.levels.slice(0,o)}for(const i of r)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,r=e===dt.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:Ie.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new r(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,o,a){n(i),this.loader.load(i,o,a)}}}}const Y2=3e5;class q2{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=P.log.bind(P,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===it.SendAlternateToPenaltyBox&&r.flags===an.MoveAllAlternatesMatchingHost){const s=this.levels;let i=this.pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:c}=n.context;a&&s?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!i&&s&&(i=s.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==o),r.resolved||P.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${s&&s.length} priorities: ${JSON.stringify(i)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const r=this.penalizedPathways,s=performance.now();Object.keys(r).forEach(i=>{s-r[i]>Y2&&delete r[i]});for(let i=0;i<e.length;i++){const o=e[i];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,Ww(n),this.hls.trigger(S.LEVELS_UPDATED,{levels:n});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const s=this.getLevelsForPathway(r).concat(this.levels||[]);for(let i=0;i<s.length;i++)if(n===ye.AUDIO_TRACK&&s[i].hasAudioGroup(e)||n===ye.SUBTITLE_TRACK&&s[i].hasSubtitleGroup(e))return s[i].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},s={};e.forEach(i=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=i;if(n.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const d=new Fe(u.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,m=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(r[d.AUDIO]=f,d.AUDIO=f),m&&(s[d.SUBTITLES]=m,d.SUBTITLES=m);const p=I1(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),h=new Vi({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let g=1;g<u.audioGroups.length;g++)h.addGroupId("audio",`${u.audioGroups[g]}_clone_${o}`);if(u.subtitleGroups)for(let g=1;g<u.subtitleGroups.length;g++)h.addGroupId("text",`${u.subtitleGroups[g]}_clone_${o}`);return h});n.push(...c),By(this.audioTracks,r,l,o),By(this.subtitleTracks,s,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+u)}const i={responseType:"json",url:s.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,d,f,m)=>{this.log(`Loaded steering manifest: "${s}"`);const p=u.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":h,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":y}=p;if(h)try{this.uri=new self.URL(h,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${h}`);return}this.scheduleRefresh(this.uri||f.url),g&&this.clonePathways(g);const v={steeringManifest:p,url:s.toString()};this.hls.trigger(S.STEERING_MANIFEST_LOADED,v),y&&this.updatePathwayPriority(y)},onError:(u,d,f,m)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const h=this.loader;if(typeof(h==null?void 0:h.getResponseHeader)=="function"){const g=h.getResponseHeader("Retry-After");g&&(p=parseFloat(g)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,l,c)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const s=(r=this.hls)==null?void 0:r.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function By(t,e,n,r){t&&Object.keys(e).forEach(s=>{const i=t.filter(o=>o.groupId===s).map(o=>{const a=We({},o);return a.details=void 0,a.attrs=new Fe(a.attrs),a.url=a.attrs.URI=I1(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=r,a});t.push(...i)})}function I1(t,e,n,r){const{HOST:s,PARAMS:i,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return s&&!a&&(l.host=s),i&&Object.keys(i).sort().forEach(c=>{c&&l.searchParams.set(c,i[c])}),l.href}const X2=/^age:\s*[\d.]+\s*$/im;class k1{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new gu,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return i(r,n.url)}).catch(o=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),i(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{this.callbacks.onError({code:r.status,text:o.message},n,r,s)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const s=n.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=r.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Z(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const s=n.readyState,i=this.config;if(!r.aborted&&s>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType==="text"?n.responseText:null;if(o>=200&&o<300){const d=a??n.response;if(d!=null){r.loading.end=Math.max(self.performance.now(),r.loading.first);const f=n.responseType==="arraybuffer"?d.byteLength:d.length;if(r.loaded=r.total=f,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const m=this.callbacks.onProgress;if(m&&m(r,e,d,n),!this.callbacks)return;const p={url:n.responseURL,data:d,code:o};this.callbacks.onSuccess(p,r,e,n);return}}const l=i.loadPolicy.errorRetry,c=r.retry,u={url:e.url,data:void 0,code:o};Ic(l,c,!1,u)?this.retry(l):(P.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,r))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Ic(e,n,!0))this.retry(e);else{var r;P.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=om(e,r.retry),r.retry++,P.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&X2.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function Q2(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const J2=/(\d+)-(\d+)\/(\d+)/;class $y{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||nU,this.controller=new self.AbortController,this.stats=new gu}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=Z2(e,this.controller.signal),o=r.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),n.timeout=c&&Z(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},n.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},u-(f-s.loading.start)),!d.ok){const{status:m,statusText:p}=d;throw new rU(p||"fetch, bad network response",m,d)}return s.loading.first=f,s.total=tU(d.headers)||s.total,o&&Z(n.highWaterMark)?this.loadProgressively(d,s,e,n.highWaterMark,o):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const m=d[l];m&&(s.loaded=s.total=m);const p={url:f.url,data:d,code:f.status};o&&!Z(n.highWaterMark)&&o(s,e,d,f),r.onSuccess(p,s,e,f)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=d&&d.code||0,m=d?d.message:null;r.onError({code:f,text:m},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,s=0,i){const o=new Qw,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&i(n,r,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return n.loaded+=d,d<s||o.dataLength?(o.push(u),o.dataLength>=s&&i(n,r,o.flush(),e)):i(n,r,u,e),l()}).catch(()=>Promise.reject());return l()}}function Z2(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(We({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function eU(t){const e=J2.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function tU(t){const e=t.get("Content-Range");if(e){const r=eU(e);if(Z(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function nU(t,e){return new self.Request(t.url,e)}class rU extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const sU=/\s/,iU={newCue(t,e,n,r){const s=[];let i,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(i=r.rows[f],a=!0,l=0,c="",!i.isEmpty()){var d;for(let h=0;h<i.chars.length;h++)sU.test(i.chars[h].uchar)&&a?l++:(c+=i.chars[h].uchar,a=!1);i.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const m=x1(c.trim()),p=ym(e,n,m);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new u(e,n,m),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(o))}return t&&s.length&&(s.sort((f,m)=>f.line==="auto"||m.line==="auto"?0:f.line>8&&m.line>8?m.line-f.line:f.line-m.line),s.forEach(f=>Vw(t,f))),s}},oU={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},D1=nt(nt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:k1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:_F,bufferController:MM,capLevelController:vm,errorController:SF,fpsController:d2,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Lw,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:oU},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},aU()),{},{subtitleStreamController:_M,subtitleTrackController:NM,timelineController:c2,audioStreamController:DM,audioTrackController:PM,emeController:xi,cmcdController:W2,contentSteeringController:q2});function aU(){return{cueHandler:iU,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function lU(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Ph(t),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(i=>{const o=`${i==="level"?"playlist":i}LoadPolicy`,a=e[o]===void 0,l=[];s.forEach(c=>{const u=`${i}Loading${c}`,d=e[u];if(d!==void 0&&a){l.push(u);const f=n[o].default;switch(e[o]={default:f},c){case"TimeOut":f.maxLoadTimeMs=d,f.maxTimeToFirstByteMs=d;break;case"MaxRetry":f.errorRetry.maxNumRetry=d,f.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":f.errorRetry.retryDelayMs=d,f.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=d,f.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&P.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),nt(nt({},n),e)}function Ph(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(Ph):Object.keys(t).reduce((e,n)=>(e[n]=Ph(t[n]),e),{}):t}function cU(t){const e=t.loader;e!==$y&&e!==k1?(P.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Q2()&&(t.loader=$y,t.progressive=!0,t.enableSoftwareAES=!0,P.log("[config]: Progressive streaming enabled, using FetchLoader"))}let Md;class uU extends am{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,s=[],i={},o={};let a=!1,l=!1,c=!1;n.levels.forEach(u=>{var d,f;const m=u.attrs;let{audioCodec:p,videoCodec:h}=u;((d=p)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(Md||(Md=/chrome|firefox/i.test(navigator.userAgent)),Md&&(u.audioCodec=p=void 0)),p&&(u.audioCodec=p=Ac(p,r)),((f=h)==null?void 0:f.indexOf("avc1"))===0&&(h=u.videoCodec=XN(h));const{width:g,height:y,unknownCodecs:v}=u;if(a||(a=!!(g&&y)),l||(l=!!h),c||(c=!!p),v!=null&&v.length||p&&!Td(p,"audio",r)||h&&!Td(h,"video",r))return;const{CODECS:x,"FRAME-RATE":b,"HDCP-LEVEL":T,"PATHWAY-ID":A,RESOLUTION:R,"VIDEO-RANGE":C}=m,L=`${`${A||"."}-`}${u.bitrate}-${R}-${b}-${x}-${C}-${T}`;if(i[L])if(i[L].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const _=o[L]+=1;u.attrs["PATHWAY-ID"]=new Array(_+1).join(".");const $=new Vi(u);i[L]=$,s.push($)}else i[L].addGroupId("audio",m.AUDIO),i[L].addGroupId("text",m.SUBTITLES);else{const _=new Vi(u);i[L]=_,o[L]=1,s.push(_)}}),this.filterAndSortMediaOptions(s,n,a,l,c)}filterAndSortMediaOptions(e,n,r,s,i){let o=[],a=[],l=e;if((r||s)&&i&&(l=l.filter(({videoCodec:p,videoRange:h,width:g,height:y})=>(!!p||!!(g&&y))&&cF(h))),l.length===0){Promise.resolve().then(()=>{if(this.hls){n.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(n.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:p,reason:p.message})}});return}if(n.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;o=n.audioTracks.filter(h=>!h.audioCodec||Td(h.audioCodec,"audio",p)),jy(o)}n.subtitles&&(a=n.subtitles,jy(a));const c=l.slice(0);l.sort((p,h)=>{if(p.attrs["HDCP-LEVEL"]!==h.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(h.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&p.height!==h.height)return p.height-h.height;if(p.frameRate!==h.frameRate)return p.frameRate-h.frameRate;if(p.videoRange!==h.videoRange)return Cc.indexOf(p.videoRange)-Cc.indexOf(h.videoRange);if(p.videoCodec!==h.videoCodec){const g=Y0(p.videoCodec),y=Y0(h.videoCodec);if(g!==y)return y-g}if(p.uri===h.uri&&p.codecSet!==h.codecSet){const g=Rc(p.codecSet),y=Rc(h.codecSet);if(g!==y)return y-g}return p.averageBitrate!==h.averageBitrate?p.averageBitrate-h.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let p=0;p<c.length;p++)if(c[p].pathwayId===l[0].pathwayId){u=c[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===u){var d;this._firstLevel=p;const h=u.bitrate,g=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${h}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const y=Math.min(h,this.hls.config.abrEwmaDefaultEstimateMax);y>g&&g===D1.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=y)}break}const f=i&&!s,m={levels:l,audioTracks:o,subtitleTracks:a,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:i,video:s,altAudio:!f&&o.some(p=>!!p.url)};this.hls.trigger(S.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(S.ERROR,{type:ie.OTHER_ERROR,details:F.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&o.details&&s&&i===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${r}${i?" with Pathway "+i:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(S.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,s==null?void 0:s.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===ye.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===re.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(i=>!!r[i]))return;const s=this._levels[n.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,n){var r;const{level:s,details:i}=n,o=this._levels[s];if(!o){var a;this.warn(`Invalid level index ${s}`),(a=n.deliveryDirectives)!=null&&a.skip&&(i.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(s,n,o.details)):(r=n.deliveryDirectives)!=null&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let s=r.uri;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const i=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${i?" Pathway "+i:""} ${s}`),this.clearTimer(),this.hls.trigger(S.LEVEL_LOADING,{url:s,level:n,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;const r=this._levels.filter((s,i)=>i!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));Ww(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(S.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(S.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function jy(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}class dU{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[r].loader;if(s){var n;if(e&&e!==((n=s.context)==null?void 0:n.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=F.KEY_LOAD_ERROR,r,s,i){return new Zn({type:ie.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:i,error:r,networkDetails:s})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:s}=e;for(let i=0;i<n.length;i++){const o=n[i];if(s<=o.cc&&(r==="initSegment"||o.sn==="initSegment"||r<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,s;n&&e.setKeyFormat(n);const i=e.decryptdata;if(!i){const c=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,F.KEY_LOAD_ERROR,c))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,F.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((r=a)!=null&&r.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((s=a)!=null&&s.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(i.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,F.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(r);if(s)return(e.keyLoadPromise=s.then(i=>(e.mediaKeySessionContext=i,r))).catch(i=>{throw e.keyLoadPromise=null,i})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,s=r.loader,i=new s(r);return n.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},c=r.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,m,p,h)=>{const{frag:g,keyInfo:y,url:v}=p;if(!g.decryptdata||y!==this.keyUriToKeyInfo[v])return a(this.createKeyLoadError(g,F.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),h));y.decryptdata.key=g.decryptdata.key=new Uint8Array(f.data),g.keyLoader=null,y.loader=null,o({frag:g,keyInfo:y})},onError:(f,m,p,h)=>{this.resetLoader(m),a(this.createKeyLoadError(n,F.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,nt({url:l.url,data:void 0},f)))},onTimeout:(f,m,p)=>{this.resetLoader(m),a(this.createKeyLoadError(n,F.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,m,p)=>{this.resetLoader(m),a(this.createKeyLoadError(n,F.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};i.load(l,u,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:s}=e,i=r.loader;n.keyLoader===i&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[s],i&&i.destroy()}}function P1(){return self.SourceBuffer||self.WebKitSourceBuffer}function _1(){if(!Os())return!1;const e=P1();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function fU(){if(!_1())return!1;const t=Os();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(ia(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(ia(e,"audio"))))}function hU(){var t;const e=P1();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const pU=250,Bl=2,mU=.1,gU=.05;class yU{constructor(e,n,r,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=r,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:r,media:s,stalled:i}=this;if(s===null)return;const{currentTime:o,seeking:a}=s,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),i!==null){if(this.stallReported){const g=self.performance.now()-i;P.warn(`playback not stuck anymore @${o}, after ${Math.round(g)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(s.paused&&!a||s.ended||s.playbackRate===0||!Ie.getBuffered(s).length){this.nudgeRetry=0;return}const u=Ie.bufferInfo(s,o,0),d=u.nextStart||0;if(a){const g=u.len>Bl,y=!d||n&&n.start<=o||d-o>Bl&&!this.fragmentTracker.getPartialFragment(o);if(g||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;if(!(u.len>0)&&!d)return;const y=Math.max(d,u.start||0)-o,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(v==null||(f=v.details)==null?void 0:f.live)?v.details.targetduration*2:Bl,T=this.fragmentTracker.getPartialFragment(o);if(y>0&&(y<=b||T)){s.paused||this._trySkipBufferHole(T);return}}const m=self.performance.now();if(i===null){this.stalled=m;return}const p=m-i;if(!a&&p>=pU&&(this._reportStall(u),!this.media))return;const h=Ie.bufferInfo(s,o,r.maxBufferHole);this._tryFixBufferStall(h,p)}_tryFixBufferStall(e,n){const{config:r,fragmentTracker:s,media:i}=this;if(i===null)return;const o=i.currentTime,a=s.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-o<r.maxBufferHole)&&n>r.highBufferWatchdogPeriod*1e3&&(P.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:r,stallReported:s}=this;if(!s&&r){this.stallReported=!0;const i=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);P.warn(i.message),n.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:r,media:s}=this;if(s===null)return 0;const i=s.currentTime,o=Ie.bufferInfo(s,i,0),a=i<o.start?o.start:o.nextStart;if(a){const l=o.len<=n.maxBufferHole,c=o.len>0&&o.len<1&&s.readyState<3,u=a-i;if(u>0&&(l||c)){if(u>n.maxBufferHole){const{fragmentTracker:f}=this;let m=!1;if(i===0){const p=f.getAppendedFrag(0,re.MAIN);p&&a<p.end&&(m=!0)}if(!m){const p=e||f.getAppendedFrag(i,re.MAIN);if(p){let h=!1,g=p.end;for(;g<a;){const y=f.getPartialFragment(g);if(y)g+=y.duration;else{h=!0;break}}if(h)return 0}}}const d=Math.max(a+gU,i+mU);if(P.warn(`skipping hole, adjusting currentTime from ${i} to ${d}`),this.moved=!0,this.stalled=null,s.currentTime=d,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${d}`);r.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:r,nudgeRetry:s}=this;if(r===null)return;const i=r.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const o=i+(s+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${i} to ${o}`);P.warn(a.message),r.currentTime=o,n.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);P.error(o.message),n.trigger(S.ERROR,{type:ie.MEDIA_ERROR,details:F.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const vU=100;class xU extends um{constructor(e,n,r){super(e,n,r,"[stream-controller]",re.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(S.ERROR,this.onError,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(S.ERROR,this.onError,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(vU),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=V.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=V.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case V.WAITING_LEVEL:{const{levels:n,level:r}=this,s=n==null?void 0:n[r],i=s==null?void 0:s.details;if(i&&(!i.live||this.levelLastLoaded===s)){if(this.waitForCdnTuneIn(i))break;this.state=V.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=V.IDLE;break}break}case V.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(e=this.media)!=null&&e.seeking){const{levels:s,level:i}=this,o=s==null?void 0:s[i];this.resetStartWhenNotLoaded(o||null),this.state=V.IDLE}}break}this.state===V.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:s}=this;if(n===null||!s&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[i]))return;const o=r[i],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const h={};this.altAudio&&(h.type="video"),this.hls.trigger(S.BUFFER_EOS,h),this.state=V.ENDED;return}if(!this.buffering)return;e.loadLevel!==i&&e.manualLevel===-1&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const c=o.details;if(!c||this.state===V.WAITING_LEVEL||c.live&&this.levelLastLoaded!==o){this.level=i,this.state=V.WAITING_LEVEL;return}const u=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let m=this.getNextFragment(f,c);if(this.couldBacktrack&&!this.fragPrevious&&m&&m.sn!=="initSegment"&&this.fragmentTracker.getState(m)!==et.OK){var p;const g=((p=this.backtrackFragment)!=null?p:m).sn-c.startSN,y=c.fragments[g-1];y&&m.cc===y.cc&&(m=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,f)){if(!m.gap){const g=this.audioOnly&&!this.altAudio?be.AUDIO:be.VIDEO,y=(g===be.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,g,re.MAIN)}m=this.getNextFragmentLoopLoading(m,c,a,re.MAIN,d)}m&&(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,o,f))}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===et.NOT_LOADED||s===et.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,re.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const s=this.getAppendedFrag(n.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<i.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case V.KEY_LOADING:case V.FRAG_LOADING:case V.FRAG_LOADING_WAITING_RETRY:case V.PARSING:case V.PARSED:this.state=V.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new yU(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;Z(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const r=this.getMainFwdBufferInfo();if(r===null||r.len===0){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(S.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,n){let r=!1,s=!1;n.levels.forEach(i=>{const o=i.audioCodec;o&&(r=r||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&s&&!hU(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==V.IDLE)return;const s=r[n.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=V.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:s}=this,i=n.level,o=n.details,a=o.totalduration;if(!s){this.warn(`Levels were reset while loading level ${i}`);return}this.log(`Level ${i} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=s[i],c=this.fragCurrent;c&&(this.state===V.FRAG_LOADING||this.state===V.FRAG_LOADING_WAITING_RETRY)&&c.level!==n.level&&c.loader&&this.abortCurrentFrag();let u=0;if(o.live||(r=l.details)!=null&&r.live){var d;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(S.LEVEL_UPDATED,{details:o,level:i}),this.state===V.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=V.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level],l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),m=this.transmuxer=this.transmuxer||new h1(this.hls,re.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,h=p!==-1,g=new lm(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,h),y=this.initPTS[r.cc];m.push(i,d,f,c,r,s,l.totalduration,u,g,y)}onAudioTrackSwitching(e,n){const r=this.altAudio;if(!!!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const i=this.hls;r&&(i.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(S.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=n.id,s=!!this.hls.audioTracks[r].url;if(s){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=s,this.tick()}onBufferCreated(e,n){const r=n.tracks;let s,i,o=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(i=a,s=l,a==="video"){const c=r[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r&&r.type!==re.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===V.PARSED&&(this.state=V.IDLE);return}const i=s?s.stats:r.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),r.sn!=="initSegment"&&(this.fragPrevious=r),this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=V.ERROR;return}switch(n.details){case F.FRAG_GAP:case F.FRAG_PARSING_ERROR:case F.FRAG_DECRYPT_ERROR:case F.FRAG_LOAD_ERROR:case F.FRAG_LOAD_TIMEOUT:case F.KEY_LOAD_ERROR:case F.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(re.MAIN,n);break;case F.LEVEL_LOAD_ERROR:case F.LEVEL_LOAD_TIMEOUT:case F.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===V.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===ye.LEVEL&&(this.state=V.IDLE);break;case F.BUFFER_APPEND_ERROR:case F.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;if(n.details===F.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case F.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!Ie.getBuffered(e).length){const r=this.state!==V.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=V.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==be.AUDIO||this.audioOnly&&!this.altAudio){const r=(n===be.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,re.MAIN),this.tick()}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const s=Ie.getBuffered(e),o=(s.length?s.start(0):0)-r;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),r+=o,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${n}`),e.currentTime=r}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:s}=this;if(!r||this.fragContextChanged(e))return;n.fragmentError=0,this.state=V.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),s.trigger(S.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r="main",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{video:d,text:f,id3:m,initSegment:p}=i,{details:h}=u,g=this.altAudio?void 0:i.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=V.PARSING,p){if(p!=null&&p.tracks){const x=l.initSegment||l;this._bufferInitSegment(u,p.tracks,x,o),s.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:r,tracks:p.tracks})}const y=p.initPTS,v=p.timescale;Z(y)&&(this.initPTS[l.cc]={baseTime:y,timescale:v},s.trigger(S.INIT_PTS_FOUND,{frag:l,id:r,initPTS:y,timescale:v}))}if(d&&h&&l.sn!=="initSegment"){const y=h.fragments[l.sn-1-h.startSN],v=l.sn===h.startSN,x=!y||l.cc>y.cc;if(i.independent!==!1){const{startPTS:b,endPTS:T,startDTS:A,endDTS:R}=d;if(c)c.elementaryStreams[d.type]={startPTS:b,endPTS:T,startDTS:A,endDTS:R};else if(d.firstKeyFrame&&d.independent&&o.id===1&&!x&&(this.couldBacktrack=!0),d.dropped&&d.independent){const C=this.getMainFwdBufferInfo(),k=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,L=d.firstKeyFramePTS?d.firstKeyFramePTS:b;if(!v&&k<L-this.config.maxBufferHole&&!x){this.backtrack(l);return}else x&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,T,l.start,R,!0)}else v&&b>Bl&&(l.gap=!0);l.setElementaryStreamInfo(d.type,b,T,A,R),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,o,v||x)}else if(v||x)l.gap=!0;else{this.backtrack(l);return}}if(g){const{startPTS:y,endPTS:v,startDTS:x,endDTS:b}=g;c&&(c.elementaryStreams[be.AUDIO]={startPTS:y,endPTS:v,startDTS:x,endDTS:b}),l.setElementaryStreamInfo(be.AUDIO,y,v,x,b),this.bufferFragmentData(g,l,c,o)}if(h&&m!=null&&(n=m.samples)!=null&&n.length){const y={id:r,frag:l,details:h,samples:m.samples};s.trigger(S.FRAG_PARSING_METADATA,y)}if(h&&f){const y={id:r,frag:l,details:h,samples:f.samples};s.trigger(S.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,n,r,s){if(this.state!==V.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:i,video:o,audiovideo:a}=n;if(i){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const u=i.metadata;u&&"channelCount"in u&&(u.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),i.levelCodec=l,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${i.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(S.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const u=n[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(S.BUFFER_APPENDING,{type:l,data:u,frag:r,part:null,chunkMeta:s,parent:r.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,re.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=V.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(Ie.isBuffered(e,r)?n=this.getAppendedFrag(r):Ie.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const s=this.fragPlaying,i=n.level;(!s||n.sn!==s.sn||s.level!==i)&&(this.fragPlaying=n,this.hls.trigger(S.FRAG_CHANGED,{frag:n}),(!s||s.level!==i)&&this.hls.trigger(S.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,r=this.currentFrag;if(r&&Z(n)&&Z(r.programDateTime)){const s=r.programDateTime+(n-r.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class gn{static get version(){return"1.5.20"}static isMSESupported(){return _1()}static isSupported(){return fU()}static getMediaSource(){return Os()}static get Events(){return S}static get ErrorTypes(){return ie}static get ErrorDetails(){return F}static get DefaultConfig(){return gn.defaultConfig?gn.defaultConfig:D1}static set DefaultConfig(e){gn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new mm,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,aN(e.debug||!1,"Hls instance");const n=this.config=lU(gn.DefaultConfig,e);this.userConfig=e,n.progressive&&cU(n);const{abrController:r,bufferController:s,capLevelController:i,errorController:o,fpsController:a}=n,l=new o(this),c=this.abrController=new r(this),u=this.bufferController=new s(this),d=this.capLevelController=new i(this),f=new a(this),m=new tF(this),p=new oF(this),h=n.contentSteeringController,g=h?new h(this):null,y=this.levelController=new uU(this,g),v=new NF(this),x=new dU(this.config),b=this.streamController=new xU(this,v,x);d.setStreamController(b),f.setStreamController(b);const T=[m,y,b];g&&T.splice(1,0,g),this.networkControllers=T;const A=[c,u,d,f,p,v];this.audioTrackController=this.createController(n.audioTrackController,T);const R=n.audioStreamController;R&&T.push(new R(this,v,x)),this.subtitleTrackController=this.createController(n.subtitleTrackController,T);const C=n.subtitleStreamController;C&&T.push(new C(this,v,x)),this.createController(n.timelineController,A),x.emeController=this.emeController=this.createController(n.emeController,A),this.cmcdController=this.createController(n.cmcdController,A),this.latencyController=this.createController(aF,A),this.coreComponents=A,T.push(l);const k=l.onErrorOut;typeof k=="function"&&this.on(S.ERROR,k,l)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,s){this._emitter.off(e,n,r,s)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(P.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const s=e===S.ERROR;this.trigger(S.ERROR,{type:ie.OTHER_ERROR,details:F.INTERNAL_EXCEPTION,fatal:s,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){P.log("destroy"),this.trigger(S.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){P.log("attachMedia"),this._media=e,this.trigger(S.MEDIA_ATTACHING,{media:e})}detachMedia(){P.log("detachMedia"),this.trigger(S.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,r=this.url,s=this.url=nm.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,P.log(`loadSource:${s}`),n&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(S.MANIFEST_LOADING,{url:e})}startLoad(e=-1){P.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e),!(!this.started||!this.networkControllers));n++);}stopLoad(){P.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){P.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){P.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){P.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){P.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){P.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){P.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){P.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){P.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){P.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(P.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){lF(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let s=0;s<r;s++)if(e[s].maxBitrate>=n)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let s;if(n===-1&&e!=null&&e.length?s=e.length-1:s=n,r)for(let i=s;i--;){const o=e[i].attrs["HDCP-LEVEL"];if(o&&o<=r)return i}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var n;return(n=this.audioTrackController)==null?void 0:n.setAudioOption(e)}setSubtitleOption(e){var n;return(n=this.subtitleTrackController)==null||n.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}gn.defaultConfig=void 0;const EU=({movieTitle:t})=>{const[e,n]=E.useState(!1),[r,s]=E.useState(!1),[i,o]=E.useState(!1),[a,l]=E.useState(null),[c,u]=E.useState(null),[d,f]=E.useState(null),m=E.useRef(null),p=E.useRef(null);E.useEffect(()=>()=>{p.current&&p.current.destroy()},[]),E.useEffect(()=>{t&&h(t)},[t]),E.useEffect(()=>{d&&m.current&&v(d)},[d]);const h=async A=>{o(!0),console.log("Iniciando busca por:",A);try{const R=await pd.searchContent(A);if(console.log("Resultados da busca:",R),R.error)console.error("Erro na busca:",R.error);else if(l(R.resultados),R.resultados&&Object.keys(R.resultados).length>0){const C=Object.keys(R.resultados)[0];console.log("Selecionando primeiro resultado:",C),await g(C,R.resultados)}else console.log("Nenhum resultado encontrado")}catch(R){console.error("Erro na busca:",R)}finally{o(!1)}},g=async(A,R)=>{o(!0),console.log("Selecionando conteúdo:",A);try{const C=await pd.getVideo(A,R);if(console.log("Resultado da seleção:",C),C.episodios){console.log("Conteúdo é uma série, selecionando primeiro episódio"),u(C.episodios);const k=Object.keys(C.episodios)[0];k&&await y(k,C.episodios)}else C.video_id&&(console.log("Conteúdo é um filme, definindo ID:",C.video_id),u(null),f(C.video_id))}catch(C){console.error("Erro ao selecionar conteúdo:",C)}finally{o(!1)}},y=async(A,R)=>{o(!0),console.log("Selecionando episódio:",A);try{const C=await pd.selectEpisode(A,R);console.log("Resultado da seleção do episódio:",C),C.video_id&&f(C.video_id)}catch(C){console.error("Erro ao selecionar episódio:",C)}finally{o(!1)}},v=A=>{const R=m.current;if(!R){console.error("Elemento de vídeo não encontrado");return}console.log("Iniciando player HLS para o vídeo:",A),p.current&&(p.current.destroy(),p.current=null);const C=`https://scrap.dioneygabriel.com.br/hls/${A}/index.m3u8`;console.log("URL do HLS:",C);try{if(gn.isSupported()){console.log("HLS é suportado, criando nova instância");const k=new gn({debug:!0,enableWorker:!0});k.on(gn.Events.ERROR,(L,_)=>{console.error("Erro HLS:",L,_)}),k.on(gn.Events.MANIFEST_PARSED,()=>{console.log("Manifest HLS carregado, iniciando playback"),R.play().catch(L=>{console.error("Erro ao iniciar playback:",L)})}),k.on(gn.Events.MEDIA_ATTACHED,()=>{console.log("Mídia HLS anexada ao elemento de vídeo")}),console.log("Carregando source HLS:",C),k.loadSource(C),k.attachMedia(R),p.current=k}else R.canPlayType("application/vnd.apple.mpegurl")?(console.log("Usando player nativo para HLS"),R.src=C,R.addEventListener("loadedmetadata",()=>{R.play().catch(k=>{console.error("Erro ao iniciar playback nativo:",k)})})):console.error("HLS não é suportado neste navegador")}catch(k){console.error("Erro ao inicializar HLS:",k)}},x=()=>{m.current&&(e?m.current.pause():m.current.play().catch(console.error),n(!e))},b=()=>{m.current&&(m.current.muted=!r,s(!r))},T=()=>{m.current&&(document.fullscreenElement?document.exitFullscreen().catch(console.error):m.current.requestFullscreen().catch(console.error))};return w.jsxs("div",{className:"space-y-4",children:[c&&w.jsx("div",{className:"grid gap-2",children:Object.entries(c).map(([A,R])=>w.jsx("button",{onClick:()=>y(A,c),className:"w-full rounded-lg bg-white/5 p-4 text-left text-white hover:bg-white/10",children:R.titulo},A))}),w.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-xl bg-black shadow-2xl group",children:i?w.jsx("div",{className:"flex h-full items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:w.jsx(KE,{className:"h-12 w-12 animate-spin text-white"})}):d?w.jsxs(w.Fragment,{children:[w.jsx("video",{ref:m,className:"h-full w-full object-contain",onPlay:()=>n(!0),onPause:()=>n(!1),playsInline:!0,crossOrigin:"anonymous"}),w.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex items-center justify-between bg-gradient-to-t from-black/80 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{position:"absolute",zIndex:2147483647},children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:x,className:"rounded-full bg-white/10 p-2 backdrop-blur-sm transition-all hover:bg-white/20",children:e?w.jsx(yC,{className:"h-6 w-6 text-white"}):w.jsx(vC,{className:"h-6 w-6 text-white"})}),w.jsx("button",{onClick:b,className:"rounded-full bg-white/10 p-2 backdrop-blur-sm transition-all hover:bg-white/20",children:r?w.jsx(TC,{className:"h-6 w-6 text-white"}):w.jsx(SC,{className:"h-6 w-6 text-white"})})]}),w.jsx("button",{onClick:T,className:"rounded-full bg-white/10 p-2 backdrop-blur-sm transition-all hover:bg-white/20",children:w.jsx(gC,{className:"h-6 w-6 text-white"})})]})]}):w.jsx("div",{className:"flex h-full items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:w.jsx("p",{className:"text-lg text-white/70",children:"Vídeo não disponível"})})})]})},SU={"pt-BR":{back:"Voltar",synopsis:"Sinopse",trailer:"Trailer",watchOn:"Onde Assistir",streaming:"Streaming",rent:"Alugar",buy:"Comprar",cast:"Elenco",similarMovies:"Filmes Similares"},"en-US":{back:"Back",synopsis:"Synopsis",trailer:"Trailer",watchOn:"Where to Watch",streaming:"Streaming",rent:"Rent",buy:"Buy",cast:"Cast",similarMovies:"Similar Movies"},"es-ES":{back:"Volver",synopsis:"Sinopsis",trailer:"Tráiler",watchOn:"Dónde Ver",streaming:"Streaming",rent:"Alquilar",buy:"Comprar",cast:"Reparto",similarMovies:"Películas Similares"}},TU=()=>{var m,p;const{id:t}=JS(),e=Xp(),n=E.useRef(null),r=E.useRef(null),s=localStorage.getItem("selectedLanguage")||"pt-BR",i=SU[s],{data:o,isLoading:a}=kn({queryKey:["movie",t],queryFn:async()=>(await Dn.getMovieDetails(t)).data,enabled:!!t}),{data:l}=kn({queryKey:["recommendations",t],queryFn:async()=>(await Dn.getRecommendations(t)).data.results,enabled:!!t}),c=h=>{const g=Math.floor(h/60),y=h%60;return g===0?`${y}min`:y===0?`${g}h`:`${g}h ${y}min`};if(a)return w.jsx(JO,{});if(!o)return null;const u=o.videos.results.find(h=>h.type==="Trailer"),d=(p=(m=o["watch/providers"])==null?void 0:m.results)==null?void 0:p.BR,f=(h,g)=>{const y=g.current;if(!y)return;const v=y.clientWidth*.8;y.scrollBy({left:h==="left"?-v:v,behavior:"smooth"})};return w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800",children:[w.jsxs("button",{onClick:()=>e(-1),className:"fixed left-4 top-4 z-50 flex items-center gap-2 rounded-full bg-black/50 px-4 py-2 text-white backdrop-blur-sm transition-all hover:bg-black/70",children:[w.jsx(GE,{className:"h-5 w-5"}),i.back]}),w.jsxs("div",{className:"relative h-[60vh] w-full bg-cover bg-center bg-no-repeat lg:h-[70vh]",style:{backgroundImage:`url(https://image.tmdb.org/t/p/original${o.backdrop_path})`},children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"}),w.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:w.jsxs("div",{className:"mx-auto max-w-7xl",children:[w.jsx("h1",{className:"text-4xl font-bold text-white md:text-5xl lg:text-6xl",children:o.title}),w.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(zE,{className:"h-5 w-5 text-yellow-400"}),o.vote_average.toFixed(1)]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(hC,{className:"h-5 w-5"}),c(o.runtime)]}),w.jsx("div",{className:"flex flex-wrap gap-2",children:o.genres.map(h=>w.jsx("span",{className:"rounded-full bg-white/10 px-3 py-1 text-sm",children:h.name},h.id))})]})]})})]}),w.jsx("div",{className:"mx-auto max-w-7xl px-4 py-12 md:px-8",children:w.jsxs("div",{className:"space-y-12",children:[w.jsxs("section",{children:[w.jsx("h2",{className:"mb-4 text-2xl font-semibold text-white",children:i.synopsis}),w.jsx("p",{className:"text-lg leading-relaxed text-gray-300",children:o.overview})]}),u&&w.jsxs("section",{children:[w.jsx("h2",{className:"mb-4 text-2xl font-semibold text-white",children:i.trailer}),w.jsx("div",{className:"aspect-video overflow-hidden rounded-xl",children:w.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${u.key}`,title:"Trailer",allowFullScreen:!0,className:"border-0"})})]}),d&&w.jsxs("section",{children:[w.jsx("h2",{className:"mb-6 text-2xl font-semibold text-white",children:i.watchOn}),w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[d.flatrate&&w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-lg font-medium text-white",children:i.streaming}),w.jsx("div",{className:"flex flex-wrap gap-4",children:d.flatrate.map(h=>w.jsx("img",{src:`https://image.tmdb.org/t/p/original${h.logo_path}`,alt:h.provider_name,className:"h-12 w-12 rounded-lg"},h.provider_id))})]}),d.rent&&w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-lg font-medium text-white",children:i.rent}),w.jsx("div",{className:"flex flex-wrap gap-4",children:d.rent.map(h=>w.jsx("img",{src:`https://image.tmdb.org/t/p/original${h.logo_path}`,alt:h.provider_name,className:"h-12 w-12 rounded-lg"},h.provider_id))})]}),d.buy&&w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-lg font-medium text-white",children:i.buy}),w.jsx("div",{className:"flex flex-wrap gap-4",children:d.buy.map(h=>w.jsx("img",{src:`https://image.tmdb.org/t/p/original${h.logo_path}`,alt:h.provider_name,className:"h-12 w-12 rounded-lg"},h.provider_id))})]})]}),w.jsx("div",{className:"mt-8",children:w.jsx(EU,{movieTitle:o.title})})]})]}),w.jsxs("section",{children:[w.jsx("h2",{className:"mb-4 text-2xl font-semibold text-white",children:i.cast}),w.jsxs("div",{className:"group relative",children:[w.jsx("div",{ref:n,className:"flex overflow-x-auto pb-4 scrollbar-hide",children:w.jsx("div",{className:"flex gap-4",children:o.credits.cast.slice(0,20).map(h=>w.jsxs(nT,{to:`/actor/${h.id}`,className:"flex w-[200px] flex-shrink-0 flex-col items-center rounded-lg bg-white/10 p-4 text-center backdrop-blur-sm transition-all hover:bg-white/20",children:[h.profile_path?w.jsx("img",{src:`https://image.tmdb.org/t/p/w200${h.profile_path}`,alt:h.name,className:"h-40 w-40 rounded-full object-cover"}):w.jsx("div",{className:"flex h-40 w-40 items-center justify-center rounded-full bg-gray-700",children:w.jsx(HE,{className:"h-12 w-12 text-gray-400"})}),w.jsxs("div",{className:"mt-4",children:[w.jsx("p",{className:"font-medium text-white",children:h.name}),w.jsx("p",{className:"text-sm text-gray-400",children:h.character})]})]},h.id))})}),o.credits.cast.length>5&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>f("left",n),className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:group-hover:opacity-100 lg:block lg:opacity-0",children:w.jsx(uc,{className:"h-6 w-6"})}),w.jsx("button",{onClick:()=>f("right",n),className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:group-hover:opacity-100 lg:block lg:opacity-0",children:w.jsx(dc,{className:"h-6 w-6"})})]})]})]}),l&&l.length>0&&w.jsxs("section",{children:[w.jsx("h2",{className:"mb-6 text-2xl font-semibold text-white",children:i.similarMovies}),w.jsxs("div",{className:"group relative",children:[w.jsx("div",{ref:r,className:"flex overflow-x-auto pb-6 scrollbar-hide",children:w.jsx("div",{className:"flex gap-6",children:l.map(h=>w.jsx("div",{className:"w-[200px] flex-shrink-0",children:w.jsx(Sc,{movie:h})},h.id))})}),l.length>5&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>f("left",r),className:"absolute left-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:group-hover:opacity-100 lg:block lg:opacity-0",children:w.jsx(uc,{className:"h-6 w-6"})}),w.jsx("button",{onClick:()=>f("right",r),className:"absolute right-0 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/50 p-2 text-white backdrop-blur-sm transition-all hover:bg-black/70 hidden lg:group-hover:opacity-100 lg:block lg:opacity-0",children:w.jsx(dc,{className:"h-6 w-6"})})]})]})]})]})}),w.jsx("footer",{className:"mt-auto py-6 text-center text-white/70",children:w.jsxs("p",{className:"text-sm",children:["Created with ❤️ by"," ",w.jsx("a",{href:"https://github.com/dioneybecker",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-purple-400 hover:text-purple-300 transition-colors",children:"Dioney Gabriel"})]})})]})},wU={"pt-BR":{back:"Voltar",personalInfo:"Informações Pessoais",birthDate:"Data de Nascimento",birthPlace:"Local de Nascimento",knownFor:"Conhecido por",biography:"Biografia",filmography:"Filmografia",departments:{Acting:"Atuação",Directing:"Direção",Production:"Produção",Writing:"Roteiro",Crew:"Equipe Técnica","Visual Effects":"Efeitos Visuais",Sound:"Som",Camera:"Câmera",Editing:"Edição",Art:"Arte","Costume & Make-Up":"Figurino & Maquiagem"}},"en-US":{back:"Back",personalInfo:"Personal Information",birthDate:"Birth Date",birthPlace:"Birth Place",knownFor:"Known For",biography:"Biography",filmography:"Filmography",departments:{Acting:"Acting",Directing:"Directing",Production:"Production",Writing:"Writing",Crew:"Crew","Visual Effects":"Visual Effects",Sound:"Sound",Camera:"Camera",Editing:"Editing",Art:"Art","Costume & Make-Up":"Costume & Make-Up"}},"es-ES":{back:"Volver",personalInfo:"Información Personal",birthDate:"Fecha de Nacimiento",birthPlace:"Lugar de Nacimiento",knownFor:"Conocido por",biography:"Biografía",filmography:"Filmografía",departments:{Acting:"Actuación",Directing:"Dirección",Production:"Producción",Writing:"Guión",Crew:"Equipo Técnico","Visual Effects":"Efectos Visuales",Sound:"Sonido",Camera:"Cámara",Editing:"Edición",Art:"Arte","Costume & Make-Up":"Vestuario y Maquillaje"}}},bU=()=>{const{id:t}=JS(),e=Xp(),n=E.useRef(null),r=localStorage.getItem("selectedLanguage")||"pt-BR",s=wU[r],{data:i}=kn({queryKey:["actor",t],queryFn:async()=>(await Dn.getActorDetails(t)).data,enabled:!!t}),o=l=>s.departments[l]||l,a=l=>{const c=n.current;if(!c)return;const u=c.clientWidth*.8;c.scrollBy({left:l==="left"?-u:u,behavior:"smooth"})};return i?w.jsxs("div",{className:"min-h-screen overflow-x-hidden bg-gradient-to-b from-[#1A1F2C] to-[#141821]",children:[w.jsxs("button",{onClick:()=>e(-1),className:"fixed left-6 top-6 z-50 flex items-center gap-2 rounded-full bg-black/30 px-5 py-2.5 text-white backdrop-blur-md transition-all hover:bg-black/50",children:[w.jsx(GE,{className:"h-5 w-5"}),w.jsx("span",{className:"text-sm font-medium",children:s.back})]}),w.jsxs("div",{className:"mx-auto max-w-[1000px] px-6 pt-20",children:[w.jsx("div",{className:"mb-10 flex justify-center",children:w.jsx("div",{className:"relative h-[300px] w-[300px] md:h-[400px] md:w-[400px]",children:i.profile_path?w.jsx("img",{src:`https://image.tmdb.org/t/p/original${i.profile_path}`,alt:i.name,className:"h-full w-full rounded-full object-cover"}):w.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-full bg-[#1D2437]",children:w.jsx(HE,{className:"h-20 w-20 text-gray-600"})})})}),w.jsx("h1",{className:"mb-16 text-center text-5xl font-bold tracking-tight text-white lg:text-6xl",children:i.name}),w.jsx("div",{className:"mb-16 overflow-hidden rounded-2xl border border-white/5 bg-white/5 shadow-xl backdrop-blur-sm",children:w.jsxs("div",{className:"grid gap-8 p-8 md:grid-cols-[300px,1fr]",children:[w.jsxs("div",{className:"space-y-6",children:[w.jsx("h2",{className:"text-xl font-semibold text-white",children:s.personalInfo}),w.jsxs("div",{className:"space-y-6",children:[i.birthday&&w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-[#9CA3AF]",children:s.birthDate}),w.jsx("p",{className:"mt-1 text-white",children:new Date(i.birthday).toLocaleDateString(r)})]}),i.place_of_birth&&w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-[#9CA3AF]",children:s.birthPlace}),w.jsx("p",{className:"mt-1 text-white",children:i.place_of_birth})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-medium text-[#9CA3AF]",children:s.knownFor}),w.jsx("p",{className:"mt-1 text-white",children:o(i.known_for_department)})]})]})]}),i.biography&&w.jsxs("div",{className:"space-y-6",children:[w.jsx("h2",{className:"text-xl font-semibold text-white",children:s.biography}),w.jsx("div",{className:"space-y-4",children:i.biography.split(`
`).filter(Boolean).map((l,c)=>w.jsx("p",{className:"text-base leading-relaxed text-[#D1D5DB]",children:l},c))})]})]})}),w.jsxs("div",{className:"mb-16",children:[w.jsx("h2",{className:"mb-8 text-2xl font-semibold text-white",children:s.filmography}),w.jsxs("div",{className:"group relative",children:[w.jsx("div",{ref:n,className:"flex overflow-x-auto pb-8 scrollbar-hide",children:w.jsx("div",{className:"flex gap-6",children:i.movie_credits.cast.map(l=>w.jsx("div",{className:"w-[200px] flex-shrink-0",children:w.jsx(Sc,{movie:l})},l.id))})}),i.movie_credits.cast.length>5&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>a("left"),className:"absolute -left-4 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/30 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/50 hidden lg:block lg:opacity-0 lg:group-hover:opacity-100",children:w.jsx(uc,{className:"h-6 w-6"})}),w.jsx("button",{onClick:()=>a("right"),className:"absolute -right-4 top-1/2 z-10 -translate-y-1/2 rounded-full bg-black/30 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/50 hidden lg:block lg:opacity-0 lg:group-hover:opacity-100",children:w.jsx(dc,{className:"h-6 w-6"})})]})]})]})]}),w.jsx("footer",{className:"mt-auto py-6 text-center text-white/70",children:w.jsxs("p",{className:"text-sm",children:["Created with ❤️ by"," ",w.jsx("a",{href:"https://github.com/dioneybecker",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-purple-400 hover:text-purple-300 transition-colors",children:"Dioney Gabriel"})]})})]}):null},RU=()=>{const t=Ea();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),w.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),w.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},AU=new Rk,CU=()=>w.jsx(Ik,{client:AU,children:w.jsxs(lk,{children:[w.jsx(iL,{}),w.jsx(OL,{}),w.jsx(MD,{children:w.jsxs(kD,{children:[w.jsx(xo,{path:"/",element:w.jsx(QO,{})}),w.jsx(xo,{path:"/movie/:id",element:w.jsx(TU,{})}),w.jsx(xo,{path:"/actor/:id",element:w.jsx(bU,{})}),w.jsx(xo,{path:"*",element:w.jsx(RU,{})})]})})]})});fE(document.getElementById("root")).render(w.jsx(CU,{}));
